$(
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
                   Group sum operation
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
$)

  $c gsum $.

  $( Extend class notation to include finitely supported group sums. $)
  cgsu $a class gsum $.

  ${
    $d f g j m n o w x y z $.
    $( Define the group sum for the structure ` G ` of a finite sequence of
       elements whose values are defined by the expression ` B ` and whose set
       of indices is ` A ` .  It may be viewed as a product (if ` G ` is a
       multiplication), a sum (if ` G ` is an addition) or whatever.  The
       variable ` k ` is normally a free variable in ` B ` ( i.e. ` B ` can be
       thought of as ` B ( k ) ` ).  The definition is meaningful in four
       contexts, depending on the size of the index set ` A ` and each
       demanding different properties of ` G ` .

       1.  If ` A = (/) ` and ` G ` has an identity element, then the sum
       equals this identity.

       2.  If ` A = ( M ... N ) ` and ` G ` is any magma, then the sum is the
       sum of the elements, evaluated left-to-right, i.e.
       ` ( B ( 1 ) + B ( 2 ) ) + B ( 3 ) ` etc.

       3.  If ` A ` is a finite set (or is non-zero for finitely many indices)
       and ` G ` is commutative and associative, then the sum adds up these
       elements in some order, which is then uniquely defined.

       4.  If ` A ` is an infinite set and ` G ` is a Hausdorff topological
       group, then the sum is the limit with respect to the filter of sums of
       finitely many terms from ` A ` . $)
    df-gsum $a |- gsum = ( w e. _V , f e. _V |-> [_ { x e. ( Base ` w ) |
        A. y e. ( Base ` w )
          ( ( x ( +g ` w ) y ) = y /\ ( y ( +g ` w ) x ) = y ) } / o ]_
      if ( ran f C_ o , ( 0g ` w ) ,
      if ( dom f e. ran ... ,
        ( iota x E. m E. n e. ( ZZ>= ` m ) ( dom f = ( m ... n ) /\
          x = ( seq m ( ( +g ` w ) , f ) ` n ) ) ) ,
      ( iota x E. g [ ( `' f " ( _V \ o ) ) / y ]
        ( g : ( 1 ... ( # ` y ) ) -1-1-onto-> y /\
          x = ( seq 1 ( ( +g ` w ) , ( f o. g ) ) ` ( # ` y ) ) ) ) ) ) ) $.
  $}

  ${
    $d k F $.  $d k ph $.  $d k W $.  $d k Z $.
    suppss.f $e |- ( ph -> F : A --> B ) $.
    suppss.n $e |- ( ( ph /\ k e. ( A \ W ) ) -> ( F ` k ) = Z ) $.
    $( Show that the support of a function is contained in a set. $)
    suppss $p |- ( ph -> ( `' F " ( _V \ { Z } ) ) C_ W ) $=
      ( ccnv cvv csn cdif cima cv wcel cfv wa wf wfn ffn elpreima 3syl wne fvex
      wb eldifsn mpbiran wceq eldif sylan2br expr necon1ad syl5bi expimpd ssrdv
      wn sylbid ) ADEJKGLMZNZFADOZUTPZVABPZVAEQZUSPZRZVAFPZABCESEBTVBVFUFHBCEUA
      BVAUSEUBUCAVCVEVGVEVDGUDZAVCRZVGVEVDKPVHVDKGUGVAEUEUHVIVGVDGAVCVGUQZVDGUI
      ZVCVJRAVABFMPVKVABFUJIUKULUMUNUOURUP $.
      $( [19-Dec-2014] $)
  $}

  ${
    suppssr.f $e |- ( ph -> F : A --> B ) $.
    suppssr.n $e |- ( ph -> ( `' F " ( _V \ { Z } ) ) C_ W ) $.
    $( A function is zero outside its support. $)
    suppssr $p |- ( ( ph /\ X e. ( A \ W ) ) -> ( F ` X ) = Z ) $=
      ( cdif wcel wn wa cfv wceq eldif wne cvv csn eldifsn fvex mpbiran ccnv wf
      cima wfn wb ffn elpreima 3syl sseld sylbird expdimp syl5bir necon1bd impr
      sylan2b ) FBEJKAFBKZFEKZLZMFDNZGOZFBEPAURUTVBAURMZUSVAGVAGQZVARGSJZKZVCUS
      VFVARKVDVARGTFDUAUBAURVFUSAURVFMZFDUCVEUEZKZUSABCDUDDBUFVIVGUGHBCDUHBFVED
      UIUJAVHEFIUKULUMUNUOUPUQ $.
      $( [19-Dec-2014] $)
  $}

  ${
    $d k x y A $.  $d x y B $.  $d k x ph $.  $d k x y W $.  $d k x y Z $.
    suppss2.n $e |- ( ( ph /\ k e. ( A \ W ) ) -> B = Z ) $.
    $( Show that the support of a function is contained in a set. $)
    suppss2 $p |- ( ph -> ( `' ( k e. A |-> B ) " ( _V \ { Z } ) ) C_ W ) $=
      ( vx vy cvv mpbi cv cfv wceq cdif wral wcel wa adantl ax-17 cmpt cdm wfun
      wf wfn funmpt funfn dffn2 a1i crab eldifi eqid dmmpt syl6eleq rabid sylib
      simpld simprd fvmpt2 syl2anc eldifn eldif sylanbrc syldan eqtrd ralrimiva
      wn hbmpt1 hbdm hbdif hbfv hbeq fveq2 eqeq1d cbvralf r19.21bi suppss ) ADB
      CUAZUBZJHVREFVSJVRUDZAVRVSUEZVTVRUCWADBCUFVRUGKVSVRUHKUIAHLZVRMZFNZHVSEOZ
      ADLZVRMZFNZDWEPWDHWEPAWHDWEAWFWEQZRZWGCFWJWFBQZCJQZWGCNWJWKWLWJWFWLDBUJZQ
      WKWLRWJWFVSWMWIWFVSQAWFVSEUKSDBCVRVRULZUMUNWLDBUOUPZUQZWJWKWLWOURDBCJVRWN
      USUTAWIWFBEOQZCFNWJWKWFEQVGZWQWPWIWRAWFVSEVASWFBEVBVCGVDVEVFWHWDDHIWEDIVS
      EDIVRDIBCVHZVIILZEQDTVJWTWEQHTWHHTDIIWCFDIWBVRWSWTWBQDTVKWTFQDTVLWFWBNWGW
      CFWFWBVRVMVNVOUPVPVQ $.
      $( [19-Dec-2014] $)
  $}

  ${
    $d x y B $.  $d x y G $.  $d x y P $.  $d x V $.  $d x y Z $.
    gsumvallem1.b $e |- B = ( Base ` G ) $.
    gsumvallem1.z $e |- Z = ( 0g ` G ) $.
    gsumvallem1.p $e |- P = ( +g ` G ) $.
    gsumvallem1.o $e |- O = { x e. B |
      A. y e. B ( ( x P y ) = y /\ ( y P x ) = y ) } $.
    $( Lemma for properties of the set of identities of ` G ` .  Either ` G `
       has no identities, and ` O = (/) ` , or it has one and this identity is
       unique and identified by the ` 0g ` function. $)
    gsumvallem1 $p |- ( G e. V -> O C_ { Z } ) $=
      ( wcel cv co wceq wa wral crab sylibr csn wi wss crio cio grpidval adantr
      wreu wrex wmo ra4e adantl mgmidmo a1i sylanbrc riotaiota simprr wb simprl
      reu5 syl reiota1 syl2anc mpbid 3eqtrrd elsn expr ralrimiva rabss syl5eqss
      ) EGMZFANZBNZDOVMPVMVLDOVMPQBCRZACSZHUAZLVKVNVLVPMZUBZACRVOVPUCVKVRACVKVL
      CMZVNVQVKVSVNQZQZVLHPVQWAHVNACUDZVTAUEZVLVKHWBPVTBCDAEHGIKJUFUGWAVNACUHZW
      BWCPWAVNACUIZVTAUJZWDVTWEVKVNACUKULWFWABACDUMUNVNACUTUOZVNACUPVAWAVNWCVLP
      ZVKVSVNUQWAVSWDVNWHURVKVSVNUSWGVNACVBVCVDVEAHVFTVGVHVNACVPVITVJ $.
      $( [7-Dec-2014] $)

    $( Lemma for properties of the set of identities of ` G ` .  The set of
       identities of a monoid is exactly the unique identity element. $)
    gsumvallem2 $p |- ( G e. Mnd -> O = { Z } ) $=
      ( cmnd wcel csn cv co wceq wa wral eqeq1d mndidcl mndlid mndrid ralrimiva
      gsumvallem1 jca oveq1 oveq2 anbi12d ralbidv elrab2 sylanbrc snssd eqssd )
      ELMZFGNABCDEFLGHIJKUEUOGFUOGCMGBOZDPZUPQZUPGDPZUPQZRZBCSZGFMCEGHIUAUOVABC
      UOUPCMRURUTCDEGUPHJIUBCDEGUPHJIUCUFUDAOZUPDPZUPQZUPVCDPZUPQZRZBCSVBAGCFVC
      GQZVHVABCVIVEURVGUTVIVDUQUPVCGUPDUGTVIVFUSUPVCGUPDUHTUIUJKUKULUMUN $.
      $( [7-Dec-2014] $)
  $}

  ${
    $d f g j m n o w x y z F $.  $d f g j m n o w x y z G $.  $d g j o w y W $.
    $d g o w A $.  $d s t x y B $.  $d f g j m n o w x y z ph $.  $d g o w Z $.
    $d j z J $.  $d f g j m n o w x y z O $.  $d g j o s t w x y P $.
    $d y S $.
    gsumval.b $e |- B = ( Base ` G ) $.
    gsumval.z $e |- Z = ( 0g ` G ) $.
    gsumval.p $e |- P = ( +g ` G ) $.
    gsumval.o $e |- O = { s e. B |
      A. t e. B ( ( s P t ) = t /\ ( t P s ) = t ) } $.
    gsumval.w $e |- ( ph -> W = ( `' F " ( _V \ O ) ) ) $.
    gsumval.g $e |- ( ph -> G e. V ) $.
    gsumval.a $e |- ( ph -> A e. X ) $.
    gsumval.f $e |- ( ph -> F : A --> B ) $.
    $( Expand out the substitutions in ~ df-gsum .  (Contributed by Mario
       Carneiro, 7-Dec-2014.) $)
    gsumval $p |- ( ph -> ( G gsum F ) = if ( ran F C_ O , Z ,
      if ( A e. ran ... , ( iota x E. m E. n e. ( ZZ>= ` m )
        ( A = ( m ... n ) /\ x = ( seq m ( P , F ) ` n ) ) ) ,
      ( iota x E. f ( f : ( 1 ... ( # ` W ) ) -1-1-onto-> W /\
          x = ( seq 1 ( P , ( F o. f ) ) ` ( # ` W ) ) ) ) ) ) ) $=
      ( vw vg vo vy cvv cv cplusg cfv co wceq cbs wral crab crn wss c0g cdm cfz
      wa wcel cseq cuz wrex wex cio chash wf1o ccom ccnv cdif cima wsbc cif csb
      c1 cmpt2 df-gsum a1i simprl fveq2d syl6eqr oveqd eqeq1d anbi12d raleqbidv
      cgsu rabeqbidv oveq2 eqeq12d oveq1 cbvralv ralbidv syl5bb cbvrabv csbeq1d
      id eqtri fvex eqeltri rabex simplrr rneqd simpr sseq12d dmeqd wf ad2antrr
      adantr fdm syl eqtrd eleq1d seqeq2d seqeq3d fveq1d eqeq2d exbidv iotabidv
      rexbidv wb cnveqd imaeq1d difeq2d imaeq2d eqtr4d dfsbcq cxp fssxp sylancl
      xpexg adantl bitrd ifbieq12d iotaex ifex ssexg syl2anc cnvexg imaexg 3syl
      eqeltrd fveq2 oveq2d f1oeq2 f1oeq3 coeq1d fveq12d sbcied csbied ovmpt2d
      elex ) AUFUGKJUJUJUHBUKZUIUKZUFUKZULUMZUNZUURUOZUURUUQUUTUNZUURUOZVDZUIUU
      SUPUMZUQZBUVFURZUGUKZUSZUHUKZUTZUUSVAUMZUVIVBZVCUSZVEZUVNHUKZIUKZVCUNZUOZ
      UUQUVRUUTUVIUVQVFZUMZUOZVDZIUVQVGUMZVHZHVIZBVJZVTUURVKUMZVCUNZUURGUKZVLZU
      UQUWIUUTUVIUWKVMZVTVFZUMZUOZVDZUIUVIVNZUJUVKVOZVPZVQZGVIZBVJZVRZVRZVSZJUS
      ZLUTZPDUVOVEZDUVSUOZUUQUVRFJUVQVFZUMZUOZVDZIUWEVHZHVIZBVJZVTNVKUMZVCUNZNU
      WKVLZUUQUXRFJUWKVMZVTVFZUMZUOZVDZGVIZBVJZVRZVRZWKUJWKUFUGUJUJUXFWAUOABUIU
      FUGGHIUHWBWCAUUSKUOZUVIJUOZVDZVDZUXFUHLUXEVSUYIUYMUHUVHLUXEUYMUVHUUQUURFU
      NZUURUOZUURUUQFUNZUURUOZVDZUIEUQZBEURZLUYMUVGUYSBUVFEUYMUVFKUPUMZEUYMUUSK
      UPAUYJUYKWDZWERWFZUYMUVEUYRUIUVFEVUCUYMUVBUYOUVDUYQUYMUVAUYNUURUYMUUTFUUQ
      UURUYMUUTKULUMFUYMUUSKULVUBWETWFZWGWHUYMUVCUYPUURUYMUUTFUURUUQVUDWGWHWIWJ
      WLLQUKZCUKZFUNZVUFUOZVUFVUEFUNZVUFUOZVDZCEUQZQEURUYTUAVULUYSQBEVULVUEUURF
      UNZUURUOZUURVUEFUNZUURUOZVDZUIEUQVUEUUQUOZUYSVUKVUQCUIEVUFUURUOZVUHVUNVUJ
      VUPVUSVUGVUMVUFUURVUFUURVUEFWMVUSXAZWNVUSVUIVUOVUFUURVUFUURVUEFWOVUTWNWIW
      PVURVUQUYRUIEVURVUNUYOVUPUYQVURVUMUYNUURVUEUUQUURFWOWHVURVUOUYPUURVUEUUQU
      URFWMWHWIWQWRWSXBZWFWTUYMUHLUXEUYIUJLUJVEUYMLUYTUJVVAUYSBEEVUAUJRKUPXCXDZ
      XEXDWCUYMUVKLUOZVDZUVLUXHUVMUXDPUYHVVDUVJUXGUVKLVVDUVIJAUYJUYKVVCXFZXGUYM
      VVCXHZXIVVDUVMKVAUMZPVVDUUSKVAUYMUYJVVCVUBXMWESWFVVDUVPUXIUWHUXCUXQUYGVVD
      UVNDUVOVVDUVNJVBZDVVDUVIJVVEXJVVDDEJXKZVVHDUOAVVIUYLVVCUEXLDEJXNXOXPZXQVV
      DUWGUXPBVVDUWFUXOHVVDUWDUXNIUWEVVDUVTUXJUWCUXMVVDUVNDUVSVVJWHVVDUWBUXLUUQ
      VVDUVRUWAUXKVVDUWAFUVIUVQVFUXKVVDUUTFUVIUVQUYMUUTFUOVVCVUDXMZXRVVDUVIJFUV
      QVVEXSXPXTYAWIYDYBYCVVDUXBUYFBVVDUXAUYEGVVDUXAUWQUINVQZUYEVVDUWTNUOUXAVVL
      YEVVDUWTJVNZUWSVPZNVVDUWRVVMUWSVVDUVIJVVEYFYGVVDVVNVVMUJLVOZVPZNVVDUWSVVO
      VVMVVDUVKLUJVVFYHYIANVVPUOUYLVVCUBXLYJXPUWQUIUWTNYKXOVVDUWQUYEUINUJANUJVE
      UYLVVCANVVPUJUBAJUJVEZVVMUJVEVVPUJVEAJDEYLZUTZVVRUJVEZVVQAVVIVVSUEDEJYMXO
      ADOVEEUJVEVVTUDVVBDEOUJYOYNJVVRUJUUAUUBZJUJUUCVVMVVOUJUUDUUEUUFXLVVDUURNU
      OZVDZUWLUXTUWPUYDVWCUWLUXSUURUWKVLZUXTVWCUWJUXSUOUWLVWDYEVWCUWIUXRVTVCVWB
      UWIUXRUOVVDUURNVKUUGYPZUUHUWJUXSUURUWKUUIXOVWBVWDUXTYEVVDUURNUXSUWKUUJYPY
      QVWCUWOUYCUUQVWCUWIUXRUWNUYBVVDUWNUYBUOVWBVVDUWNFUWMVTVFUYBVVDUUTFUWMVTVV
      KXRVVDUWMUYAFVTVVDUVIJUWKVVEUUKXSXPXMVWEUULYAWIUUMYQYBYCYRYRUUNXPAKMVEKUJ
      VEUCKMUUPXOVWAUYIUJVEAUXHPUYHPVVGUJSKVAXCXDUXIUXQUYGUXPBYSUYFBYSYTYTWCUUO
      $.
      $( [7-Dec-2014] $)
  $}

  ${
    $d f m n x y z B $.  $d f m n x y z G $.  $d f m n x y z H $.  $d x y Z $.
    $d f m n z F $.  $d f m n x y z P $.  $d f m n x z ph $.  $d y V $.
    gsumress.b $e |- B = ( Base ` G ) $.
    gsumress.o $e |- P = ( +g ` G ) $.
    gsumress.h $e |- H = ( G |`s S ) $.
    gsumress.g $e |- ( ph -> G e. V ) $.
    gsumress.a $e |- ( ph -> A e. X ) $.
    gsumress.s $e |- ( ph -> S C_ B ) $.
    gsumress.f $e |- ( ph -> F : A --> S ) $.
    gsumress.z $e |- ( ph -> Z e. S ) $.
    gsumress.c $e |- ( ( ph /\ x e. B ) ->
      ( ( Z P x ) = x /\ ( x P Z ) = x ) ) $.
    $( The group sum in a substructure is the same as the group sum in the
       original structure.  The only requirement on the substructure is that it
       contain the identity element; neither ` G ` nor ` H ` need be groups.
       (Contributed by Mario Carneiro, 19-Dec-2014.) $)
    gsumress $p |- ( ph -> ( G gsum F ) = ( H gsum F ) ) $=
      ( vy vm vn vz vf crn cv wceq wral crab wss c0g cfv cfz wcel cseq cuz wrex
      co wa wex cio c1 ccnv cvv csn cdif cima chash wf1o ccom cif cbs ralrimiva
      cgsu sseldd oveq1 eqeq1d oveq2 anbi12d ralbidv elrab sylanbrc gsumvallem1
      snssd eqid syl elsni sneqd sseqtr4d eqssd ressbas2 eqsstr3d sselda syldan
      eleqtrd cress eqeltri a1i ressplusg eqtr3d sseq2d eqidd ifbieq12d difeq2d
      ovex imaeq2d wf fss syl2anc gsumval wb feq3 mpbid 3eqtr4d ) AGUGZUBUHZBUH
      ZEUTZXSUIZXSXREUTZXSUIZVAZBDUJZUBDUKZULZHUMUNZCUOUGUPCUCUHZUDUHZUOUTUIUEU
      HZYJEGYIUQUNUIVAUDYIURUNUSUCVBUEVCVDGVEZVFLVGZVHZVIZVJUNZUOUTYOUFUHZVKYKY
      PEGYQVLVDUQUNUIVAUFVBUEVCVMZVMXQYDBIVNUNZUJZUBYSUKZULZIUMUNZYRVMHGVPUTIGV
      PUTAYGUUBYHYRUUCYRAYFUUAXQAYMYFUUAAYMYFALYFALDUPLXSEUTZXSUIZXSLEUTZXSUIZV
      AZBDUJZLYFUPAFDLRTVQAUUHBDUAVOYEUUIUBLDXRLUIZYDUUHBDUUJYAUUEYCUUGUUJXTUUD
      XSXRLXSEVRVSUUJYBUUFXSXRLXSEVTVSWAZWBWCWDZWFAYFYHVGZYMAHJUPYFUUMULPUBBDEH
      YFJYHMYHWGZNYFWGZWEWHZALYHALUUMUPLYHUIAYFUUMLUUPUULVQLYHWIWHZWJWKWLZAYMUU
      AALUUAALYSUPUUHBYSUJZLUUAUPALFYSTAFDULZFYSUIZRFDIHOMWMWHZWQAUUHBYSAXSYSUP
      XSDUPUUHAYSDXSAYSFDUVBRWNWOUAWPVOYTUUSUBLYSUUJYDUUHBYSUUKWBWCWDZWFAUUAUUC
      VGZYMAIVFUPZUUAUVDULUVEAIHFWRUTVFOHFWRXGWSWTZUBBYSEIUUAVFUUCYSWGZUUCWGZFE
      HIONXAZUUAWGZWEWHZALUUCALUVDUPLUUCUIAUUAUVDLUVKUVCVQLUUCWIWHZWJWKWLZXBXCA
      LYHUUCUUQUVLXBAYRXDXEAUEBCDEUFUCUDGHYFJYOKYHUBMUUNNUUOAYNVFYFVHYLAYMYFVFU
      URXFXHPQACFGXIZUUTCDGXISRCFDGXJXKXLAUEBCYSEUFUCUDGIUUAVFYOKUUCUBUVGUVHUVI
      UVJAYNVFUUAVHYLAYMUUAVFUVMXFXHUVFQAUVNCYSGXIZSAUVAUVNUVOXMUVBFYSCGXNWHXOX
      LXP $.
      $( [19-Dec-2014] $)
  $}

  ${
    $d x G $.  $d x H $.  $d x ph $.
    gsumsubg.a $e |- ( ph -> A e. V ) $.
    gsumsubg.s $e |- ( ph -> S e. ( SubGrp ` G ) ) $.
    gsumsubg.f $e |- ( ph -> F : A --> S ) $.
    gsumsubg.h $e |- H = ( G |`s S ) $.
    $( Evaluate a group sum in a subgroup.  (Contributed by Mario Carneiro,
       19-Dec-2014.) $)
    gsumsubg $p |- ( ph -> ( G gsum F ) = ( H gsum F ) ) $=
      ( vx cfv cgrp eqid wcel syl co wceq wa cbs cplusg c0g subgrcl wss subg0cl
      csubg subgss cv grplid grprid jca sylan gsumress ) ALBEUAMZEUBMZCDEFNGEUC
      MZUOOZUPOZKACEUGMPZENPZICEUDQZHAUTCUOUEIUOCEURUHQJAUTUQCPICEUQUQOZUFQAVAL
      UIZUOPZUQVDUPRVDSZVDUQUPRVDSZTVBVAVETVFVGUOUPEUQVDURUSVCUJUOUPEUQVDURUSVC
      UKULUMUN $.
      $( [19-Dec-2014] $)
  $}

  ${
    $d f m n z F $.  $d f m n z G $.  $d f m n z O $.  $d f m n z ph $.
    $d x y z B $.  $d x y z P $.
    gsumval1.b $e |- B = ( Base ` G ) $.
    gsumval1.z $e |- Z = ( 0g ` G ) $.
    gsumval1.p $e |- P = ( +g ` G ) $.
    gsumval1.o $e |- O = { x e. B |
      A. y e. B ( ( x P y ) = y /\ ( y P x ) = y ) } $.
    gsumval1.g $e |- ( ph -> G e. V ) $.
    gsumval1.a $e |- ( ph -> A e. W ) $.
    gsumval1.f $e |- ( ph -> F : A --> O ) $.
    $( Value of the group sum operation when every element being summed is an
       identity of ` G ` . $)
    gsumval1 $p |- ( ph -> ( G gsum F ) = Z ) $=
      ( cv vm vn vz vf cgsu co crn wss cfz wcel wceq cseq cfv wa cuz wex cio c1
      wrex ccnv cvv cdif cima chash wf1o ccom eqidd wf wral crab ssrab2 eqsstri
      cif fss sylancl gsumval frn syl iftrue eqtrd ) AHGUEUFGUGIUHZLDUIUGUJDUAT
      ZUBTZUIUFUKUCTZWCFGWBULUMUKUNUBWBUOUMUSUAUPUCUQURGUTVAIVBVCZVDUMZUIUFWEUD
      TZVEWDWFFGWGVFURULUMUKUNUDUPUCUQVMZVMZLAUCCDEFUDUAUBGHIJWEKLBMNOPAWEVGQRA
      DIGVHZIEUHDEGVHSIBTZCTZFUFWLUKWLWKFUFWLUKUNCEVIZBEVJEPWMBEVKVLDIEGVNVOVPA
      WAWILUKAWJWASDIGVQVRWALWHVSVRVT $.
      $( [7-Dec-2014] $)
  $}

  ${
    $d f g m n o w x y $.  $d k A $.  $d k x y G $.  $d k V $.  $d x y Z $.
    gsum0.z $e |- Z = ( 0g ` G ) $.
    $( Value of the empty group sum. $)
    gsum0 $p |- ( G gsum (/) ) = Z $=
      ( vx vy vw vf vo vm vn vg cvv wcel c0 cgsu co wceq cfv cv wa wral crab id
      cbs cplusg eqid 0ex a1i wf gsumval1 crn wss c0g cdm cfz cseq cuz wrex wex
      f0 wn cio c1 chash wf1o ccom ccnv cdif cima wsbc cif csb reldmmpt2 ovprc1
      df-gsum fvprc syl5eq eqtr4d pm2.61i ) ALMZANOPZBQVTDENAUDRZAUERZNADSZESZW
      CPWEQWEWDWCPWEQTEWBUADWBUBZLLBWBUFCWCUFWFUFVTUCNLMVTUGUHNWFNUIVTWFUTUHUJV
      TVAZWANBANOFGLLHWDWEFSZUERZPWEQWEWDWIPWEQTEWHUDRZUADWJUBGSZUKHSZULWHUMRWK
      UNZUOUKMWMISZJSZUOPQWDWOWIWKWNUPRQTJWNUQRURIUSDVBVCWEVDRZUOPWEKSZVEWDWPWI
      WKWQVFVCUPRQTEWKVGLWLVHVIVJKUSDVBVKVKVLODEFGKIJHVOVMVNWGBAUMRNCAUMVPVQVRV
      S $.
      $( [7-Dec-2014] $)

    $( Value of a group sum over the zero element. $)
    gsumz $p |- ( ( G e. Mnd /\ A e. V ) ->
      ( G gsum ( k e. A |-> Z ) ) = Z ) $=
      ( vx vy cmnd wcel wa cbs cfv cplusg cmpt cv co wceq eqid c0g wral csn cvv
      crab simpl simpr fvex snid gsumvallem2 syl5eleqr ad2antrr fmptd gsumval1
      eqeltri ) CIJZADJZKZGHACLMZCNMZBAEOZCGPZHPZUSQVBRVBVAUSQVBRKHURUAGURUDZID
      EURSZFUSSZVCSZUOUPUEUOUPUFUQBAEVCUTUOEVCJUPBPAJUOEEUBVCEECTMUCFCTUGUNUHGH
      URUSCVCEVDFVEVFUIUJUKUTSULUM $.
      $( [7-Dec-2014] $)
  $}

  ${
    $d x y z B $.  $d f m n x y z G $.  $d m n z M $.  $d m n z N $.  $d x V $.
    $d f m n z F $.  $d f m n z O $.  $d m n x y z P $.  $d f m n z ph $.
    gsumval2.b $e |- B = ( Base ` G ) $.
    gsumval2.p $e |- P = ( +g ` G ) $.
    gsumval2.g $e |- ( ph -> G e. V ) $.
    gsumval2.n $e |- ( ph -> N e. ( ZZ>= ` M ) ) $.
    gsumval2.f $e |- ( ph -> F : ( M ... N ) --> B ) $.
    ${
      gsumval2a.o $e |- O = { x e. B |
        A. y e. B ( ( x P y ) = y /\ ( y P x ) = y ) } $.
      gsumval2a.f $e |- ( ph -> -. ran F C_ O ) $.
      $( Value of the group sum operation over a finite set of sequential
         integers. $)
      gsumval2a $p |- ( ph -> ( G gsum F ) = ( seq M ( P , F ) ` N ) ) $=
        ( cfz wceq vm vn vz vf cgsu co cv cseq cfv cuz wrex wex cio crn wss c0g
        wa wcel c1 ccnv cvv cdif cima chash wf1o ccom cif eqid ovex a1i gsumval
        eqidd wn iffalse syl cz eluzel2 eluzelz cxp wfn cpw wf fzf ax-mp fnovrn
        ffn mp3an1 syl2anc iftrue 3eqtrd wb wi vex fzopth sylancl simpl seqeq1d
        fvex simpr fveq12d eqcomd eqeq1 syl5ibrcom syl6bi imp3a rexlimdvw oveq2
        exlimdv adantr biantrurd fveq2 eqeq2d bitr3d rcla4ev sylan oveq1 seqeq1
        fveq1d anbi12d rexeqbidv cla4egv sylc ex impbid iota5 mpan2 eqtrd ) AGF
        UEUFZHISUFZUAUGZUBUGZSUFZTZUCUGZYKEFYJUHZUIZTZUQZUBYJUJUIZUKZUAULZUCUMZ
        IEFHUHZUIZAYHFUNJUOZGUPUIZYISUNURZUUBUSFUTVAJVBVCZVDUIZSUFUUHUDUGZVEYNU
        UIEFUUJVFUSUHUITUQUDULUCUMZVGZVGZUULUUBAUCCYIDEUDUAUBFGJKUUHVAUUFBLUUFV
        HMQAUUHVLNYIVAURAHISVIVJPVKAUUEVMUUMUULTRUUEUUFUULVNVOAUUGUULUUBTAHVPUR
        ZIVPURZUUGAIHUJUIZURZUUNOHIVQVOZAUUQUUOOHIVRVOSVPVPVSZVTZUUNUUOUUGUUSVP
        WAZSWBUUTWCUUSUVASWFWDVPVPHISWEWGWHUUGUUBUUKWIVOWJAUUDVAURZUUBUUDTIUUCW
        RAUUAUCUUDVAAUUAYNUUDTZWKUVBAUUAUVCAYTUVCUAAYRUVCUBYSAYMYQUVCAYMHYJTZIY
        KTZUQZYQUVCWLAUUQYKVAURYMUVFWKOUBWMVAYJYKHIWNWOUVFUVCYQYPUUDTUVFUUDYPUV
        FIYKUUCYOUVFHYJEFUVDUVEWPWQUVDUVEWSWTXAYNYPUUDXBXCXDXEXFXHAUVCUUAAUVCUQ
        UUNYIHYKSUFZTZYNYKUUCUIZTZUQZUBUUPUKZUUAAUUNUVCUURXIAUUQUVCUVLOUVKUVCUB
        IUUPYKITZUVJUVKUVCUVMUVHUVJUVMUVGYIYKIHSXGXAXJUVMUVIUUDYNYKIUUCXKXLXMXN
        XOYTUVLUAHVPYJHTZYRUVKUBYSUUPYJHUJXKUVNYMUVHYQUVJUVNYLUVGYIYJHYKSXPXLUV
        NYPUVIYNUVNYKYOUUCEFYJHXQXRXLXSXTYAYBYCYDXIYEYFYG $.
        $( [7-Dec-2014] $)
    $}

    $( Value of the group sum operation over a finite set of sequential
       integers. $)
    gsumval2 $p |- ( ph -> ( G gsum F ) = ( seq M ( P , F ) ` N ) ) $=
      ( vx vy co wceq wcel adantr c0 vz crn wral crab wss cgsu cseq cfv c0g cfz
      cv wa cvv eqid ovex a1i wfn wf ffn syl simpr df-f sylanbrc gsumval1 simpl
      wi ralimi ss2rabi csn fvex snid wne cdm fdm cuz eluzfz1 ne0i 3syl eqnetrd
      dm0rn0 necon3bii sylib ssn0 syl2anc df-ne gsumvallem1 sssn orcanai syldan
      wn wo syl5eleqr sseldi oveq1 ralbidv elrab oveq2 id eqeq12d rcla4va sylbi
      eqeq1d ad2antrr ffvelrn sylan sseldd seqid3 eqtr4d ex gsumval2a pm2.61d
      elsni ) ADUBZNUKZOUKZCPZXOQZXOXNCPXOQZULZOBUCZNBUDZUEZEDUFPZGCDFUGUHZQZAY
      BYEAYBULZYCEUIUHZYDYFNOFGUJPZBCDEYAHUMYGIYGUNZJYAUNZAEHRZYBKSYHUMRYFFGUJU
      OUPYFDYHUQZYBYHYADURZAYLYBAYHBDURZYLMYHBDUSUTSAYBVAZYHYADVBVCZVDYFUACDFGY
      GYFYGXQOBUCZNBUDZRZYGYGCPZYGQZYFYAYRYGXTYQNBXTYQVFXNBRXSXQOBXQXRVEVGUPVHY
      FYGYGVIZYAYGEUIVJVKAYBYATQZWJZYAUUBQZYFYATVLZUUDYFYBXMTVLZUUFYOAUUGYBADVM
      ZTVLUUGAUUHYHTAYNUUHYHQMYHBDVNUTAGFVOUHRZFYHRYHTVLLFGVPYHFVQVRVSUUHTXMTDV
      TWAWBSXMYAWCWDYATWEWBAUUCUUEAYAUUBUEZUUCUUEWKAYKUUJKNOBCEYAHYGIYIJYJWFUTZ
      YAYGWGWBWHWIWLWMYSYGBRYGXOCPZXOQZOBUCZULUUAYQUUNNYGBXNYGQZXQUUMOBUUOXPUUL
      XOXNYGXOCWNXBWOWPUUMUUAOYGBXOYGQZUULYTXOYGXOYGYGCWQUUPWRWSWTXAUTAUUIYBLSY
      FUAUKZYHRZULZUUQDUHZUUBRUUTYGQUUSYAUUBUUTAUUJYBUURUUKXCYFYMUURUUTYARYPYHY
      AUUQDXDXEXFUUTYGXLUTXGXHXIAYBWJZYEAUVAULNOBCDEFGYAHIJAYKUVAKSAUUIUVALSAYN
      UVAMSYJAUVAVAXJXIXK $.
      $( [7-Dec-2014] $)
  $}

  ${
    $d f g m n x y z G $.  $d f g k m n x y z ph $.  $d x V $.  $d g x y z Z $.
    $d f g k m n x y z A $.  $d f g k m n x y z B $.  $d f g k m n x y z F $.
    $d f g k m n x y z H $.  $d f g k m n x y z P $.  $d f g k m n x y z W $.
    $d f k m n x y z M $.
    gsumval3.b $e |- B = ( Base ` G ) $.
    gsumval3.z $e |- Z = ( 0g ` G ) $.
    gsumval3.p $e |- P = ( +g ` G ) $.
    gsumval3.g $e |- ( ph -> G e. CMnd ) $.
    gsumval3.a $e |- ( ph -> A e. V ) $.
    gsumval3.f $e |- ( ph -> F : A --> B ) $.
    ${
      gsumval3a.t $e |- ( ph -> W e. Fin ) $.
      gsumval3a.n $e |- ( ph -> W =/= (/) ) $.
      ${
        gsumval3a.w $e |- W = ( `' F " ( _V \ { Z } ) ) $.
        gsumval3a.i $e |- ( ph -> -. A e. ran ... ) $.
        $( Value of the group sum operation over an index set with finite
           support. $)
        gsumval3a $p |- ( ph -> ( G gsum F ) = ( iota x E. f
          ( f : ( 1 ... ( # ` W ) ) -1-1-onto-> W /\
            x = ( seq 1 ( P , ( F o. f ) ) ` ( # ` W ) ) ) ) ) $=
          ( vz vy vm vn cgsu co crn cv wceq wral crab wss cfz wcel cseq cfv cuz
          wa wrex wex cio chash wf1o ccom cif ccmn eqid ccnv cvv cdif cima cmnd
          c1 csn cmnmnd gsumvallem2 3syl difeq2d imaeq2d syl6reqr gsumval wn c0
          wne sseq2d wf cin wfn ffn syl simpr df-f sylanbrc disjdif fimacnvdisj
          adantr sylancl syl5eq ex sylbid necon3ad mpd iffalse 3eqtrd ) AHGUFUG
          GUHZUBUIZUCUIZEUGXHUJXHXGEUGXHUJUSUCDUKUBDULZUMZKCUNUHUOZCUDUIZUEUIZU
          NUGUJBUIZXMEGXLUPUQUJUSUEXLURUQUTUDVABVBZVNJVCUQZUNUGJFUIZVDXNXPEGXQV
          EVNUPUQUJUSFVABVBZVFZVFZXSXRABUCCDEFUDUEGHXIVGJIKUBLMNXIVHZAGVIZVJXIV
          KZVLYBVJKVOZVKZVLZJAYCYEYBAXIYDVJAHVGUOHVMUOXIYDUJOHVPUBUCDEHXIKLMNYA
          VQVRZVSVTTWAOPQWBAXJWCZXTXSUJAJWDWEYHSAXJJWDAXJXFYDUMZJWDUJZAXIYDXFYG
          WFAYIYJAYIUSZJYFWDTYKCYDGWGZYDYEWHWDUJYFWDUJYKGCWIZYIYLAYMYIACDGWGYMQ
          CDGWJWKWQAYIWLCYDGWMWNYDVJWOCYDYEGWPWRWSWTXAXBXCXJKXSXDWKAXKWCXSXRUJU
          AXKXOXRXDWKXE $.
          $( [7-Dec-2014] $)
      $}

      gsumval3a.s $e |- ( ph -> W C_ A ) $.
      $( The group sum as defined in ~ gsumval3a is uniquely defined.
         (Contributed by Mario Carneiro, 8-Dec-2014.) $)
      gsumval3eu $p |- ( ph -> E! x E. f
        ( f : ( 1 ... ( # ` W ) ) -1-1-onto-> W /\
          x = ( seq 1 ( P , ( F o. f ) ) ` ( # ` W ) ) ) ) $=
        ( vg vy vz vk c1 chash cfv cfz co cv wf1o ccom cseq wceq wa wex wal weu
        wi cn wcel c0 wn wne df-ne sylib cfn wo fz1f1o syl ord mpd simprd excom
        exancom fvex biidd ceqsexv bitri exbii sylibr an4 ccnv cmnd ccmn adantr
        eeanv cmnmnd mndcl 3expb sylan cmncom w3a mndass cuz simpld nnuz simprr
        syl6eleq f1ocnv simprl f1oco syl2anc wf wss f1of fss fco ffvelrn fveq2d
        fvco3 f1ocnvfv2 eqtr2d syldan 3eqtr4d seqf1o syl5ibrcom expimpd syl5bir
        eqeq12 exlimdvv alrimivv eqeq1 anbi2d exbidv f1oeq1 coeq2 fveq1d eqeq2d
        seqeq3d anbi12d cbvexv syl6bb eu4 sylanbrc ) AUEJUFUGZUHUIZJFUJZUKZBUJZ
        YPEGYRULZUEUMZUGZUNZUOZFUPZBUPZUUFYQJUAUJZUKZUBUJZYPEGUUHULZUEUMZUGZUNZ
        UOZUAUPZUOZYTUUJUNZUSZUBUQBUQUUFBURAYSFUPZUUGAYPUTVAZUUTAJVBUNZVCZUVAUU
        TUOZAJVBVDUVCSJVBVEVFAUVBUVDAJVGVAUVBUVDVHRJFVIVJVKVLZVMUUGUUEBUPZFUPUU
        TUUEBFVNUVFYSFUVFUUDYSUOBUPYSYSUUDBVOYSYSBUUCYPUUBVPUUDYSVQVRVSVTVSWAAU
        USBUBUUQUUEUUOUOZUAUPFUPAUURUUEUUOFUAWGAUVGUURFUAUVGYSUUIUOZUUDUUNUOZUO
        AUURYSUUIUUDUUNWBAUVHUVIUURAUVHUOZUURUVIUUCUUMUNUVJBUBUCEDUDUUHWCZYRULZ
        UUKUUAUEYPUVJHWDVAZYTDVAZUUJDVAZUOZYTUUJEUIZDVAZUVJHWEVAZUVMAUVSUVHOWFZ
        HWHVJZUVMUVNUVOUVRDEHYTUUJLNWIWJWKUVJUVSUVPUVQUUJYTEUIUNZUVTUVSUVNUVOUW
        BDEHYTUUJLNWLWJWKUVJUVMUVNUVOUCUJZDVAWMUVQUWCEUIYTUUJUWCEUIEUIUNUWADEHY
        TUUJUWCLNWNWKUVJYPUTUEWOUGAUVAUVHAUVAUUTUVEWPWFWQWSUVJJYQUVKUKZYSYQYQUV
        LUKZUVJUUIUWDAYSUUIWRZYQJUUHWTVJAYSUUIXAZYQJYQUVKYRXBXCZUVJYQDUUKXDZYTY
        QVAYTUUKUGDVAUVJCDGXDZYQCUUHXDZUWIAUWJUVHQWFUVJYQJUUHXDZJCXEZUWKUVJUUIU
        WLUWFYQJUUHXFVJAUWMUVHTWFYQJCUUHXGXCZYQCDGUUHXHXCYQDYTUUKXIWKUVJUDUJZYQ
        VAZUOZUWOYRUGZGUGZUWOUVLUGZUUHUGZGUGZUWOUUAUGZUWTUUKUGZUWQUWRUXAGUWQUXA
        UWRUVKUGZUUHUGZUWRUWQUWTUXEUUHUVJYQJYRXDZUWPUWTUXEUNUVJYSUXGUWGYQJYRXFV
        JZYQJUWOUVKYRXKWKXJUWQUUIUWRJVAZUXFUWRUNUVJUUIUWPUWFWFUVJUXGUWPUXIUXHYQ
        JUWOYRXIWKYQJUWRUUHXLXCXMXJUVJUXGUWPUXCUWSUNUXHYQJUWOGYRXKWKUVJUWPUWTYQ
        VAZUXDUXBUNZUVJYQYQUVLXDZUWPUXJUVJUWEUXLUWHYQYQUVLXFVJYQYQUWOUVLXIWKUVJ
        UWKUXJUXKUWNYQCUWTGUUHXKWKXNXOXPYTUUCUUJUUMXTXQXRXSYAXSYBUUFUUPBUBUURUU
        FYSUUJUUCUNZUOZFUPUUPUURUUEUXNFUURUUDUXMYSYTUUJUUCYCYDYEUXNUUOFUAYRUUHU
        NZYSUUIUXMUUNYQJYRUUHYFUXOUUCUUMUUJUXOYPUUBUULUXOUUAUUKEUEYRUUHGYGYJYHY
        IYKYLYMYNYO $.
        $( [8-Dec-2014] $)
    $}

    gsumval3.m $e |- ( ph -> M e. NN ) $.
    gsumval3.h $e |- ( ph -> H : ( 1 ... M ) -1-1-> A ) $.
    gsumval3.n $e |- ( ph -> ( `' F " ( _V \ { Z } ) ) C_ ran H ) $.
    gsumval3.w $e |- W = ( `' ( F o. H ) " ( _V \ { Z } ) ) $.
    $( Value of the group sum operation over an arbitrary finite set.
       (Contributed by Mario Carneiro, 15-Dec-2014.) $)
    gsumval3 $p |- ( ph ->
      ( G gsum F ) = ( seq 1 ( P , ( F o. H ) ) ` M ) ) $=
      ( vx vm vn vf vy vz vk vg cgsu co ccom c1 cseq cfv wceq c0 wa cmpt cv wfn
      wf ffn syl sylib adantr wcel crn ccnv cfz ad2antrr wf1o f1of 3syl ffvelrn
      f1ocnv sylan fvco3 syl2anc fveq2d eqtrd cdif simpr syl6eq fco cvv wss a1i
      cima suppssr syldan eqtr3d fvex sylibr adantlr wn eldif oveq2d mndlid cuz
      ccmn cn nnuz eleq2d biimpar eqtr4d wne wrex cxp vex cdm fdm eqeq1d syl5eq
      cz wb wbr w3a sylancr mpbid chash clt wiso wex wor cr fzssuz sstri syl6ss
      cfn frn ltso soss ee10 cen ssexg f1oen2g mpbird coass expr dffn5v csn wf1
      f1f1orn f1ocnvfv2 difeq2d dif0 eleqtrrd eqimss2i elsnc sylan2br pm2.61dan
      f1f anassrs mpteq2dva cmnmnd gsumz mndidcl syl6eleq seqid3 cpw fzf ovelrn
      cmnd mp2b wrel frel reldm0 bitrd co01 cnveqd cnv0 imaeq1d syl6bir necon3d
      coeq1 0ima imp eqnetrrd cle fzn0 eluz2 feq2d gsumval2 sseqtrd uzssz zssre
      fzfi fssxp xpexg mpbii fz1iso cn0 nnnn0 hashfz1 hashen mndcl 3expb cmncom
      enfi mndass simpll simprr isof1o f1oeq2 f1oco cres f1ococnv2 coeq1d fcoi2
      fss cid eqtr2d coeq2d syl6eqr fveq1d seqf1o mndrid eluzfz1 eqnetrd dm0rn0
      ne0i necon3bii adantrr simprl difeq1d seqcoll2 3eqtr4d exlimdv mpd syl5bi
      rexlimdvw cnvimass eqsstri syl5sseq sseqtr4i nnssre ssfi elpreima mpbiran
      ex cio con1d expimpd sylbid ssrdv cnvco imaeq1i imaco 3eqtri ima0 necon3i
      imaeq2 ad2antlr gsumval3a coexg sylancl f1ores imaeq2i wfo f1ofo foimacnv
      eqid f1oeq3 cores f1oeq1 resexg coeq2 seqeq3d eqeq2d anbi12d cla4egv sylc
      jca wal sstrd gsumval3eu iota1 bitr4d alrimiv eqeq1 anbi2d exbidv bibi12d
      weu eqeq2 cla4v simplr fveq1i syl5eqr pm2.61d pm2.61dane ) AFEUJUKZHDEGUL
      ZUMUNUOZUPZJUQAJUQUPZURZVWMKVWOVWRVWMFUBBKUSZUJUKZKVWREVWSFUJVWREUBBUBUTZ
      EUOZUSZVWSAEVXCUPZVWQAEBVAZVXDABCEVBZVXEQBCEVCZVDUBBEUUAVEVFVWRUBBVXBKVWR
      VXABVGZURZVXBKUUBZVGZVXBKUPZVXIVXAGVHZVGZVXKVWRVXNVXKVXHVWRVXNURZVXLVXKVX
      OVXAGVIZUOZVWNUOZVXBKVXOVXRVXQGUOZEUOZVXBVXOUMHVJUKZBGVBZVXQVYAVGZVXRVXTU
      PAVYBVWQVXNAVYABGUUCZVYBSVYABGUUMVDZVKVWRVXMVYAVXPVBZVXNVYCVWRVYAVXMGVLZV
      XMVYAVXPVLVYFAVYGVWQAVYDVYGSVYABGUUDZVDZVFZVYAVXMGVPVXMVYAVXPVMVNVXMVYAVX
      AVXPVOVQZVYABVXQEGVRVSVXOVXSVXAEVWRVYGVXNVXSVXAUPVYJVYAVXMVXAGUUEVQVTWAVW
      RVXNVXQVYAJWBZVGVXRKUPVXOVXQVYAVYLVYKVWRVYLVYAUPVXNVWRVYLVYAUQWBVYAVWRJUQ
      VYAAVWQWCUUFVYAUUGWDZVFUUHVWRVYACVWNJVXQKAVYACVWNVBZVWQAVXFVYBVYNQVYEVYAB
      CEGWEVSZVFZVWNVIZWFVXJWBZWIZJWGZVWRJVYSUAUUIZWHZWJWKWLVXBKVXAEWMZUUJZWNWO
      VWRVXHVXNWPZVXKAVXHWUEURZVXKVWQWUFAVXABVXMWBZVGZVXKVXABVXMWQAWUHURVXLVXKA
      BCEVXMVXAKQTWJZWUDWNUUKZWOUUNUULWUDVEUUOWAWRAVWTKUPZVWQAFUVDVGZBIVGZWUKAF
      XAVGZWULOFUUPVDZPBUBFIKMUUQVSVFWAVWRUBDVWNUMHKAKKDUKKUPZVWQAWULKCVGZWUPWU
      OAWULWUQWUOCFKLMUURZVDCDFKKLNMWSVSVFAHUMWTUOZVGZVWQAHXBWUSRXCUUSZVFVWRVXA
      VYAVGZVXAVYLVGZVXAVWNUOZKUPVWRWVCWVBVWRVYLVYAVXAVYMXDXEVWRVYACVWNJVXAKVYP
      WUBWJWKUUTXFAJUQXGZURZBVJVHVGZVWPWVGBUCUTZUDUTZVJUKZUPZUDXOXHZUCXOXHZWVFV
      WPXOXOXIZXOUVAZVJVBVJWVNVAWVGWVMXPUVBWVNWVOVJVCUCUDXOXOBVJUVCUVEWVFWVLVWP
      UCXOWVFWVKVWPUDXOWVFWVKVWPWVFWVKURZVWMWVIDEWVHUNUOZVWOWVPCDEFWVHWVIXALNAW
      UNWVEWVKOVKWVPWVIWFVGZWVJUQXGZWVIWVHWTUOZVGZUDXJZWVPBWVJUQWVFWVKWCZWVFBUQ
      XGZWVKAWVEWWDABUQJUQABUQUPZEUQUPZVWQAWWFEXKZUQUPZWWEAVXFEUVFWWFWWHXPQBCEU
      VGEUVHVNAWWGBUQAVXFWWGBUPQBCEXLVDXMUVIWWFJVYSUQUAWWFVYSUQVYRWIUQWWFVYQUQV
      YRWWFVYQUQVIUQWWFVWNUQWWFVWNUQGULUQEUQGUVPGUVJWDUVKUVLWDUVMVYRUVQWDXNUVNU
      VOUVRVFUVSWVRWVSURWVHXOVGWVIXOVGWVHWVIUVTXQXRWWAWFWVHWVIUWAWVHWVIUWBWNXSW
      VPVXFWVJCEVBAVXFWVEWVKQVKWVPBWVJCEWWCUWCXTUWDWVPUMVXMYAUOZVJUKZVXMYBYBUEU
      TZYCZUEYDZVWOWVQUPZWVPVXMYBYEZVXMYJVGZWWMWVPVXMYFWGYFYBYEZWWOWVPVXMWVJYFW
      VPVXMBWVJAVXMBWGZWVEWVKAVYBWWRVYEVYABGYKVDZVKWWCUWEZWVJWVTYFWVHWVIYGWVTXO
      YFWVHUWFUWGYHYHYIYLVXMYFYBYMYNAWWPWVEWVKAVYAYJVGZWWPUMHUWHZAVXMWFVGZVYAVX
      MYOXQZWXAWWPXPAWWRWUMWXCWWSPVXMBIYPVSAGWFVGZVYGWXDAGVYABXIZWGZWXFWFVGZWXE
      AVYBWXGVYEVYABGUWIVDAWXAWUMWXHWXBPVYABYJIUWJXSGWXFWFYPVSZVYIVYAVXMWFGYQVS
      ZVYAVXMWFUWTVSUWKZVKVXMYBUEUWLVSWVPWWLWWNUEWVFWVKWWLWWNWVFWVKWWLURZURZHDE
      WWKULZUMUNZUOWWIWXOUOVWOWVQWXMHWWIWXOAHWWIUPWVEWXLAVYAYAUOZHWWIAHXBVGZHUW
      MVGWXPHUPRHUWNHUWOVNAWXPWWIUPZWXDWXJAWXAWWPWXRWXDXPWXBWXKVYAVXMUWPXSYRWLV
      KZVTWXMUBUFUGDCUHWWKVIZGULZWXNVWNUMHWXMWULVXACVGZUFUTZCVGZURZVXAWYCDUKZCV
      GZAWULWVEWXLWUOVKZWULWYBWYDWYGCDFVXAWYCLNUWQUWRZVQZWXMWUNWYEWYFWYCVXADUKU
      PZAWUNWVEWXLOVKWUNWYBWYDWYKCDFVXAWYCLNUWSUWRVQWXMWULWYBWYDUGUTZCVGXRWYFWY
      LDUKVXAWYCWYLDUKDUKUPWYHCDFVXAWYCWYLLNUXAVQWXMAWUTAWVEWXLUXBZWVAVDWXMVXMV
      YAWXTVLZVYGVYAVYAWYAVLWXMVYAVXMWWKVLZWYNWXMWYOWWJVXMWWKVLZWXMWWLWYPWVFWVK
      WWLUXCZWWJVXMYBYBWWKUXDVDZWXMVYAWWJUPWYOWYPXPWXMHWWIUMVJWXSWRVYAWWJVXMWWK
      UXEVDYRZVYAVXMWWKVPVDZAVYGWVEWXLVYIVKZVYAVXMVYAWXTGUXFVSWXMVYACWXNVBZWVBV
      XAWXNUOCVGWXMVXFVYABWWKVBZXUBAVXFWVEWXLQVKZWXMVYAVXMWWKVBZWWRXUCWXMWYOXUE
      WYSVYAVXMWWKVMVDAWWRWVEWXLWWSVKVYAVXMBWWKUXKVSVYABCEWWKWEVSVYACVXAWXNVOVQ
      WXMUHUTZVYAVGZURXUFVWNUOZXUFWXNWYAULZUOZXUFWYAUOWXNUOZWXMXUHXUJUPXUGWXMXU
      FVWNXUIWXMVWNEWWKWYAULZULXUIWXMGXULEWXMGWWKWXTULZGULZXULWXMXUNUXLVXMUXGZG
      ULZGWXMXUMXUOGWXMWYOXUMXUOUPWYSVYAVXMWWKUXHVDUXIWXMVYAVXMGVBZXUPGUPWXMVYG
      XUQXUAVYAVXMGVMVDZVYAVXMGUXJVDUXMWWKWXTGYSWDUXNEWWKWYAYSUXOUXPVFWXMVYAVYA
      WYAVBZXUGXUJXUKUPWXMVXMVYAWXTVBZXUQXUSWXMWYNXUTWYTVXMVYAWXTVMVDXURVYAVXMV
      YAWXTGWEVSVYAVYAXUFWXNWYAVRVQWAUXQWXMVXMDCUBUFEWWKWXNWVHWVIWFKWXMWULWYBKV
      XADUKVXAUPZWYHCDFKVXALNMWSZVQWXMWULWYBVXAKDUKVXAUPZWYHCDFKVXALNMUXRZVQWYJ
      WXMWULWUQWYHWURVDWYQAVXMUQXGZWVEWXLAGXKZUQXGXVEAXVFVYAUQAVYBXVFVYAUPVYEVY
      ABGXLVDAWUTUMVYAVGVYAUQXGWVAUMHUXSVYAUMUYBVNUXTXVFUQVXMUQGUYAUYCVEVKWVRWX
      MWWBWHWVFWVKVXMWVJWGWWLWWTUYDWXMVXAWVJVGZVXHVXBCVGZWXMVXHXVGWXMBWVJVXAWVF
      WVKWWLUYEZXDXEWXMVXFVXHXVHXUDBCVXAEVOVQWKWXMVXAWVJVXMWBZVGZWUHVXLWXMWUHXV
      KWXMWUGXVJVXAWXMBWVJVXMXVIUYFXDXEWXMAWUHVXLWYMWUIVQWKWXMWWJVXMWWKVBZWYCWW
      JVGWYCWXNUOWYCWWKUOZEUOUPWXMWYPXVLWYRWWJVXMWWKVMVDWWJVXMWYCEWWKVRVQUYGUYH
      YTUYIUYJXFVUAUYLUYLUYKWVFWVGWPZVWPWVFXVNURZUMJYAUOZVJUKZJYBYBWWKYCZUEYDZV
      WPAXVSWVEXVNAJYBYEZJYJVGZXVSAJYFWGWWQXVTAJVYAYFAVWNXKZJVYAJVYSXWBUAVWNVYR
      UYMUYNAVYNXWBVYAUPVYOVYACVWNXLVDUYOZVYAXBYFVYAWUSXBUMHYGXCUYPUYQYHYIYLJYF
      YBYMYNAWXAJVYAWGZXWAWXBXWCVYAJUYRXSZJYBUEUWLVSVKXVOXVRVWPUEWVFXVNXVRVWPWV
      FXVNXVRURZURZUMEVIZVYRWIZYAUOZVJUKZXWIUIUTZVLZVXAXWJDEXWLULZUMUNZUOZUPZUR
      ZUIYDZUBVUBZXVPDEGWWKULZULZUMUNZUOZVWMVWOXWGVWMXWTXXDXWGUBBCDUIEFIXWIKLMN
      AWUNWVEXWFOVKZAWUMWVEXWFPVKZAVXFWVEXWFQVKZAXWIYJVGZWVEXWFAWWPXWIVXMWGZXXH
      WXKAUBXWIVXMAVXAXWIVGZVXHVXBVYRVGZURZVXNAVXFVXEXXJXXLXPQVXGBVXAVYREUYSVNA
      VXHXXKVXNXXKVXKWPZAVXHURZVXNXXKVXBWFVGXXMVXBWFVXJWQWUCUYTXXNVXNVXKAVXHWUE
      VXKWUJYTVUCUYKVUDVUEVUFZVXMXWIUYRVSVKZWVEXWIUQXGAXWFXWIUQJUQXWIUQUPZJVXPX
      WIWIZUQJVYSVXPXWHULZVYRWIXXRUAVYQXXSVYREGVUGVUHVXPXWHVYRVUIVUJZXXQXXRVXPU
      QWIUQXWIUQVXPVUMVXPVUKWDXNVULVUNZXWIVVCWVFXVNXVRUYEVUOZXWGXWMXXDXWPUPZURZ
      UIYDZVWMXXDUPZXWGXXAWFVGZXWKXWIXXAVLZXXDXWJXXCUOZUPZURZXYEAXYGWVEXWFAWXEW
      WKWFVGXYGWXIUEXJGWWKWFWFVUPVUQVKXWGXYHXYJXWGXVQXWIXXAVLZXYHXWGXVQXWIGJUXG
      ZWWKULZVLZXYLXWGJXWIXYMVLZXVQJWWKVLZXYOXWGJGJWIZXYMVLZXYPXWGVYDXWDXYSAVYD
      WVEXWFSVKZAXWDWVEXWFXWCVKZVYABJGVURVSXWGXYRXWIUPXYSXYPXPXWGXYRGXXRWIZXWIJ
      XXRGXXTVUSXWGVYAVXMGVUTZXXIYUBXWIUPXWGVYGYUCXWGVYDVYGXYTVYHVDVYAVXMGVVAVD
      AXXIWVEXWFXXOVKZVYAVXMXWIGVVBVSXNXYRXWIJXYMVVDVDXTZXWGXVRXYQWVFXVNXVRUXCZ
      XVQJYBYBWWKUXDZVDXVQJXWIXYMWWKUXFVSXWGXYNXXAUPZXYOXYLXPXWGWWKVHJWGZYUHXWG
      XVQJWWKVBZYUIXWGXVRXYQYUJYUFYUGXVQJWWKVMVNZXVQJWWKYKVDGWWKJVVEVDXVQXWIXYN
      XXAVVFVDXTXWGXVQXWKUPXYLXYHXPXWGXVPXWJUMVJXWGXVPXWJUPZJXWIYOXQZXWGXYMWFVG
      ZXYPYUMAYUNWVEXWFAWXEYUNWXIGJWFVVGVDVKYUEJXWIWFXYMYQVSXWGXWAXXHYULYUMXPAX
      WAWVEXWFXWEVKXXPJXWIUWPVSYRZWRXVQXWKXWIXXAUXEVDXTXWGXVPXWJXXCYUOVTVVNXYDX
      YKUIXXAWFXWLXXAUPZXWMXYHXYCXYJXWKXWIXWLXXAVVFYUPXWPXYIXXDYUPXWJXWOXXCYUPX
      WNXXBDUMXWLXXAEVVHVVIUXPVVJVVKVVLVVMXWGXWSVWMVXAUPZXPZUBVVOXYEXYFXPZXWGYU
      RUBXWGXWSXWTVXAUPZYUQXWGXWSUBVWEXWSYUTXPXWGUBBCDUIEFIXWIKLMNXXEXXFXXGXXPX
      YAXWGXWIVXMBYUDAWWRWVEXWFWWSVKVVPVVQXWSUBVVRVDXWGVWMXWTVXAXYBXMVVSVVTYURY
      USUBXXDXVPXXCWMVXAXXDUPZXWSXYEYUQXYFYVAXWRXYDUIYVAXWQXYCXWMVXAXXDXWPVWAVW
      BVWCVXAXXDVWMVWFVWDVWGVDXTWLXYBXWGJDCUBUFVWNWWKXXBUMHXBKXWGWULWYBXVAAWULW
      VEXWFWUOVKZXVBVQXWGWULWYBXVCYVBXVDVQXWGWULWYEWYGYVBWYIVQXWGWULWUQYVBWURVD
      YUFAWVEXWFVWHAWXQWVEXWFRVKYUAXWGVYNWVBWVDCVGAVYNWVEXWFVYOVKZVYACVXAVWNVOV
      QXWGVYACVWNJVXAKYVCVYTXWGWUAWHWJXWGWYCXVQVGZURWYCXXBUOWYCVWNWWKULZUOZXVMV
      WNUOZWYCYVEXXBEGWWKYSVWIXWGYUJYVDYVFYVGUPYUKXVQJWYCVWNWWKVRVQVWJUYGUYHYTU
      YIUYJVUAVWKVWL $.
      $( [15-Dec-2014] $)
  $}

  ${
    $d f k x B $.  $d f k x F $.  $d f k x G $.  $d f k x H $.  $d f k x ph $.
    $d k x A $.  $d x C $.  $d k V $.  $d f k W $.  $d f k x Z $.
    gsumcl.b $e |- B = ( Base ` G ) $.
    gsumcl.z $e |- Z = ( 0g ` G ) $.
    gsumcl.g $e |- ( ph -> G e. CMnd ) $.
    gsumcl.a $e |- ( ph -> A e. V ) $.
    gsumcl.f $e |- ( ph -> F : A --> B ) $.
    ${
      gsumcl.s $e |- ( ph -> ( `' F " ( _V \ { Z } ) ) C_ W ) $.
      $( Lemma for ~ gsumcl and related theorems.  (Contributed by Mario
         Carneiro, 15-Dec-2014.) $)
      gsumcllem $p |- ( ( ph /\ W = (/) ) -> F = ( k e. A |-> Z ) ) $=
        ( c0 wceq wa cmpt wcel cv cfv wfn wf ffn syl dffn5v sylib adantr difeq2
        cdif dif0 syl6eq eleq2d biimpar suppssr sylan2 anassrs mpteq2dva eqtrd
        ) AHPQZRZEDBDUAZEUBZSZDBISAEVEQZVAAEBUCZVFABCEUDVGNBCEUEUFDBEUGUHUIVBDB
        VDIAVAVCBTZVDIQZVAVHRAVCBHUKZTZVIVAVKVHVAVJBVCVAVJBPUKBHPBUJBULUMUNUOAB
        CEHVCINOUPUQURUSUT $.
        $( [15-Dec-2014] $)

      gsumres.w $e |- ( ph -> ( `' F " ( _V \ { Z } ) ) e. Fin ) $.
      $( Extend a finite group sum by padding outside with zeroes.
         (Contributed by Mario Carneiro, 15-Dec-2014.) $)
      gsumres $p |- ( ph -> ( G gsum ( F |` W ) ) = ( G gsum F ) ) $=
        ( vk wceq wcel adantr wss vf ccnv cvv csn cdif cima c0 chash cfv cn cfz
        c1 co cv wf1o wex wa cres cgsu cfn fz1f1o syl cin cmpt cmnd ccmn cmnmnd
        inex1g gsumz syl2anc eqtr4d resres wfn ffn fnresdm 3syl reseq1d syl5eqr
        wo wf ssid gsumcllem inss1 resmpt ax-mp syl6eq eqtr3d oveq2d 3eqtr4d ex
        a1i cplusg ccom cseq crn wfo f1ofo forn ad2antll eqsstrd seqeq3d fveq1d
        cores eqid fssres sylancl feq1d biimpa syldan simprl wf1 f1of1 cnvimass
        cdm fdm syl5sseq jca ssin sylib f1ss resss cnvss mp2b sseqtr4d gsumval3
        imass1 expr exlimdv expimpd jaod mpd ) ADUBZUCHUDUEZUFZUGQZYNUHUIZUJRZU
        LYPUKUMZYNUAUNZUOZUAUPZUQZVSZEDGURZUSUMZEDUSUMZQZAYNUTRUUCOYNUAVAVBAYOU
        UGUUBAYOUUGAYOUQZEPBGVCZHVDZUSUMZEPBHVDZUSUMZUUEUUFAUUKUUMQYOAUUKHUUMAE
        VERZUUIUCRZUUKHQAEVFRZUUNKEVGVBZABFRZUUOLBGFVHVBZUUIPEUCHJVIVJAUUNUURUU
        MHQUUQLBPEFHJVIVJVKSUUHUUDUUJEUSUUHDUUIURZUUDUUJAUUTUUDQYOAUUTDBURZGURU
        UDDBGVLAUVADGABCDVTZDBVMUVADQMBCDVNBDVOVPVQVRZSUUHUUTUULUUIURZUUJUUHDUU
        LUUIABCPDEFYNHIJKLMYNYNTZAYNWAZWKWBZVQUUIBTZUVDUUJQBGWCZPBUUIHWDWEWFWGW
        HUUHDUULEUSUVGWHWIWJAYQUUAUUGAYQUQYTUUGUAAYQYTUUGAYQYTUQZUQZYPEWLUIZUUD
        YSWMZULWNZUIYPUVLDYSWMZULWNZUIUUEUUFUVKYPUVNUVPUVKUVMUVOUVLULUVKYSWOZGT
        UVMUVOQUVKUVQYNGYTUVQYNQZAYQYTYRYNYSWPUVRYRYNYSWQYRYNYSWRVBWSZAYNGTZUVJ
        NSWTDYSGXCVBXAXBUVKUUICUVLUUDEYSYPUCUVMUBYMUFZHIJUVLXDZAUUPUVJKSZAUUOUV
        JUUSSAUVJUUICUUTVTZUUICUUDVTZUVKUVBUVHUWDAUVBUVJMSZUVIBCUUIDXEXFAUWDUWE
        AUUICUUTUUDUVCXGXHXIAYQYTXJZUVKYRYNYSXKZYNUUITZYRUUIYSXKYTUWHAYQYRYNYSX
        LWSZAUWIUVJAYNBTZUVTUQUWIAUWKUVTADXNZYNBDYMXMAUVBUWLBQMBCDXOVBXPZNXQYNB
        GXRXSSYRYNUUIYSXTVJUVKUUDUBZYMUFZYNUVQUWOYNTZUVKUUDDTUWNYLTUWPDGYAUUDDY
        BUWNYLYMYFYCWKUVSYDUWAXDYEUVKBCUVLDEYSYPFUVOUBYMUFZHIJUWBUWCAUURUVJLSUW
        FUWGUVKUWHUWKYRBYSXKUWJAUWKUVJUWMSYRYNBYSXTVJUVKYNYNUVQUVEUVKUVFWKUVSYD
        UWQXDYEWIYGYHYIYJYK $.
        $( [15-Dec-2014] $)
    $}

    gsumcl.w $e |- ( ph -> ( `' F " ( _V \ { Z } ) ) e. Fin ) $.
    $( Closure of a finite group sum.  (Contributed by Mario Carneiro,
       15-Dec-2014.) $)
    gsumcl $p |- ( ph -> ( G gsum F ) e. B ) $=
      ( vf vk cfv wcel wa syl adantr vx ccnv cvv csn cdif cima c0 wceq chash cn
      c1 cfz co cv wf1o wex wo cgsu cfn fz1f1o cmpt wss ssid a1i gsumcllem cmnd
      oveq2d ccmn cmnmnd gsumz syl2anc mndidcl eqeltrd ex cplusg ccom cseq eqid
      eqtrd wf simprl wf1 f1of1 ad2antll cdm cnvimass fdm syl5sseq f1ss crn wfo
      f1ofo forn syl5sseqr gsumval3 cuz nnuz syl6eleq f1f fco sylan mndcl 3expb
      ffvelrn seqcl expr exlimdv expimpd jaod mpd ) ADUBUCGUDUEZUFZUGUHZXLUIPZU
      JQZUKXNULUMZXLNUNZUOZNUPZRZUQZEDURUMZCQZAXLUSQYAMXLNUTSAXMYCXTAXMYCAXMRZY
      BGCYDYBEOBGVAZURUMZGYDDYEEURABCODEFXLGHIJKLXLXLVBAXLVCZVDVEVGAYFGUHZXMAEV
      FQZBFQZYHAEVHQZYIJEVIZSZKBOEFGIVJVKTVSAGCQZXMAYIYNYMCEGHIVLSTVMVNAXOXSYCA
      XORXRYCNAXOXRYCAXOXRRZRZYBXNEVOPZDXQVPZUKVQPCYPBCYQDEXQXNFYRUBXKUFZGHIYQV
      RZAYKYOJTZAYJYOKTABCDVTZYOLTZAXOXRWAZYPXPXLXQWBZXLBVBZXPBXQWBZXRUUEAXOXPX
      LXQWCWDAUUFYOADWEZXLBDXKWFAUUBUUHBUHLBCDWGSWHTXPXLBXQWIVKZYPXLXLXQWJZYGXR
      UUJXLUHZAXOXRXPXLXQWKUUKXPXLXQWLXPXLXQWMSWDWNYSVRWOYPOUAYQCYRUKXNYPXNUJUK
      WPPUUDWQWRYPXPCYRVTZOUNZXPQUUMYRPCQYPUUBXPBXQVTZUULUUCYPUUGUUNUUIXPBXQWSS
      XPBCDXQWTVKXPCUUMYRXDXAYPYIUUMCQZUAUNZCQZRUUMUUPYQUMCQZYPYKYIUUAYLSYIUUOU
      UQUURCYQEUUMUUPHYTXBXCXAXEVMXFXGXHXIXJ $.
      $( [15-Dec-2014] $)

    gsumf1o.h $e |- ( ph -> H : C -1-1-onto-> A ) $.
    $( Re-index a finite group sum using a bijection.  (Contributed by Mario
       Carneiro, 15-Dec-2014.) $)
    gsumf1o $p |- ( ph -> ( G gsum F ) = ( G gsum ( F o. H ) ) ) $=
      ( wceq ccom syl adantr vf vk vx ccnv cvv csn cdif cima c0 chash cfv cn c1
      wcel cfz co cv wf1o wex wa wo cgsu cfn fz1f1o cmpt cmnd ccmn cmnmnd gsumz
      syl2anc wf1 f1of1 f1dmex eqtr4d wss ssid gsumcllem oveq2d wf f1of ffvelrn
      a1i sylan wfn ffn dffn5v sylib eqidd fmptco 3eqtr4d cplusg cseq coass cid
      cres f1ococnv2 coeq1d ad2antll cdm cnvimass fdm syl5sseq f1ss fcoi2 eqtrd
      f1f syl5reqr coeq2d syl6eqr seqeq3d fveq1d eqid simprl crn wfo f1ofo forn
      ex syl5sseqr gsumval3 fco idi f1ocnv 3syl f1co imass2 cnvco imaeq1i imaco
      wi eqtri rnco2 3sstr4g expr exlimdv expimpd jaod mpd ) AEUDZUEIUFUGZUHZUI
      QZUUAUJUKZULUNZUMUUCUOUPZUUAUAUQZURZUAUSZUTZVAZFEVBUPZFEGRZVBUPZQZAUUAVCU
      NUUJOUUAUAVDSAUUBUUNUUIAUUBUUNAUUBUTZFUBBIVEZVBUPZFUCDIVEZVBUPZUUKUUMAUUQ
      UUSQUUBAUUQIUUSAFVFUNZBHUNZUUQIQAFVGUNZUUTLFVHSZMBUBFHIKVIVJAUUTDUEUNZUUS
      IQUVCADBGVKZUVAUVDADBGURZUVEPDBGVLSMDBHGVMVJZDUCFUEIKVIVJVNTUUOEUUPFVBABC
      UBEFHUUAIJKLMNUUAUUAVOAUUAVPZWBVQZVRUUOUULUURFVBUUOUCUBDBUCUQZGUKZIIGEUUO
      DBGVSZUVJDUNUVKBUNAUVLUUBAUVFUVLPDBGVTSZTZDBUVJGWAWCUUOGDWDZGUCDUVKVEQUUO
      UVLUVOUVNDBGWESUCDGWFWGUVIUBUQUVKQIWHWIVRWJXRAUUDUUHUUNAUUDUTUUGUUNUAAUUD
      UUGUUNAUUDUUGUTZUTZUUCFWKUKZEUUFRZUMWLZUKUUCUVRUULGUDZUUFRZRZUMWLZUKUUKUU
      MUVQUUCUVTUWDUVQUVSUWCUVRUMUVQUVSEGUWBRZRUWCUVQUUFUWEEUVQUWEGUWARZUUFRZUU
      FGUWAUUFWMUVQUWGWNBWOZUUFRZUUFUVQUWFUWHUUFUVQUVFUWFUWHQAUVFUVPPTDBGWPSWQU
      VQUUEBUUFVSZUWIUUFQUVQUUEBUUFVKZUWJUVQUUEUUAUUFVKZUUABVOZUWKUUGUWLAUUDUUE
      UUAUUFVLWRAUWMUVPAEWSZUUABEYTWTABCEVSZUWNBQNBCEXASXBTUUEUUABUUFXCVJZUUEBU
      UFXFSUUEBUUFXDSXEXGXHEGUWBWMXIXJXKUVQBCUVREFUUFUUCHUVSUDYTUHZIJKUVRXLZAUV
      BUVPLTZAUVAUVPMTAUWOUVPNTAUUDUUGXMZUWPUVQUUAUUAUUFXNZUVHUUGUXAUUAQZAUUDUU
      GUUEUUAUUFXOUXBUUEUUAUUFXPUUEUUAUUFXQSWRXSZUWQXLXTUVQDCUVRUULFUWBUUCUEUWC
      UDYTUHZIJKUWRUWSAUVDUVPUVGTADCUULVSZUVPAUWOUVLUXENUVMDBCEGYAVJTUVQUUDYJUW
      TYBUVQBDUWAVKZUWKUUEDUWBVKAUXFUVPAUVFBDUWAURUXFPDBGYCBDUWAVLYDTUWPUUEBDUW
      AUUFYEVJUVQUWAUUAUHZUWAUXAUHZUULUDZYTUHZUWBXNUVQUUAUXAVOUXGUXHVOUXCUUAUXA
      UWAYFSUXJUWAYSRZYTUHUXGUXIUXKYTEGYGYHUWAYSYTYIYKUWAUUFYLYMUXDXLXTWJYNYOYP
      YQYR $.
      $( [15-Dec-2014] $)
  $}

  ${
    gsumsubcl.z $e |- Z = ( 0g ` G ) $.
    gsumsubcl.g $e |- ( ph -> G e. Abel ) $.
    gsumsubcl.a $e |- ( ph -> A e. V ) $.
    gsumsubcl.s $e |- ( ph -> S e. ( SubGrp ` G ) ) $.
    gsumsubcl.f $e |- ( ph -> F : A --> S ) $.
    gsumsubcl.w $e |- ( ph -> ( `' F " ( _V \ { Z } ) ) e. Fin ) $.
    $( Closure of a group sum in a subgroup.  (Contributed by Mario Carneiro,
       15-Dec-2014.) $)
    gsumsubcl $p |- ( ph -> ( G gsum F ) e. S ) $=
      ( cgsu co eqid cfv wcel syl cvv cress gsumsubg cbs c0g cabel ccmn subgabl
      csubg syl2anc ablcmn wf wceq wb subgbas feq3 mpbid ccnv csn cdif cima cfn
      subg0 sneqd difeq2d imaeq2d eqeltrrd gsumcl eleqtrrd eqeltrd ) AEDNOECUAO
      ZDNOZCABCDEVJFJKLVJPZUBAVKVJUCQZCABVMDVJFVJUDQZVMPVNPAVJUERZVJUFRAEUERCEU
      HQRZVOIKCEVJVLUGUIVJUJSJABCDUKZBVMDUKZLACVMULZVQVRUMAVPVSKCEVJVLUNSZCVMBD
      UOSUPADUQZTGURZUSZUTWATVNURZUSZUTVAAWCWEWAAWBWDTAGVNAVPGVNULKCEVJGVLHVBSV
      CVDVEMVFVGVTVHVI $.
      $( [15-Dec-2014] $)
  $}

  ${
    $d f k x y z F $.  $d f k x y z H $.  $d f k x y z P $.  $d f k x y z ph $.
    $d x A $.  $d k x y z B $.  $d f x G $.  $d x V $.  $d f k x y z Z $.
    gsumadd.b $e |- B = ( Base ` G ) $.
    gsumadd.z $e |- Z = ( 0g ` G ) $.
    gsumadd.p $e |- P = ( +g ` G ) $.
    gsumadd.g $e |- ( ph -> G e. CMnd ) $.
    gsumadd.a $e |- ( ph -> A e. V ) $.
    gsumadd.f $e |- ( ph -> F : A --> B ) $.
    gsumadd.h $e |- ( ph -> H : A --> B ) $.
    gsumadd.fn $e |- ( ph -> ( `' F " ( _V \ { Z } ) ) e. Fin ) $.
    gsumadd.hn $e |- ( ph -> ( `' H " ( _V \ { Z } ) ) e. Fin ) $.
    $( The sum of two group sums.  (Contributed by Mario Carneiro,
       19-Dec-2014.) $)
    gsumadd $p |- ( ph ->
      ( G gsum ( F oF P H ) ) = ( ( G gsum F ) P ( G gsum H ) ) ) $=
      ( wcel co vf vx vy vz vk cun ccnv cvv csn cdif cima c0 wceq chash cfv cfz
      cn c1 cv wf1o wex wa wo cof cgsu cfn cnvun imaeq1i imaundir eqtri syl2anc
      unfi syl5eqel fz1f1o syl cmnd ccmn cmnmnd mndidcl mndlid adantr wss ssun1
      cmpt sseqtr4i gsumcllem oveq2d gsumz eqtrd ssun2 oveq12d ad2antrr offval2
      a1i mpteq2dv 3eqtr4rd ex ccom cseq mndcl 3expb sylan cmncom mndass simprl
      w3a cuz syl6eleq wf wf1 f1of1 ad2antll cdm cnvimass fdm syl5sseq syl5eqss
      nnuz unssd f1ss f1f fco ffvelrn wfn ffn ovex inidm ofco fnfco eqidd ofval
      fveq1d seqcaopr off crn eldifi syl5sseqr suppssr eqid gsumval3 sylan2 wfo
      f1ofo forn 3eqtrd suppss 3eqtr4d expr exlimdv expimpd jaod mpd ) AEGUFUGZ
      UHIUIUJZUKZULUMZUUOUNUOZUQSZURUUQUPTZUUOUAUSZUTZUAVAZVBZVCZFEGDVDZTZVETZF
      EVETZFGVETZDTZUMZAUUOVFSUVDAUUOEUGZUUNUKZGUGZUUNUKZUFZVFUUOUVLUVNUFZUUNUK
      UVPUUMUVQUUNEGVGVHUVLUVNUUNVIVJZAUVMVFSUVOVFSUVPVFSQRUVMUVOVLVKVMUUOUAVNV
      OAUUPUVKUVCAUUPUVKAUUPVBZIIDTZIUVJUVGAUVTIUMZUUPAFVPSZICSZUWAAFVQSZUWBMFV
      RVOZAUWBUWCUWECFIJKVSVOZCDFIIJLKVTVKZWAZUVSUVHIUVIIDUVSUVHFUBBIWDZVETZIUV
      SEUWIFVEABCUBEFHUUOIJKMNOUVMUUOWBAUVMUVPUUOUVMUVOWCUVRWEZWNWFZWGAUWJIUMZU
      UPAUWBBHSZUWMUWENBUBFHIKWHVKWAZWIUVSUVIUWJIUVSGUWIFVEABCUBGFHUUOIJKMNPUVO
      UUOWBAUVOUVPUUOUVOUVMWJUVRWEZWNWFZWGUWOWIWKUVSUVGUWJIUVSUVFUWIFVEUVSUVFUB
      BUVTWDUWIUVSUBBIIDEGHCCAUWNUUPNWAAUWCUUPUBUSZBSZUWFWLZUWTUWLUWQWMUVSUBBUV
      TIUWHWOWIWGUWOWIWPWQAUURUVBUVKAUURVBUVAUVKUAAUURUVAUVKAUURUVAVBZVBZUUQDUV
      FUUTWRZURWSUOUUQDEUUTWRZURWSUOZUUQDGUUTWRZURWSUOZDTUVGUVJUXBUBUCUDDCUEUXD
      UXFUXCURUUQUXBUWBUWRCSZUCUSZCSZVBZUWRUXIDTZCSZAUWBUXAUWEWAZUWBUXHUXJUXMCD
      FUWRUXIJLWTXAXBZUXBUWDUXKUXLUXIUWRDTUMZAUWDUXAMWAZUWDUXHUXJUXPCDFUWRUXIJL
      XCXAXBUXBUWBUXHUXJUDUSZCSXFUXLUXRDTUWRUXIUXRDTDTUMUXNCDFUWRUXIUXRJLXDXBUX
      BUUQUQURXGUOAUURUVAXEZXRXHUXBUUSCUXDXIZUEUSZUUSSZUYAUXDUOZCSUXBBCEXIZUUSB
      UUTXIZUXTAUYDUXAOWAZUXBUUSBUUTXJZUYEUXBUUSUUOUUTXJZUUOBWBZUYGUVAUYHAUURUU
      SUUOUUTXKXLAUYIUXAAUUOUVPBUVRAUVMUVOBAEXMZUVMBEUUNXNAUYDUYJBUMOBCEXOVOXPA
      GXMZUVOBGUUNXNABCGXIZUYKBUMPBCGXOVOXPXSXQWAUUSUUOBUUTXTVKZUUSBUUTYAVOZUUS
      BCEUUTYBVKUUSCUYAUXDYCXBUXBUUSCUXFXIZUYBUYAUXFUOZCSUXBUYLUYEUYOAUYLUXAPWA
      ZUYNUUSBCGUUTYBVKUUSCUYAUXFYCXBUXBUYBVBZUYAUXCUOZUYAUXDUXFUVETZUOZUYCUYPD
      TUXBUYSVUAUMUYBUXBUYAUXCUYTUXBBBBUUSDEGUUTHHUHUXBUYDEBYDZUYFBCEYEVOZUXBUY
      LGBYDZUYQBCGYEVOZUYNAUWNUXANWAZVUFUUSUHSUXBURUUQUPYFWNZBYGZYHYLWAUXBUUSUU
      SUYCUYPDUUSUXDUXFUHUHUYAUXBVUBUYEUXDUUSYDVUCUYNBUUSEUUTYIVKUXBVUDUYEUXFUU
      SYDVUEUYNBUUSGUUTYIVKVUGVUGUUSYGUYRUYCYJUYRUYPYJYKWIYMUXBBCDUVFFUUTUUQHUX
      CUGUUNUKZIJKLUXQVUFUXBUBUCBBBDCCCEGHHUXOUYFUYQVUFVUFVUHYNZUXSUYMUXBBCUBUV
      FUUTYOZIVUJUXBUWRBVUKUJSZVBZUWRUVFUOZUWREUOZUWRGUOZDTZUVTIVULUXBUWSVUNVUQ
      UMUWRBVUKYPUXBBBVUOVUPDBEGHHUWRVUCVUEVUFVUFVUHUXBUWSVBZVUOYJVURVUPYJYKUUA
      VUMVUOIVUPIDUXBBCEVUKUWRIUYFUXBUUOUVMVUKUWKUVAVUKUUOUMZAUURUVAUUSUUOUUTUU
      BVUSUUSUUOUUTUUCUUSUUOUUTUUDVOXLZYQZYRUXBBCGVUKUWRIUYQUXBUUOUVOVUKUWPVUTY
      QZYRWKAUWAUXAVULUWGWLUUEUUFVUIYSYTUXBUVHUXEUVIUXGDUXBBCDEFUUTUUQHUXDUGUUN
      UKZIJKLUXQVUFUYFUXSUYMVVAVVCYSYTUXBBCDGFUUTUUQHUXFUGUUNUKZIJKLUXQVUFUYQUX
      SUYMVVBVVDYSYTWKUUGUUHUUIUUJUUKUUL $.
      $( [19-Dec-2014] $)
  $}

  ${
    $d k A $.  $d k B $.  $d k C $.  $d k D $.  $d k F $.  $d k P $.  $d k Z $.
    $d k ph $.
    gsumsplit.b $e |- B = ( Base ` G ) $.
    gsumsplit.z $e |- Z = ( 0g ` G ) $.
    gsumsplit.p $e |- P = ( +g ` G ) $.
    gsumsplit.g $e |- ( ph -> G e. CMnd ) $.
    gsumsplit.a $e |- ( ph -> A e. V ) $.
    gsumsplit.f $e |- ( ph -> F : A --> B ) $.
    gsumsplit.w $e |- ( ph -> ( `' F " ( _V \ { Z } ) ) e. Fin ) $.
    gsumsplit.i $e |- ( ph -> ( C i^i D ) = (/) ) $.
    gsumsplit.u $e |- ( ph -> A = ( C u. D ) ) $.
    $( Split a group sum into two parts.  (Contributed by Mario Carneiro,
       19-Dec-2014.) $)
    gsumsplit $p |- ( ph -> ( G gsum F ) =
      ( ( G gsum ( F |` C ) ) P ( G gsum ( F |` D ) ) ) ) $=
      ( vk cv wcel cfv cif cmpt cof co cgsu cres wa wf ffvelrn cmnd ccmn cmnmnd
      sylan syl mndidcl adantr ifcl syl2anc eqid ccnv cvv csn cdif cima cfn wss
      fmptd ssid suppssr ifeq1d ifid syl6eq suppss2 ssfi gsumadd wo wceq eleq2d
      a1i cun elun syl6bb biimpa iftrue adantl wn wi cin noel eleq2 mtbiri elin
      sylnib imnan sylibr imp iffalse oveq12d mndrid syldan eqtrd mndlid jaodan
      con2d mpdan mpteq2dva eqidd offval2 wfn ffn dffn5v sylib 3eqtr4rd reseq1d
      c0 oveq2d syl5sseqr mpteq2ia resmpt 3eqtr4a eqtr4d eldifn gsumres 3eqtr4d
      ssun1 ssun2 ) AHTBTUAZDUBZYJGUCZJUDZUEZTBYJEUBZYLJUDZUEZFUFUGZUHUGHYNUHUG
      ZHYQUHUGZFUGHGUHUGHGDUIZUHUGZHGEUIZUHUGZFUGABCFYNHYQIJKLMNOATBYMCYNAYJBUB
      ZUJZYLCUBZJCUBZYMCUBABCGUKZUUEUUGPBCYJGULUPZAUUHUUEAHUMUBZUUHAHUNUBUUKNHU
      OUQZCHJKLURUQUSZYKYLJCUTVAZYNVBVJZATBYPCYQUUFUUGUUHYPCUBUUJUUMYOYLJCUTVAZ
      YQVBVJZAGVCVDJVEVFZVGZVHUBZYNVCUURVGZUUSVIUVAVHUBQABYMTUUSJAYJBUUSVFUBUJZ
      YMYKJJUDJUVBYKYLJJABCGUUSYJJPUUSUUSVIAUUSVKWBVLZVMYKJVNVOVPUUSUVAVQVAZAUU
      TYQVCUURVGZUUSVIUVEVHUBQABYPTUUSJUVBYPYOJJUDJUVBYOYLJJUVCVMYOJVNVOVPUUSUV
      EVQVAZVRAGYRHUHATBYMYPFUGZUETBYLUEZYRGATBUVGYLUUFYKYOVSZUVGYLVTZAUUEUVIAU
      UEYJDEWCZUBUVIABUVKYJSWAYJDEWDWEWFUUFYKUVJYOUUFYKUJZUVGYLJFUGZYLUVLYMYLYP
      JFYKYMYLVTUUFYKYLJWGZWHUVLYOWIZYPJVTZUUFYKUVOUUFYKYOUJZWIYKUVOWJUUFYJDEWK
      ZUBZUVQAUVSWIZUUEAUVRXRVTZUVTRUWAUVSYJXRUBYJWLUVRXRYJWMWNUQUSYJDEWOWPYKYO
      WQWRZWSYOYLJWTZUQXAUUFUVMYLVTZYKAUUEUUGUWDUUJAUUKUUGUWDUULCFHJYLKMLXBUPXC
      USXDUUFYOUJZUVGJYLFUGZYLUWEYMJYPYLFUWEYKWIZYMJVTZUUFYOUWGUUFYKYOUWBXGWSYK
      YLJWTZUQYOYPYLVTUUFYOYLJWGZWHXAUUFUWFYLVTZYOAUUEUUGUWKUUJAUUKUUGUWKUULCFH
      JYLKMLXEUPXCUSXDXFXHXIATBYMYPFYNYQICCOUUNUUPAYNXJAYQXJXKAGBXLZGUVHVTAUUIU
      WLPBCGXMUQTBGXNXOZXPXSAUUBYSUUDYTFAUUBHYNDUIZUHUGYSAUUAUWNHUHAUUAUVHDUIZU
      WNAGUVHDUWMXQADBVIZUWNUWOVTAUVKDBDEYHSXTUWPTDYMUETDYLUEUWNUWOTDYMYLUVNYAT
      BDYMYBTBDYLYBYCUQYDXSABCYNHIDJKLNOUUOABYMTDJAYJBDVFUBZUJUWGUWHUWQUWGAYJBD
      YEWHUWIUQVPUVDYFXDAUUDHYQEUIZUHUGYTAUUCUWRHUHAUUCUVHEUIZUWRAGUVHEUWMXQAEB
      VIZUWRUWSVTAUVKEBEDYISXTUWTTEYPUETEYLUEUWRUWSTEYPYLUWJYATBEYPYBTBEYLYBYCU
      QYDXSABCYQHIEJKLNOUUQABYPTEJAYJBEVFUBZUJUVOUVPUXAUVOAYJBEYEWHUWCUQVPUVFYF
      XDXAYG $.
      $( [19-Dec-2014] $)
  $}

  ${
    $d k A $.  $d k B $.  $d k C $.  $d k D $.  $d k ph $.
    gsumsplit2.b $e |- B = ( Base ` G ) $.
    gsumsplit2.z $e |- Z = ( 0g ` G ) $.
    gsumsplit2.p $e |- P = ( +g ` G ) $.
    gsumsplit2.g $e |- ( ph -> G e. CMnd ) $.
    gsumsplit2.a $e |- ( ph -> A e. V ) $.
    gsumsplit2.f $e |- ( ( ph /\ k e. A ) -> X e. B ) $.
    gsumsplit2.w $e |- ( ph ->
      ( `' ( k e. A |-> X ) " ( _V \ { Z } ) ) e. Fin ) $.
    gsumsplit2.i $e |- ( ph -> ( C i^i D ) = (/) ) $.
    gsumsplit2.u $e |- ( ph -> A = ( C u. D ) ) $.
    $( Split a group sum into two parts.  (Contributed by Mario Carneiro,
       19-Dec-2014.) $)
    gsumsplit2 $p |- ( ph -> ( G gsum ( k e. A |-> X ) ) =
      ( ( G gsum ( k e. C |-> X ) ) P ( G gsum ( k e. D |-> X ) ) ) ) $=
      ( cmpt cgsu cres eqid fmptd gsumsplit wss wceq cun ssun1 syl5sseqr resmpt
      co syl oveq2d ssun2 oveq12d eqtrd ) AHGBJUAZUBUMHUSDUCZUBUMZHUSEUCZUBUMZF
      UMHGDJUAZUBUMZHGEJUAZUBUMZFUMABCDEFUSHIKLMNOPAGBJCUSQUSUDUERSTUFAVAVEVCVG
      FAUTVDHUBADBUGUTVDUHADEUIZDBDEUJTUKGBDJULUNUOAVBVFHUBAEBUGVBVFUHAVHEBEDUP
      TUKGBEJULUNUOUQUR $.
      $( [19-Dec-2014] $)
  $}

  ${
    $d f k x A $.  $d f k x B $.  $d f k x G $.  $d f M $.  $d f k x X $.
    gsumconst.b $e |- B = ( Base ` G ) $.
    gsumconst.m $e |- M = ( .g ` G ) $.
    $( Sum of a constant series.  (Contributed by Mario Carneiro,
       19-Dec-2014.) $)
    gsumconst $p |- ( ( G e. CMnd /\ A e. Fin /\ X e. B ) ->
      ( G gsum ( k e. A |-> X ) ) = ( ( # ` A ) M X ) ) $=
      ( vf vx wcel c0 wceq cfv cn c1 co wa cmpt eqid ccmn cfn w3a chash cv wf1o
      cfz wex wo cgsu fz1f1o 3ad2ant2 c0g mpteq1 adantl syl6eq oveq2d gsum0 cc0
      mpt0 fveq2 hash0 oveq1d simpl3 mulg0 syl eqtrd eqtr4d ex cplusg ccom cseq
      csn cxp simprl nnuz syl6eleq simpr adantr fvmpt2 syl2anc wf f1of ad2antll
      cuz ffvelrn sylan wfn ffn dffn5v sylib eqidd fmptco fveq1d elfznn 3eqtr4d
      fvconst2g seqfveq ccnv cvv cdif cima simpl1 simpl2 fmptd wf1 crn cnvimass
      f1of1 cdm dmmptss sstri f1ofo forn syl5sseqr gsumval3 mulgnn expr exlimdv
      wfo expimpd jaod mpd ) DUAKZAUBKZFBKZUCZALMZAUDNZOKZPYIUGQZAIUEZUFZIUHZRZ
      UIZDCAFSZUJQZYIFEQZMZYEYDYPYFAIUKULYGYHYTYOYGYHYTYGYHRZYRDUMNZYSUUAYRDLUJ
      QUUBUUAYQLDUJUUAYQCLFSZLYHYQUUCMYGCALFUNUOCFUTUPUQDUUBUUBTZURUPUUAYSUSFEQ
      ZUUBUUAYIUSFEUUAYILUDNZUSYHYIUUFMYGALUDVAUOVBUPVCUUAYFUUEUUBMYDYEYFYHVDBE
      DUUBFGUUDHVEVFVGVHVIYGYJYNYTYGYJRYMYTIYGYJYMYTYGYJYMRZRZYIDVJNZYQYLVKZPVL
      NYIUUIOFVMVNZPVLZNZYRYSUUHUUIJUUJUUKPYIUUHYIOPWENYGYJYMVOZVPVQUUHJUEZYKKZ
      RZUUOJYKFSZNZFUUOUUJNZUUOUUKNZUUQUUPYFUUSFMUUHUUPVRUUHYFUUPYDYEYFUUGVDZVS
      ZJYKFBUURUURTVTWAUUHUUTUUSMUUPUUHUUOUUJUURUUHJCYKAUUOYLNZFFYLYQUUHYKAYLWB
      ZUUPUVDAKYMUVEYGYJYKAYLWCWDZYKAUUOYLWFWGUUHYLYKWHZYLJYKUVDSMUUHUVEUVGUVFY
      KAYLWIVFJYKYLWJWKUUHYQWLCUEZUVDMFWLWMWNVSUUQYFUUOOKZUVAFMUVCUUPUVIUUHUUOY
      IWOUOOFUUOBWQWAWPWRUUHABUUIYQDYLYIUBUUJWSWTUUBVMXAZXBZUUBGUUDUUITZYDYEYFU
      UGXCYDYEYFUUGXDUUHCAFBYQUUHYFUVHAKUVBVSYQTZXEUUNYMYKAYLXFYGYJYKAYLXIWDUUH
      AYQWSUVJXBZYLXGZUVNYQXJAYQUVJXHCAFYQUVMXKXLYMUVOAMZYGYJYMYKAYLXTUVPYKAYLX
      MYKAYLXNVFWDXOUVKTXPUUHYJYFYSUUMMUUNUVBBUUIUULEDYIFGUVLHUULTXQWAWPXRXSYAY
      BYC $.
      $( [19-Dec-2014] $)
  $}

  ${
    $d k A $.  $d f k G $.  $d f k H $.  $d x O $.  $d f k x y ph $.  $d k V $.
    $d f k x y F $.  $d f k x y K $.  $d x y P $.  $d x y Q $.  $d f k x y Z $.
    $d k x y B $.
    gsumhomo.b $e |- B = ( Base ` G ) $.
    gsumhomo.c $e |- C = ( Base ` H ) $.
    gsumhomo.z $e |- Z = ( 0g ` G ) $.
    gsumhomo.o $e |- O = ( 0g ` H ) $.
    gsumhomo.p $e |- P = ( +g ` G ) $.
    gsumhomo.q $e |- Q = ( +g ` H ) $.
    gsumhomo.g $e |- ( ph -> G e. CMnd ) $.
    gsumhomo.h $e |- ( ph -> H e. CMnd ) $.
    gsumhomo.a $e |- ( ph -> A e. V ) $.
    gsumhomo.k $e |- ( ph -> K : B --> C ) $.
    gsumhomo.e $e |- ( ph -> ( K ` Z ) = O ) $.
    gsumhomo.d $e |- ( ( ph /\ ( x e. B /\ y e. B ) ) ->
      ( K ` ( x P y ) ) = ( ( K ` x ) Q ( K ` y ) ) ) $.
    gsumhomo.f $e |- ( ph -> F : A --> B ) $.
    gsumhomo.w $e |- ( ph -> ( `' F " ( _V \ { Z } ) ) e. Fin ) $.
    $( Apply a group homomorphism to a group sum.  (Contributed by Mario
       Carneiro, 15-Dec-2014.) $)
    gsumhomo $p |- ( ph -> ( H gsum ( K o. F ) ) =
                           ( K ` ( G gsum F ) ) ) $=
      ( vf vk ccnv cvv csn cdif cima c0 wceq chash cfv cn wcel c1 cfz co cv wex
      wf1o wa wo ccom cgsu cfn fz1f1o syl cmpt cmnd cmnmnd gsumz syl2anc adantr
      ccmn eqtr4d mndidcl ad2antrr wss ssid a1i gsumcllem wf dffn5v sylib fveq2
      wfn fmptco mpteq2dv eqtrd oveq2d fveq2d 3eqtr4d ex cseq mndcl 3expb sylan
      ffn wf1 f1of1 ad2antll cdm cnvimass fdm syl5sseq f1ss f1f fco ffvelrn cuz
      simprl nnuz syl6eleq adantlr coass fveq1i fvco3 syl5req seqhomo crn f1ofo
      forn sseqtr4d eqid gsumval3 eldifi sylan2 suppssr 3eqtrd suppss 3eqtr4rd
      wfo expr exlimdv expimpd jaod mpd ) AIULUMOUNUOZUPZUQURZUUGUSUTZVAVBZVCUU
      IVDVEZUUGUJVFZVHZUJVGZVIZVJZKLIVKZVLVEZJIVLVEZLUTZURZAUUGVMVBUUPUIUUGUJVN
      VOAUUHUVAUUOAUUHUVAAUUHVIZKUKDMVPZVLVEZOLUTZUURUUTUVBUVDMUVEAUVDMURZUUHAK
      VQVBZDNVBZUVFAKWBVBZUVGUCKVRVOUDDUKKNMSVSVTWAAUVEMURZUUHUFWAWCUVBUUQUVCKV
      LUVBUUQUKDUVEVPZUVCUVBUKBDEOBVFZLUTZUVEILAOEVBZUUHUKVFDVBAJVQVBZUVNAJWBVB
      ZUVOUBJVRVOZEJOPRWDVOWEADEUKIJNUUGOPRUBUDUHUUGUUGWFZAUUGWGZWHWIZALBEUVMVP
      URZUUHALEWNZUWAAEFLWJZUWBUEEFLXFVOBELWKWLWAUVLOLWMWOAUVKUVCURUUHAUKDUVEMU
      FWPWAWQWRUVBUUSOLUVBUUSJUKDOVPZVLVEZOUVBIUWDJVLUVTWRAUWEOURZUUHAUVOUVHUWF
      UVQUDDUKJNORVSVTWAWQWSWTXAAUUJUUNUVAAUUJVIUUMUVAUJAUUJUUMUVAAUUJUUMVIZVIZ
      UUIGIUULVKZVCXBUTZLUTUUIHUUQUULVKZVCXBUTUUTUURUWHBCGHEUWIUWKLVCUUIUWHUVOU
      VLEVBZCVFZEVBZVIZUVLUWMGVEZEVBZAUVOUWGUVQWAUVOUWLUWNUWQEGJUVLUWMPTXCXDXEU
      WHUUKEUWIWJZUVLUUKVBZUVLUWIUTZEVBUWHDEIWJZUUKDUULWJZUWRAUXAUWGUHWAZUWHUUK
      DUULXGZUXBUWHUUKUUGUULXGZUUGDWFUXDUUMUXEAUUJUUKUUGUULXHXIUWHIXJZUUGDIUUFX
      KUWHUXAUXFDURUXCDEIXLVOXMUUKUUGDUULXNVTZUUKDUULXOVOUUKDEIUULXPVTZUUKEUVLU
      WIXQXEUWHUUIVAVCXRUTAUUJUUMXSZXTYAAUWOUWPLUTUVMUWMLUTHVEURUWGUGYBUWHUWSVI
      UVLUWKUTUVLLUWIVKZUTZUWTLUTZUVLUWKUXJLIUULYCYDUWHUWRUWSUXKUXLURUXHUUKEUVL
      LUWIYEXEYFYGUWHUUSUWJLUWHDEGIJUULUUINUWIULUUFUPZOPRTAUVPUWGUBWAAUVHUWGUDW
      AZUXCUXIUXGUWHUUGUUGUULYHZUVRUWHUVSWHZUUMUXOUUGURZAUUJUUMUUKUUGUULYTUXQUU
      KUUGUULYIUUKUUGUULYJVOXIZYKUXMYLYMWSUWHDFHUUQKUULUUINUWKULUMMUNUOZUPZMQSU
      AAUVIUWGUCWAUXNUWHUWCUXADFUUQWJAUWCUWGUEWAUXCDEFLIXPVTZUXIUXGUWHUUQULUXSU
      PUUGUXOUWHDFBUUQUUGMUYAUWHUVLDUUGUOVBZVIZUVLUUQUTZUVLIUTZLUTZUVEMUYBUWHUV
      LDVBZUYDUYFURZUVLDUUGYNUWHUXAUYGUYHUXCDEUVLLIYEXEYOUYCUYEOLUWHDEIUUGUVLOU
      XCUXPYPWSAUVJUWGUYBUFWEYQYRUXRYKUXTYLYMYSUUAUUBUUCUUDUUE $.
      $( [15-Dec-2014] $)
  $}

  ${
    $d k x y z A $.  $d k x y z B $.  $d k x y z N $.  $d k x y z ph $.
    $d x y z G $.  $d k x y z T $.  $d x y z X $.  $d x y z Z $.
    gsummulg.b $e |- B = ( Base ` G ) $.
    gsummulg.z $e |- Z = ( 0g ` G ) $.
    gsummulg.t $e |- T = ( .g ` G ) $.
    gsummulg.a $e |- ( ph -> A e. V ) $.
    gsummulg.f $e |- ( ( ph /\ k e. A ) -> X e. B ) $.
    gsummulg.w $e |- ( ph ->
      ( `' ( k e. A |-> X ) " ( _V \ { Z } ) ) e. Fin ) $.
    ${
      gsummulglem.g $e |- ( ph -> G e. CMnd ) $.
      gsummulglem.n $e |- ( ph -> N e. ZZ ) $.
      gsummulglem.o $e |- ( ph -> ( G e. Abel \/ N e. NN0 ) ) $.
      $( Lemma for ~ gsummulg and ~ gsumzmulg . $)
      gsummulglem $p |- ( ph -> ( G gsum ( k e. A |-> ( N T X ) ) ) =
                             ( N T ( G gsum ( k e. A |-> X ) ) ) ) $=
        ( co vx vy vz cv cmpt ccom cgsu cfv cplusg eqid wcel wa cabel wo adantr
        cn0 cgrp ablgrp adantl ad2antrr simplr mulgcl syl3anc cmnd cmnmnd simpr
        cz ccmn syl mulgnn0cl jaodan mpdan fmptd wceq mndidcl oveq2 fvmpt mulgz
        ovex syl2anr mulgnn0z sylan eqtrd simplrl simplrr mulgdi syl13anc mndcl
        mulgnn0di 3expb oveqan12d 3eqtr4d gsumhomo fmptco oveq2d gsumcl 3eqtr3d
        eqidd ) AFUACGUAUDZDTZUEZEBIUEZUFZUGTFXBUGTZXAUHZFEBGIDTZUEZUGTGXDDTZAU
        BUCBCCFUIUHZXIXBFFXAJHJKKLLXIUJZXJQQNAUACWTCXAAWSCUKZULZFUMUKZGUPUKZUNZ
        WTCUKZAXOXKSUOXLXMXPXNXLXMULFUQUKZGVGUKZXKXPXMXQXLFURZUSAXRXKXMRUTAXKXM
        VACDFGWSKMVBVCXLXNULFVDUKZXNXKXPAXTXKXNAFVHUKZXTQFVEVIZUTXLXNVFAXKXNVAC
        DFGWSKMVJVCVKVLXAUJZVMAJXAUHZGJDTZJAJCUKZYDYEVNAXTYFYBCFJKLVOVIUAJWTYEC
        XAWSJGDVPYCGJDVSVQVIAXOYEJVNZSAXMYGXNXMXQXRYGAXSRCDFGJKMLVRVTAXTXNYGYBC
        DFGJKMLWAWBVKVLWCAUBUDZCUKZUCUDZCUKZULZULZGYHYJXITZDTZGYHDTZGYJDTZXITZY
        NXAUHZYHXAUHZYJXAUHZXITZYMXOYOYRVNZAXOYLSUOYMXMUUCXNYMXMULXMXRYIYKUUCYM
        XMVFAXRYLXMRUTAYIYKXMWDAYIYKXMWECXIDFGYHYJKMXJWFWGYMXNULYAXNYIYKUUCAYAY
        LXNQUTYMXNVFAYIYKXNWDAYIYKXNWECXIDFGYHYJKMXJWIWGVKVLYMYNCUKZYSYOVNAXTYL
        UUDYBXTYIYKUUDCXIFYHYJKXJWHWJWBUAYNWTYOCXAWSYNGDVPYCGYNDVSVQVIYLUUBYRVN
        AYIYKYTYPUUAYQXIUAYHWTYPCXAWSYHGDVPYCGYHDVSVQUAYJWTYQCXAWSYJGDVPYCGYJDV
        SVQWKUSWLAEBICXBOXBUJVMZPWMAXCXGFUGAEUABCIWTXFXBXAOAXBWRAXAWRWSIGDVPWNW
        OAXDCUKXEXHVNABCXBFHJKLQNUUEPWPUAXDWTXHCXAWSXDGDVPYCGXDDVSVQVIWQ $.
        $( [7-Jan-2015] $)
    $}

    ${
      gsummulg.g $e |- ( ph -> G e. CMnd ) $.
      gsummulg.n $e |- ( ph -> N e. NN0 ) $.
      $( Nonnegative multiple of a group sum.  (Contributed by Mario Carneiro,
         15-Dec-2014.) $)
      gsummulg $p |- ( ph -> ( G gsum ( k e. A |-> ( N T X ) ) ) =
                             ( N T ( G gsum ( k e. A |-> X ) ) ) ) $=
        ( cn0 wcel cz nn0z syl cabel olcd gsummulglem ) ABCDEFGHIJKLMNOPQAGSTZG
        UATRGUBUCAUGFUDTRUEUF $.
        $( [7-Jan-2015] $) $( [15-Dec-2014] $)
    $}

    ${
      gsumzmulg.g $e |- ( ph -> G e. Abel ) $.
      gsumzmulg.n $e |- ( ph -> N e. ZZ ) $.
      $( Integer multiple of a group sum.  (Contributed by Mario Carneiro,
         15-Dec-2014.) $)
      gsumzmulg $p |- ( ph -> ( G gsum ( k e. A |-> ( N T X ) ) ) =
                             ( N T ( G gsum ( k e. A |-> X ) ) ) ) $=
        ( cabel wcel ccmn ablcmn syl cn0 orcd gsummulglem ) ABCDEFGHIJKLMNOPAFS
        TZFUATQFUBUCRAUGGUDTQUEUF $.
        $( [7-Jan-2015] $)
    $}
  $}

  ${
    $d x y B $.  $d x y F $.  $d x y G $.  $d x y I $.  $d x y ph $.
    $d x y Z $.
    gsuminv.b $e |- B = ( Base ` G ) $.
    gsuminv.z $e |- Z = ( 0g ` G ) $.
    gsuminv.p $e |- I = ( invg ` G ) $.
    gsuminv.g $e |- ( ph -> G e. Abel ) $.
    gsuminv.a $e |- ( ph -> A e. V ) $.
    gsuminv.f $e |- ( ph -> F : A --> B ) $.
    gsuminv.n $e |- ( ph -> ( `' F " ( _V \ { Z } ) ) e. Fin ) $.
    $( Inverse of a group sum.  (Contributed by Mario Carneiro,
       15-Dec-2014.) $)
    gsuminv $p |- ( ph -> ( G gsum ( I o. F ) ) = ( I ` ( G gsum F ) ) ) $=
      ( vx vy cfv wcel syl cplusg eqid cabel ccmn ablcmn wf1o wf cgrp grpinvf1o
      ablgrp f1of wceq grpinvid 3syl cv wa co ablinvadd 3expb sylan gsumhomo )
      APQBCCEUARZVBDEEFHGHIIJJVBUBZVCAEUCSZEUDSLEUETZVEMACCFUFCCFUGACEFIKAVDEUH
      SZLEUJZTUICCFUKTAVDVFHFRHULLVGEFHJKUMUNAVDPUOZCSZQUOZCSZUPVHVJVBUQFRVHFRV
      JFRVBUQULZLVDVIVKVLCVBEFVHVJIVCKURUSUTNOVA $.
      $( [15-Dec-2014] $)
  $}

  ${
    $d k A $.  $d k x B $.  $d k F $.  $d k x G $.  $d k x H $.  $d k ph $.
    $d k M $.  $d k Z $.
    gsumsub.b $e |- B = ( Base ` G ) $.
    gsumsub.z $e |- Z = ( 0g ` G ) $.
    gsumsub.m $e |- M = ( -g ` G ) $.
    gsumsub.g $e |- ( ph -> G e. Abel ) $.
    gsumsub.a $e |- ( ph -> A e. V ) $.
    gsumsub.f $e |- ( ph -> F : A --> B ) $.
    gsumsub.h $e |- ( ph -> H : A --> B ) $.
    gsumsub.fn $e |- ( ph -> ( `' F " ( _V \ { Z } ) ) e. Fin ) $.
    gsumsub.hn $e |- ( ph -> ( `' H " ( _V \ { Z } ) ) e. Fin ) $.
    $( The difference of two group sums.  (Contributed by Mario Carneiro,
       28-Dec-2014.) $)
    gsumsub $p |- ( ph ->
      ( G gsum ( F oF M H ) ) = ( ( G gsum F ) M ( G gsum H ) ) ) $=
      ( vk co vx cminusg cfv ccom cplusg cof cgsu eqid cabel wcel ablcmn syl wf
      ccmn wf1o cgrp ablgrp id grpinvf1o f1of fco syl2anc ccnv cvv csn cdif cfn
      cima wss cv wa wceq eldifi syl2an ssid a1i suppssr fveq2d grpinvid adantr
      fvco3 3eqtrd suppss ssfi gsumadd gsuminv oveq2d eqtrd grpsubval mpteq2dva
      cmpt ffvelrn sylan wfn ffn dffn5v sylib offval2 fvex f1ofn fmptco 3eqtr4d
      fveq2 gsumcl ) AEDEUBUCZFUDZEUEUCZUFTZUGTZEDUGTZEFUGTZXEUCZXGTZEDFGUFTZUG
      TXJXKGTZAXIXJEXFUGTZXGTXMABCXGDEXFHIJKXGUHZAEUIUJZEUNUJMEUKULZNOACCXEUMZB
      CFUMZBCXFUMACCXEUOZXTAEUPUJZYBAXRYCMEUQULZYCCEXEJXEUHZYCURUSULZCCXEUTULPB
      CCXEFVAVBZQAFVCVDIVEVFZVHZVGUJXFVCYHVHZYIVIYJVGUJRABCSXFYIIYGASVJZBYIVFUJ
      ZVKZYKXFUCZYKFUCZXEUCZIXEUCZIAYAYKBUJZYNYPVLYLPYKBYIVMBCYKXEFWAVNYMYOIXEA
      BCFYIYKIPYIYIVIAYIVOVPVQVRAYQIVLZYLAYCYSYDEXEIKYEVSULVTWBWCYIYJWDVBWEAXPX
      LXJXGABCFEXEHIJKYEMNPRWFWGWHAXNXHEUGASBYKDUCZYOGTZWKSBYTYPXGTZWKXNXHASBUU
      AUUBAYRVKZYTCUJZYOCUJZUUAUUBVLABCDUMZYRUUDOBCYKDWLWMZAYAYRUUEPBCYKFWLWMZC
      XGEXEGYTYOJXQYELWIVBWJASBYTYOGDFHCCNUUGUUHADBWNZDSBYTWKVLAUUFUUIOBCDWOULS
      BDWPWQZAFBWNZFSBYOWKVLAYAUUKPBCFWOULSBFWPWQZWRASBYTYPXGDXFHCVDNUUGYPVDUJU
      UCYOXEWSVPUUJASUABCYOUAVJZXEUCZYPFXEUUHUULAXECWNZXEUACUUNWKVLAYBUUOYFCCXE
      WTULUACXEWPWQUUMYOXEXCXAWRXBWGAXJCUJXKCUJXOXMVLABCDEHIJKXSNOQXDABCFEHIJKX
      SNPRXDCXGEXEGXJXKJXQYELWIVBXB $.
      $( [28-Dec-2014] $)
  $}

  ${
    $d k B $.  $d k C $.  $d k G $.  $d k M $.
    gsumsn.b $e |- B = ( Base ` G ) $.
    gsumsn.s $e |- ( k = M -> A = C ) $.
    $( Group sum of a singleton.  (Contributed by Mario Carneiro,
       19-Dec-2014.) $)
    gsumsn $p |- ( ( G e. CMnd /\ M e. V /\ C e. B ) ->
      ( G gsum ( k e. { M } |-> A ) ) = C ) $=
      ( ccmn wcel w3a csn cmpt cgsu co chash cfv c1 wceq cmg elsni syl mpteq2ia
      cv oveq2i cfn snfi gsumconst mp3an2 3adant2 syl5eq hashsng 3ad2ant2 mulg1
      eqid oveq1d 3ad2ant3 3eqtrd ) EJKZFGKZCBKZLZEDFMZANZOPZVDQRZCEUARZPZSCVHP
      ZCVCVFEDVDCNZOPZVIVEVKEODVDACDUEZVDKVMFTACTVMFUBIUCUDUFUTVBVLVITZVAUTVDUG
      KVBVNFUHVDBDEVHCHVHUPZUIUJUKULVCVGSCVHVAUTVGSTVBFGUMUNUQVBUTVJCTVABVHECHV
      OUOURUS $.
      $( [19-Dec-2014] $)
  $}

  ${
    $d k A $.  $d k B $.  $d k G $.  $d k M $.  $d k ph $.  $d k Y $.
    gsumunsn.b $e |- B = ( Base ` G ) $.
    gsumunsn.p $e |- P = ( +g ` G ) $.
    gsumunsn.g $e |- ( ph -> G e. CMnd ) $.
    gsumunsn.a $e |- ( ph -> A e. Fin ) $.
    gsumunsn.f $e |- ( ( ph /\ k e. A ) -> X e. B ) $.
    gsumunsn.m $e |- ( ph -> M e. V ) $.
    gsumunsn.d $e |- ( ph -> -. M e. A ) $.
    gsumunsn.y $e |- ( ph -> Y e. B ) $.
    gsumunsn.s $e |- ( k = M -> X = Y ) $.
    $( Append an element to a finite group sum.  (Contributed by Mario
       Carneiro, 19-Dec-2014.) $)
    gsumunsn $p |- ( ph -> ( G gsum ( k e. ( A u. { M } ) |-> X ) ) =
      ( ( G gsum ( k e. A |-> X ) ) P Y ) ) $=
      ( wcel csn cun cmpt cgsu co cfn c0g cfv eqid snfi unfi sylancl cv wo elun
      wa wceq elsni syl adantl adantr eqeltrd jaodan sylan2b ccnv cvv cdif cima
      wss cdm cnvimass dmmptss sstri ssfi wn cin disjsn sylibr eqidd gsumsplit2
      c0 ccmn gsumsn syl3anc oveq2d eqtrd ) AFEBGUAZUBZIUCZUDUEFEBIUCUDUEZFEWGI
      UCUDUEZDUEWJJDUEAWHCBWGDEFUFIFUGUHZKWLUILMABUFTWGUFTWHUFTZNGUJBWGUKULZEUM
      ZWHTAWOBTZWOWGTZUNICTZWOBWGUOAWPWRWQOAWQUPIJCWQIJUQZAWQWOGUQWSWOGURSUSUTA
      JCTZWQRVAVBVCVDAWMWIVEVFWLUAVGZVHZWHVIXBUFTWNXBWIVJWHWIXAVKEWHIWIWIUIVLVM
      WHXBVNULAGBTVOBWGVPWAUQQBGVQVRAWHVSVTAWKJWJDAFWBTGHTWTWKJUQMPRICJEFGHKSWC
      WDWEWF $.
      $( [19-Dec-2014] $)
  $}

  ${
    $d j k x y z A $.  $d j k x y z F $.  $d j k x y z G $.  $d j k x y z ph $.
    $d j k B $.  $d j k D $.  $d j k x y z Z $.
    gsum2d.b $e |- B = ( Base ` G ) $.
    gsum2d.z $e |- Z = ( 0g ` G ) $.
    gsum2d.g $e |- ( ph -> G e. CMnd ) $.
    gsum2d.a $e |- ( ph -> A e. V ) $.
    gsum2d.r $e |- ( ph -> Rel A ) $.
    gsum2d.d $e |- ( ph -> D e. W ) $.
    gsum2d.s $e |- ( ph -> dom A C_ D ) $.
    gsum2d.f $e |- ( ph -> F : A --> B ) $.
    gsum2d.w $e |- ( ph -> ( `' F " ( _V \ { Z } ) ) e. Fin ) $.
    $( Write a sum over a two-dimensional region as a double sum.  (Contributed
       by Mario Carneiro, 28-Dec-2014.) $)
    gsum2d $p |- ( ph -> ( G gsum F ) = ( G gsum
      ( j e. D |-> ( G gsum ( k e. ( A " { j } ) |-> ( j F k ) ) ) ) ) ) $=
      ( vx vy vz ccnv cvv csn cdif cima cdm cres cgsu co cv cmpt wcel wceq dmfi
      cfn syl wi c0 cun reseq2 res0 syl6eq reseq2d oveq2d mpteq1 eqeq12d imbi2d
      mpt0 eqidd wn wa cplusg cfv oveq1 eqid ccmn adantr resexg wf resss fssres
      wss sylancl imass1 mp2b ssfi simprr disjsn sylibr resindi 3eqtr3g resundi
      cnvss cin a1i gsumsplit ssun1 ssres2 resabs1 oveq2i oveq12i simprl imaexg
      ssun2 cop vex elimasn df-ov ffvelrn sylan syl5eqel sylan2b fmptd crn rnfi
      biimpi opelrn con3i anim12i eldif 3imtr4i ssid suppss2 syl2anc chvarv cxp
      c2nd ax-mp eqtrd wfn dffn5v sylib resmpt eqtri ssv wrel gsumres mpteq12dv
      suppssr syl5eq sylan2 gsumcl ad2antrr sneq imaeq2d gsumunsn ccom 2ndconst
      eleq1d wf1o gsumf1o c1st 1st2nd2 xp1st opeq1d fveq2d syl6eqr mpteq2ia ffn
      elsni reseq1d ressn xp2nd adantl wfo fo2nd fofn mpbi reseq1i oveq2 fmptco
      3eqtr4a eqtr4d syl5ibr expcom a2d findcard2s mpcom cnvimass syl5sseq sylc
      fdm relss relssdmrn xpss2 syl6ss jca ssin df-res syl6sseqr sstrd ad2antll
      dmss eldifn ad2antrl opeldm nsyl sylanbrc syldan anassrs mpteq2dva cmnmnd
      cmnd gsumz eqtr3d 3eqtr3d ) AHGBGUDZUEKUFUGZUHZUIZUJZUJZUKULZHEUXMHFBEUMZ
      UFZUHZUXQFUMZGULZUNZUKULZUNZUKULZHGUKULHEDUYCUNZUKULZUXMURUOZAUXPUYEUPZAU
      XLURUOZUYHTUXLUQUSZAHGBUAUMZUJZUJZUKULZHEUYLUYCUNZUKULZUPZUTAHVAUKULZUYSU
      PZUTAHGBUBUMZUJZUJZUKULZHEVUAUYCUNZUKULZUPZUTAHGBVUAUCUMZUFZVBZUJZUJZUKUL
      ZHEVUJUYCUNZUKULZUPZUTAUYIUTUAUBUCUXMUYLVAUPZUYRUYTAVUQUYOUYSUYQUYSVUQUYN
      VAHUKVUQUYNGVAUJVAVUQUYMVAGVUQUYMBVAUJZVAUYLVABVCBVDZVEVFGVDVEVGVUQUYPVAH
      UKVUQUYPEVAUYCUNVAEUYLVAUYCVHEUYCVKVEVGVIVJUYLVUAUPZUYRVUGAVUTUYOVUDUYQVU
      FVUTUYNVUCHUKVUTUYMVUBGUYLVUABVCVFVGVUTUYPVUEHUKEUYLVUAUYCVHVGVIVJUYLVUJU
      PZUYRVUPAVVAUYOVUMUYQVUOVVAUYNVULHUKVVAUYMVUKGUYLVUJBVCVFVGVVAUYPVUNHUKEU
      YLVUJUYCVHVGVIVJUYLUXMUPZUYRUYIAVVBUYOUXPUYQUYEVVBUYNUXOHUKVVBUYMUXNGUYLU
      XMBVCVFVGVVBUYPUYDHUKEUYLUXMUYCVHVGVIVJAUYSVLVUAURUOZVUHVUAUOVMZVNZAVUGVU
      PAVVEVUGVUPUTVUGVUPAVVEVNZVUDHGBVUIUJZUJZUKULZHVOVPZULZVUFVVIVVJULZUPVUDV
      UFVVIVVJVQVVFVUMVVKVUOVVLVVFVUMHVULVUBUJZUKULZHVULVVGUJZUKULZVVJULVVKVVFV
      UKCVUBVVGVVJVULHUEKLMVVJVRZAHVSUOZVVENVTZAVUKUEUOZVVEABIUOZVVTOBVUJIWAUSV
      TAVUKCVULWBZVVEABCGWBZVUKBWEVWBSBVUJWCBCVUKGWDWFVTAVULUDZUXKUHZURUOZVVEAU
      YJVWEUXLWEZVWFTVULGWEVWDUXJWEVWGGVUKWCVULGWPVWDUXJUXKWGWHUXLVWEWIWFVTVVFB
      VUAVUIWQZUJVURVUBVVGWQVAVVFVWHVABVVFVVDVWHVAUPAVVCVVDWJZVUAVUHWKWLVFBVUAV
      UIWMVUSWNVUKVUBVVGVBUPVVFBVUAVUIWOWRWSVVNVUDVVPVVIVVJVVMVUCHUKVUAVUJWEVUB
      VUKWEVVMVUCUPVUAVUIWTVUAVUJBXAGVUBVUKXBWHXCVVOVVHHUKVUIVUJWEVVGVUKWEVVOVV
      HUPVUIVUAXGVUIVUJBXAGVVGVUKXBWHXCXDVEVVFVUOVUFHFBVUIUHZVUHUXTGULZUNZUKULZ
      VVJULVVLVVFVUACVVJEHVUHUEUYCVWMLVVQVVSAVVCVVDXEAUYCCUOZVVEUXQVUAUOAUXSCUY
      BHUEKLMNAVWAUXSUEUOZOBUXRIXFUSZAFUXSUYACUYBUXTUXSUOZAUXQUXTXHZBUOZUYACUOB
      UXQUXTEXIZFXIZXJZAVWSVNUYAVWRGVPZCUXQUXTGXKZAVWCVWSVXCCUOSBCVWRGXLXMXNXOU
      YBVRXPZAUXLXQZURUOZUYBUDUXKUHZVXFWEVXHURUOAUYJVXGTUXLXRUSAUXSUYAFVXFKUXTU
      XSVXFUGUOZAVWRBUXLUGUOZUYAKUPZVWQUXTVXFUOZVMZVNVWSVWRUXLUOZVMZVNVXIVXJVWQ
      VWSVXMVXOVWQVWSVXBXSZVXNVXLUXQUXTUXLVWTVXAXTYAYBUXTUXSVXFYCVWRBUXLYCZYDAV
      XJVNUYAVXCKVXDABCGUXLVWRKSUXLUXLWEAUXLYEWRUUBUUCZUUDYFVXFVXHWIYGZUUEZUUFV
      UHUEUOVVFUCXIWRVWIAVWMCUOZVVEAVWNUTAVYAUTEUCUXQVUHUPZVWNVYAAVYBUYCVWMCVYB
      UYBVWLHUKVYBFUXSUYAVWJVWKVYBUXRVUIBUXQVUHUUGZUUHUXQVUHUXTGVQUUAVGZUULVJVX
      TYHVTVYDUUIVVFVWMVVIVUFVVJAVWMVVIUPZVVEAUYCHGBUXRUJZUJZUKULZUPZUTAVYEUTEU
      CVYBVYIVYEAVYBUYCVWMVYHVVIVYDVYBVYGVVHHUKVYBVYFVVGGVYBUXRVUIBVYCVFVFVGVIV
      JAUYCHUYBYJUXRUXSYIZUJZUUJZUKULVYHAUXSCVYJUYBHVYKUEKLMNVWPVXEVXSVYJUXSVYK
      UUMZAUXQUEUOVYMVWTUXQUXSUEUUKYKWRUUNAVYGVYLHUKAUAVYJUYLGVPZUNZUAVYJUXQUYL
      YJVPZGULZUNVYGVYLUAVYJVYNVYQUYLVYJUOZVYNUXQVYPXHZGVPVYQVYRUYLVYSGVYRUYLUY
      LUUOVPZVYPXHVYSUYLUXRUXSUUPVYRVYTUXQVYPVYRVYTUXRUOVYTUXQUPUYLUXRUXSUUQVYT
      UXQUVCUSUURYLUUSUXQVYPGXKUUTUVAAVYGUABVYNUNZVYFUJZVYOAGWUAVYFAGBYMZGWUAUP
      AVWCWUCSBCGUVBUSUABGYNYOUVDWUBUAVYFVYNUNZVYOVYFBWEWUBWUDUPBUXRWCUABVYFVYN
      YPYKVYFVYJUPWUDVYOUPBUXQUVEUAVYFVYJVYNVHYKYQVEAUAFVYJUXSVYPUYAVYQVYKUYBVY
      RVYPUXSUOAUYLUXRUXSUVFUVGVYKUAVYJVYPUNZUPAVYKUAUEVYPUNZVYJUJZWUEYJWUFVYJY
      JUEYMZYJWUFUPUEUEYJUVHWUHUVIUEUEYJUVJYKUAUEYJYNUVKUVLVYJUEWEWUGWUEUPVYJYR
      UAUEVYJVYPYPYKYQWRAUYBVLUXTVYPUXQGUVMUVNUVOVGUVPYHVTVGYLVIUVQUVRUVSUVTUWA
      ABCGHIUXNKLMNOSAUXLBUXMUEYIZWQZUXNAUXLBWEZUXLWUIWEZVNUXLWUJWEAWUKWULAGUIZ
      UXLBGUXKUWBAVWCWUMBUPSBCGUWEUSUWCZAUXLYSZWULAWUKBYSWUOWUNPUXLBUWFUWDWUOUX
      LUXMVXFYIZWUIUXLUWGVXFUEWEWUPWUIWEVXFYRVXFUEUXMUWHYKUWIUSUWJUXLBWUIUWKYOB
      UXMUWLUWMTYTAHUYFUXMUJZUKULUYEUYGAWUQUYDHUKAUXMDWEWUQUYDUPAUXMBUIZDAWUKUX
      MWURWEWUNUXLBUWPUSRUWNEDUXMUYCYPUSVGADCUYFHJUXMKLMNQAEDUYCCUYFAVWNUXQDUOV
      XTVTUYFVRXPADUYCEUXMKAUXQDUXMUGUOZVNZUYCHFUXSKUNZUKULZKWUTUYBWVAHUKWUTFUX
      SUYAKAWUSVWQVXKAWUSVWQVNZVXJVXKAWVCVNZVWSVXOVXJVWQVWSAWUSVXPUWOWVDUXQUXMU
      OZVXNWUSWVEVMAVWQUXQDUXMUWQUWRUXQUXTUXLVWTUWSUWTVXQUXAVXRUXBUXCUXDVGAWVBK
      UPZWUSAHUXFUOZVWOWVFAVVRWVGNHUXEUSVWPUXSFHUEKMUXGYGVTYLYFZAUYHUYFUDUXKUHZ
      UXMWEWVIURUOUYKWVHUXMWVIWIYGYTUXHUXI $.
      $( [28-Dec-2014] $)
  $}

  ${
    $d j k m n B $.  $d j k x y z D $.  $d j x y z E $.  $d j k m n x y z ph $.
    $d j k m n x y z A $.  $d j k m n x G $.  $d j k z U $.  $d m n x y z X $.
    $d k m n x y z C $.  $d j V $.  $d j k m n x z Z $.
    gsum2d2.b $e |- B = ( Base ` G ) $.
    gsum2d2.z $e |- Z = ( 0g ` G ) $.
    gsum2d2.g $e |- ( ph -> G e. CMnd ) $.
    gsum2d2.a $e |- ( ph -> A e. V ) $.
    gsum2d2.r $e |- ( ( ph /\ j e. A ) -> C e. W ) $.
    gsum2d2.f $e |- ( ( ph /\ ( j e. A /\ k e. C ) ) -> X e. B ) $.
    gsum2d2.u $e |- ( ph -> U e. Fin ) $.
    gsum2d2.n $e |- ( ( ph /\ ( ( j e. A /\ k e. C ) /\ -. j U k ) )
                      -> X = Z ) $.
    $( Lemma for ~ gsum2d2 : show the function is finitely supported. $)
    gsum2d2lem $p |- ( ph ->
      ( `' ( j e. A , k e. C |-> X ) " ( _V \ { Z } ) ) e. Fin ) $=
      ( vz vx cfn wcel cmpt2 ccnv cvv csn cdif cima wss cv ciun wral ralrimivva
      cxp wf eqid fmpt2x sylib cop wceq wex cfv relxp rgenw reliun mpbir eldifi
      wrel adantl elrel sylancr ax-17 hbiu1 hbdif hban hbmpt21 hbfv hbeq simprr
      wa hbmpt22 fveq2d co df-ov simprl eqeltrrd syl wb opeliunxpg ax-mp simpld
      vex simprd syldan ovmpt4g syl3anc syl5eqr wn eldifn ad2antrl eleq1d df-br
      wbr syl6bbr mtbid jca 3eqtrd expr exlimd mpd suppss ssfi syl2anc ) AEUCUD
      FGBDKUEZUFUGLUHUIUJZEUKXQUCUDSAFBFULZUHZDUPZUMZCUAXPELAKCUDZGDUNFBUNYACXP
      UQAYBFGBDRUOFGBDKCXPXPURZUSUTAUAULZYAEUIZUDZWBZYDXRGULZVAZVBZGVCZFVCZYDXP
      VDZLVBZYGYAVJZYDYAUDZYLYOXTVJZFBUNYQFBXSDVEVFFBXTVGVHYFYPAYDYAEVIVKFGYDYA
      VLVMYGYKYNFAYFFAFVNFUAYAEFUABXTVOYDEUDZFVNVPVQFUBUBYMLFUBYDXPFGUBBDKVRUBU
      LZYDUDZFVNVSYSLUDZFVNVTYGYJYNGYGGVNGUBUBYMLGUBYDXPFGUBBDKWCYTGVNVSUUAGVNV
      TAYFYJYNAYFYJWBZWBZYMYIXPVDZKLUUCYDYIXPAYFYJWAZWDUUCUUDXRYHXPWEZKXRYHXPWF
      UUCXRBUDZYHDUDZYBUUFKVBUUCUUGUUHUUCYIYAUDZUUGUUHWBZUUCYIYEUDUUIUUCYDYIYEU
      UEAYFYJWGWHYIYAEVIWIYHUGUDUUIUUJWJGWNFBDYHUGWKWLUTZWMUUCUUGUUHUUKWOAUUBUU
      JYBUUKRWPFGBDKXPCYCWQWRWSAUUBUUJXRYHEXEZWTZWBKLVBUUCUUJUUMUUKUUCYRUULYFYR
      WTAYJYDYAEXAXBUUCYRYIEUDUULUUCYDYIEUUEXCXRYHEXDXFXGXHTWPXIXJXKXKXLXMEXQXN
      XO $.
      $( [28-Dec-2014] $)

    $( Write a group sum over a two-dimensional region as a double sum.  (Note
       that ` C ( j ) ` is a function of ` j ` .)  (Contributed by Mario
       Carneiro, 28-Dec-2014.) $)
    gsum2d2 $p |- ( ph -> ( G gsum ( j e. A , k e. C |-> X ) ) =
      ( G gsum ( j e. A |-> ( G gsum ( k e. C |-> X ) ) ) ) ) $=
      ( vm vn vx vy cmpt2 cgsu co cv csn cxp ciun cima cmpt cvv wcel wral xpexg
      wa snex sylancr ralrimiva iunexg syl2anc relxp rgenw reliun mpbir a1i cdm
      wrel cop wex vex eldm2 eliunxp opth1 ad2antrl simprrl eqeltrd ex exlimdvv
      wceq syl5bi exlimdv ssrdv ralrimivva fmpt2x sylib gsum2d2lem gsum2d ax-17
      wf eqid hbiu1 hbima hbmpt21 hbov hbmpt sneq oveq1 mpteq12dv oveq2d cbvmpt
      imaeq2d elimasn wb opeliunxpg ax-mp bitri baib eqrdv mpteq1 hbmpt22 oveq2
      syl syl6eq adantl simprl simprr ovmpt4g syl3anc anassrs mpteq2dva syl5eq
      eqtrd ) AHFGBDKUEZUFUGHUABHUBFBFUHZUIZDUJZUKZUAUHZUIZULZYKUBUHZYFUGZUMZUF
      UGZUMZUFUGHFBHGDKUMZUFUGZUMZUFUGAYJCBUAUBYFHUNILMNOABIUOYIUNUOZFBUPYJUNUO
      PAUUBFBAYGBUOZURZYHUNUODJUOUUBYGUSQYHDUNJUQUTVAFBYIIUNVBVCYJVJZAUUEYIVJZF
      BUPUUFFBYHDVDVEFBYIVFVGVHPAUCYJVIZBUCUHZUUGUOUUHUDUHZVKZYJUOZUDVLAUUHBUOZ
      UDUUHYJUCVMZVNAUUKUULUDUUKUUJYGGUHZVKZWBZUUCUUNDUOZURZURZGVLFVLAUULFGBDUU
      JVOAUUSUULFGAUUSUULAUUSURUUHYGBUUPUUHYGWBAUURUUHUUIYGUUNUUMVPVQAUUPUUCUUQ
      VRVSVTWAWCWDWCWEAKCUOZGDUPFBUPYJCYFWLAUUTFGBDRWFFGBDKCYFYFWMZWGWHABCDEFGH
      IJKLMNOPQRSTWIWJAYRUUAHUFAYRFBHUBYJYHULZYGYNYFUGZUMZUFUGZUMUUAUAFUCBYQUVE
      FUCHYPUFUUHHUOFWKUUHUFUOFWKFUBUCYMYOFUCYJYLFUCBYIWNUUHYLUOFWKWOFUCYKYNYFU
      UHYKUOFWKFGUCBDKWPUUHYNUOZFWKWQWRWQUUHUVEUOUAWKYKYGWBZYPUVDHUFUVGUBYMYOUV
      BUVCUVGYLYHYJYKYGWSXDYKYGYNYFWTXAXBXCAFBUVEYTUUDUVDYSHUFUUDUVDGDYGUUNYFUG
      ZUMZYSUUCUVDUVIWBAUUCUVDUBDUVCUMZUVIUUCUVBDWBUVDUVJWBUUCGUVBDUUNUVBUOZUUC
      UUQUVKUUOYJUOZUURYJYGUUNFVMGVMZXEUUNUNUOUVLUURXFUVMFBDUUNUNXGXHXIXJXKUBUV
      BDUVCXLXOUBGUCDUVCUVHGUCYGYNYFUUHYGUOGWKFGUCBDKXMUVFGWKWQUUHUVHUOUBWKYNUU
      NYGYFXNXCXPXQUUDGDUVHKAUUCUUQUVHKWBZAUURURUUCUUQUUTUVNAUUCUUQXRAUUCUUQXSR
      FGBDKYFCUVAXTYAYBYCYEXBYCYDXBYE $.
      $( [28-Dec-2014] $)

    gsumcom2.d $e |- ( ph -> D e. Y ) $.
    gsumcom2.c $e |- ( ph ->
      ( ( j e. A /\ k e. C ) <-> ( k e. D /\ j e. E ) ) ) $.
    $( Two-dimensional commutation of a group sum.  Note that while ` A ` and
       ` D ` are constants w.r.t. ` j , k ` , ` C ( j ) ` and ` E ( k ) ` are
       not. $)
    gsumcom2 $p |- ( ph -> ( G gsum ( j e. A , k e. C |-> X ) ) =
      ( G gsum ( k e. D , j e. E |-> X ) ) ) $=
      ( vz vx vy cmpt2 cgsu co cv csn cxp ciun ccnv cuni cmpt ccom wcel wral wa
      cvv snex xpexg sylancr ralrimiva iunexg syl2anc wf ralrimivva eqid fmpt2x
      sylib gsum2d2lem wf1o wrel relxp rgenw reliun mpbir cnvf1o wceq wb relcnv
      ax-mp cop wi ax-17 hbiu1 hbcnv hbel hbbi hbim opeq2 eleq1d bibi12d imbi2d
      opeq1 vex opeliunxpg 3bitr4g opelcnv syl6bbr chvar eqrelrdv f1oeq3 mpbiri
      syl gsumf1o cfv csb sneq cnveqd unieqd opswap syl6eq fveq2d df-ov syl6eqr
      mpt2mptx hbcsb1 csbeq1a xpeq12d cbviun mpteq1 hbmpt22 hbmpt21 oveq2 oveq1
      hbxp hbov sylan9eq cbvmpt2x 3eqtr4i f1of fmpt sylibr r19.21bi eqidd fveq2
      wfn ffn dffn5v fmptco w3a ovmpt4g 3expia sylcom sylbird 3impib mpt2eq3dva
      ex eqcomd 3eqtr4a oveq2d eqtrd ) AJGHBDMUIZUJUKJUURUFHEHULZUMZIUNZUOZUFUL
      ZUMZUPZUQZURZUSZUJUKJHGEIMUIZUJUKAGBGULZUMZDUNZUOZCUVBUURJUVGVCOPQRABKUTU
      VLVCUTZGBVAUVMVCUTSAUVNGBAUVJBUTZVBUVKVCUTDLUTUVNUVJVDTUVKDVCLVEVFVGGBUVL
      KVCVHVIAMCUTZHDVAGBVAUVMCUURVJZAUVPGHBDUAVKGHBDMCUURUURVLZVMVNZABCDFGHJKL
      MOPQRSTUAUBUCVOAUVBUVMUVGVPZUVBUVBUPZUVGVPZUVBVQZUWBUWCUVAVQZHEVAUWDHEUUT
      IVRVSHEUVAVTWAUFUVBWBWFAUVMUWAWCUVTUWBWDAUGUHUVMUWAUVMVQUVLVQZGBVAUWEGBUV
      KDVRVSGBUVLVTWAUVBWEAUGULZUUSWGZUVMUTZUWGUWAUTZWDZWHZAUWFUHULZWGZUVMUTZUW
      MUWAUTZWDZWHHUHAUWPHAHWIUWNUWOHUWNHWIHUFUFUWMUWAUVCUWMUTHWIHUFUVBHUFEUVAW
      JWKWLWMWNUUSUWLWCZUWJUWPAUWQUWHUWNUWIUWOUWQUWGUWMUVMUUSUWLUWFWOZWPUWQUWGU
      WMUWAUWRWPWQWRAUVJUUSWGZUVMUTZUWSUWAUTZWDZWHUWKGUGAUWJGAGWIUWHUWIGGUFUFUW
      GUVMUVCUWGUTGWIGUFBUVLWJWLUWIGWIWMWNUVJUWFWCZUXBUWJAUXCUWTUWHUXAUWIUXCUWS
      UWGUVMUVJUWFUUSWSZWPUXCUWSUWGUWAUXDWPWQWRAUWTUUSUVJWGUVBUTZUXAAUVOUUSDUTZ
      VBZUUSEUTZUVJIUTZVBZUWTUXEUEUUSVCUTUWTUXGWDHWTZGBDUUSVCXAWFUVJVCUTUXEUXJW
      DGWTZHEIUVJVCXAWFXBUVJUUSUVBUXLUXKXCXDXEXEXFUVMUWAUVBUVGXGXIXHZXJAUVHUVIJ
      UJAUFUVBUVFUURXKZURZHGEIUVJUUSUURUKZUIZUVHUVIUFUGEUWFUMZHUWFIXLZUNZUOZUXN
      URZUGUHEUXSUWLUWFUURUKZUIUXOUXQUGUHUFEUXSUXNUYCUVCUWMWCZUXNUWLUWFWGZUURXK
      UYCUYDUVFUYEUURUYDUVFUWMUMZUPZUQUYEUYDUVEUYGUYDUVDUYFUVCUWMXMXNXOUWFUWLUG
      WTUHWTXPXQXRUWLUWFUURXSXTYAUVBUYAWCUXOUYBWCHUGUFEUVAUXTUVCUVAUTUGWIHUFUXR
      UXSUVCUXRUTHWIHUFUWFIUVCUWFUTZHWIZYBZYKUUSUWFWCZUUTUXRIUXSUUSUWFXMHUWFIYC
      ZYDYEUFUVBUYAUXNYFWFHGUGUHUFEIUXPUXSUYCUVCIUTUGWIUYJUVCUXPUTZUGWIUYMUHWIH
      UFUWLUWFUURUVCUWLUTZHWIGHUFBDMYGUYIYLGUFUWLUWFUURUYNGWIGHUFBDMYHUYHGWIYLU
      YLUYKUVJUWLWCUXPUVJUWFUURUKUYCUUSUWFUVJUURYIUVJUWLUWFUURYJYMYNYOAUFUGUVBU
      VMUVFUWFUURXKZUXNUVGUURAUVFUVMUTZUFUVBAUVBUVMUVGVJZUYPUFUVBVAAUVTUYQUXMUV
      BUVMUVGYPXIUFUVBUVMUVFUVGUVGVLYQYRYSAUVGYTAUURUVMUUBZUURUGUVMUYOURWCAUVQU
      YRUVSUVMCUURUUCXIUGUVMUURUUDVNUWFUVFUURUUAUUEAHGEIMUXPAUXHUXIUUFUXPMAUXHU
      XIUXPMWCZAUXJUXGUYSUEAUXGUVPUYSAUXGUVPUAUUMUVOUXFUVPUYSGHBDMUURCUVRUUGUUH
      UUIUUJUUKUUNUULUUOUUPUUQ $.
      $( [28-Dec-2014] $)
  $}

  ${
    $d j k m n x y z A $.  $d j k m n x G $.  $d j k m n z ph $.  $d j k z U $.
    $d j k m n x y z C $.  $d j k F $.  $d m n x y z X $.  $d j k m n x z Z $.
    $d j k m n B $.  $d j m V $.
    gsumxp.b $e |- B = ( Base ` G ) $.
    gsumxp.z $e |- Z = ( 0g ` G ) $.
    gsumxp.g $e |- ( ph -> G e. CMnd ) $.
    gsumxp.a $e |- ( ph -> A e. V ) $.
    gsumxp.r $e |- ( ph -> C e. W ) $.
    ${
      gsumxp.f $e |- ( ph -> F : ( A X. C ) --> B ) $.
      gsumxp.w $e |- ( ph -> ( `' F " ( _V \ { Z } ) ) e. Fin ) $.
      $( Write a group sum over a cartesian product as a double sum.
         (Contributed by Mario Carneiro, 28-Dec-2014.) $)
      gsumxp $p |- ( ph -> ( G gsum F ) = ( G gsum
        ( j e. A |-> ( G gsum ( k e. C |-> ( j F k ) ) ) ) ) ) $=
        ( cgsu co cxp cv csn cima cmpt cvv wcel xpexg syl2anc relxp a1i cdm wss
        wrel dmxpss gsum2d wa wceq cres crn df-ima cin df-res eqtri simpr snssd
        inxp sseqin2 sylib inv1 xpeq12d syl5eq rneqd c0 wne vex snnz rnxp ax-mp
        syl6eq mpteq1 syl oveq2d mpteq2dva eqtrd ) AHGSTHEBHFBDUAZEUBZUCZUDZWGF
        UBGTZUEZSTZUEZSTHEBHFDWJUEZSTZUEZSTAWFCBEFGHUFIKLMNABIUGDJUGWFUFUGOPBDI
        JUHUIWFUNABDUJUKOWFULBUMABDUOUKQRUPAWMWPHSAEBWLWOAWGBUGZUQZWKWNHSWRWIDU
        RWKWNURWRWIWFWHUSZUTZDWFWHVAWRWTWHDUAZUTZDWRWSXAWRWSBWHVBZDUFVBZUAZXAWS
        WFWHUFUAVBXEWFWHVCBDWHUFVGVDWRXCWHXDDWRWHBUMXCWHURWRWGBAWQVEVFWHBVHVIXD
        DURWRDVJUKVKVLVMWHVNVOXBDURWGEVPVQWHDVRVSVTVLFWIDWJWAWBWCWDWCWE $.
        $( [28-Dec-2014] $)
    $}

    gsumcom.f $e |- ( ( ph /\ ( j e. A /\ k e. C ) ) -> X e. B ) $.
    gsumcom.u $e |- ( ph -> U e. Fin ) $.
    gsumcom.n $e |- ( ( ph /\ ( ( j e. A /\ k e. C ) /\ -. j U k ) )
                      -> X = Z ) $.
    $( Commute the arguments of a double sum.  (Contributed by Mario Carneiro,
       28-Dec-2014.) $)
    gsumcom $p |- ( ph -> ( G gsum ( j e. A , k e. C |-> X ) ) =
      ( G gsum ( k e. C , j e. A |-> X ) ) ) $=
      ( wcel cv adantr wa wb ancom a1i gsumcom2 ) ABCDDEFGBHIJKJLMNOPADJUAFUBBU
      AZQUCRSTQUIGUBDUAZUDUJUIUDUEAUIUJUFUGUH $.
      $( [28-Dec-2014] $)
  $}


