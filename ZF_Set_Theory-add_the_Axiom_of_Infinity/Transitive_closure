$(
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
        Transitive closure
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
$)


  ${
    $d x y z w v u $.  $d y z v A $.  $d y v u F $.
    trcl.1 $e |- A e. _V $.
    trcl.2 $e |- F =
               ( rec ( { <. z , w >. | w = ( z u. U. z ) } , A ) |` om ) $.
    trcl.3 $e |- C = U_ y e. om ( F ` y ) $.
    $( For any set ` A ` , show the properties of its transitive closure
       ` C ` .  Similar to Theorem 9.1 of [TakeutiZaring] p. 73 except that we
       show an explicit expression for the transitive closure rather than just
       its existence.  See ~ tz9.1 for an abbreviated version showing
       existence. $)
    trcl $p |- ( A C_ C /\ Tr C /\ A. x ( ( A C_ x /\ Tr x ) -> C C_ x ) ) $=
      ( vv vu wss wtr cv wa wi wal com cfv ciun wrex c0 wcel peano1 cuni cun
      wceq copab crdg cres fveq1i cvv fr0g ax-mp eqtr2i eqimssi fveq2 sseq2d
      rcla4ev mp2an ssiun sseqtr4i dftr2 csuc eliun anbi2i r19.42v bitr4i
      elunii ssun2 fvex uniex unex ax-17 hbopab1 hbrdg hbres hbxfreq hbfv
      hbuni hbun unieq uneq12 mpdan frsucopab mpan2 mpbiri sseld syl5 reximia
      sylbi peano2 eleq2d ex syl r19.23aiv cbvrexv sylibr ax-gen mpgbir wb
      treq mpbir wral sseq1d eqtri sseq1i biimpri adantr uniss df-tr sstr2
      syl5bi anc2li unss syl6ib biimprd syl9r com23 adantld finds2 com12
      r19.21aiv cbviunv iunss bitri 3pm3.2i ) EFMFNZEAOZMZYJNZPZFYJMZQZAREBSBOZ
      GTZUAZFEYQMZBSUBZEYRMUCSUDEUCGTZMZYTUEEUUAUUAUCDOCOZUUCUFZUGZUHZCDUIZEUJZ
      SUKZTZEUCGUUIIULZEUMUDUUJEUHHEUMUUGUNUOZUPUQYSUUBBUCSYPUCUHYQUUAEYPUCGURU
      SUTVABSYQEVBUOJVCYIYRNZUUMKOZLOZUDZUUOYRUDZPZUUNYRUDZQZLRKKLYRVDUUTLUURUU
      NYPVEZGTZUDZBSUBZUUSUURUUPUUOYQUDZPZBSUBZUVDUURUUPUVEBSUBZPUVGUUQUVHUUPBU
      UOSYQVFVGUUPUVEBSVHVIUVFUVCBSUVFUUNYQUFZUDYPSUDZUVCUUNUUOYQVJUVJUVIUVBUUN
      UVJUVIUVBMUVIYQUVIUGZMUVIYQVKUVJUVBUVKUVIUVJUVKUMUDUVBUVKUHYQUVIYPGVLZYQU
      VLVMVNCDKEYPUUEUVKUMGUUNEUDCVOZUUNYPUDCVOZCKYQUVICKYPGCKGUUIICKUUHSCKEUUG
      UUFCDKVPUVMVQUUNSUDZCVOVRVSUVNVTZCKYQUVPWAWBIUUCYQUHUUDUVIUHUUEUVKUHUUCYQ
      WCUUCYQUUDUVIWDWEWFWGZUSWHWIWJWKWLUVDUUNYQUDZBSUBZUUSUVDUUNUUOGTZUDZLSUBZ
      UVSUVCUWBBSUVJUVASUDZUVCUWBQYPWMUWCUVCUWBUWAUVCLUVASUUOUVAUHUVTUVBUUNUUOU
      VAGURWNUTWOWPWQUVRUWABLSYPUUOUHYQUVTUUNYPUUOGURWNWRWSBUUNSYQVFWSWPWTXAFYR
      UHYIUUMXBJFYRXCUOXDYOAYMUUNGTZYJMZKSXEZYNYMUWEKSUVOYMUWEUWEUUAYJMZYQYJMZU
      VBYJMZYMKBUUNUCUHUWDUUAYJUUNUCGURXFUUNYPUHUWDYQYJUUNYPGURXFUUNUVAUHUWDUVB
      YJUUNUVAGURXFYKUWGYLUWGYKUUAEYJUUAUUJEUUKUULXGXHXIXJUVJYLUWHUWIQYKUVJUWHY
      LUWIUWHYLUVKYJMZUVJUWIUWHYLUWHUVIYJMZPUWJUWHYLUWKUWHUVIYJUFZMZYLUWKQYQYJX
      KYLUWLYJMUWMUWKYJXLUVIUWLYJXMXNWPXOYQUVIYJXPXQUVJUWIUWJUVJUVBUVKYJUVQXFXR
      XSXTYAYBYCYDYNKSUWDUAZYJMUWFFUWNYJFYRUWNJBKSYQUWDYPUUNGURYEXGXHKSUWDYJYFY
      GWSWTYH $.
      $( [14-Sep-2003] $)
  $}

  ${
    $d A x y z w v $.
    tz9.1.1 $e |- A e. _V $.
    $( Every set has a transitive closure (smallest transitive extension).
       Theorem 9.1 of [TakeutiZaring] p. 73.  See ~ trcl for an explicit
       expression for the transitive closure.  Apparently open problems are
       whether this theorem can be proved without the Axiom of Infinity; if
       not, then whether it implies Infinity; and if not, what is the
       "property" that Infinity has that the other axioms don't have that is
       weaker than Infinity itself?

       (Added 22-Mar-2011) The following article seems to answer the first
       question, that it can't be proved without Infinity, in the affirmative:
       Mancini, Antonella and Zambella, Domenico (2001).  "A note on recursive
       models of set theories." _Notre Dame Journal of Formal Logic_,
       42(2):109-115.  (Thanks to Scott Fenton.) $)
    tz9.1 $p |- E. x ( A C_ x /\ Tr x
                /\ A. y ( ( A C_ y /\ Tr y ) -> x C_ y ) ) $=
      ( vz vv vw com cv cuni cun wceq copab crdg cres cfv ciun wss wtr wa wi
      wal w3a wex eqid trcl omex fvex iunex sseq2 treq sseq1 imbi2d albidv
      3anbi123d cla4ev ax-mp ) CEHEIZFIGIZUSJKLGFMCNHOZPZQZRZVBSZCBIZRVESTZVBVE
      RZUAZBUBZUCZCAIZRZVKSZVFVKVERZUAZBUBZUCZAUDBEGFCVBUTDUTUEVBUEUFVQVJAVBEHV
      AUGURUTUHUIVKVBLZVLVCVMVDVPVIVKVBCUJVKVBUKVRVOVHBVRVNVGVFVKVBVEULUMUNUOUP
      UQ $.
      $( [22-Mar-2011] $) $( [15-Sep-2003] $)

    $( Alternative expression for the existence of transitive closures
       ~ tz9.1 : the intersection of all transitive sets containing ` A ` is a
       set.  (Contributed by Mario Carneiro, 22-Mar-2013.) $)
    tz9.1c $p |- |^| { x | ( A C_ x /\ Tr x ) } e. _V $=
      ( vw vz vy cv wss wtr wa cab c0 wne cint cvv wcel wex com cuni cun wceq
      copab crdg cres cfv ciun wi wal w3a eqid trcl 3simpa omex fvex iunex
      sseq2 treq anbi12d cla4ev mp2b abn0 mpbir intex mpbi ) BAGZHZVEIZJZAKZLMZ
      VINOPVJVHAQZBDRDGZEGFGZVMSTUAFEUBBUCRUDZUEZUFZHZVPIZVHVPVEHUGAUHZUIVQVRJZ
      VKADFEBVPVNCVNUJVPUJUKVQVRVSULVHVTAVPDRVOUMVLVNUNUOVEVPUAVFVQVGVRVEVPBUPV
      EVPUQURUSUTVHAVAVBVIVCVD $.
      $( [22-Mar-2013] $)
  $}

  $c TC $. $( Transitive closure $)

  $( Extend class notation to include the transitive closure function. $)
  ctc $a class TC $.

  ${
    $d u x y $.
    $( The transitive closure function. $)
    df-tc $a |- TC = ( x e. _V |-> |^| { y | ( x C_ y /\ Tr y ) } ) $.
  $}

  ${
    $d A x y $.
    $( Value of the transitive closure function.  (The fact that this
       intersection exists is a non-trivial fact that depends on ~ ax-inf ; see
       ~ tz9.1 .)  (Contributed by Mario Carneiro, 23-Jun-2013.) $)
    tcvalg $p |- ( A e. V -> ( TC ` A ) = |^| { x | ( A C_ x /\ Tr x ) } ) $=
      ( vy cv ctc cfv wss wtr wa cab cint wceq fveq2 sseq1 anbi1d abbidv
      inteqd eqeq12d cvv wcel visset tz9.1c df-tc fvmpt2 mp2an vtoclg ) DEZFGZU
      HAEZHZUJIZJZAKZLZMZBFGZBUJHZULJZAKZLZMDBCUHBMZUIUQUOVAUHBFNVBUNUTVBUMUSAV
      BUKURULUHBUJOPQRSUHTUAUOTUAUPDUBZAUHVCUCDTUOTFDAUDUEUFUG $.
      $( [23-Jun-2013] $)
  $}

  ${
    $d A x y $.
    $( Defining property of the transitive closure function: it contains its
       argument as a subset.  (Contributed by Mario Carneiro, 23-Jun-2013.) $)
    tcid $p |- ( A e. V -> A C_ ( TC ` A ) ) $=
      ( vx wcel cv wss wtr wa cab cint ctc cfv wi wal simpl ax-gen ssintab
      mpbir tcvalg syl5sseqr ) ABDACEZFZUAGZHZCIJZAAKLAUEFUDUBMZCNUFCUBUCOPUDCA
      QRCABST $.
      $( [23-Jun-2013] $)

    $( Defining property of the transitive closure function: it is transitive.
       (Contributed by Mario Carneiro, 23-Jun-2013.) $)
    tctr $p |- Tr ( TC ` A ) $=
      ( vx vy cvv wcel ctc cfv wtr cv wss wa cab cint trint visset wceq sseq2
      treq anbi12d elab simprbi mprg wb tcvalg syl mpbiri wn c0 tr0 fvprc
      pm2.61i ) ADEZAFGZHZULUNABIZJZUOHZKZBLZMZHZCIZHZVACUSCUSNVBUSEAVBJZVCURVD
      VCKBVBCOUOVBPUPVDUQVCUOVBAQUOVBRSTUAUBULUMUTPUNVAUCBADUDUMUTRUEUFULUGZUNU
      HHZUIVEUMUHPUNVFUCAFUJUMUHRUEUFUK $.
      $( [23-Jun-2013] $)

    $d B x y $.
    $( Defining property of the transitive closure function: it is a subset of
       any transitive class containing ` A ` .  (Contributed by Mario Carneiro,
       23-Jun-2013.) $)
    tcmin $p |- ( A e. V -> ( ( A C_ B /\ Tr B ) -> ( TC ` A ) C_ B ) ) $=
      ( vy vx wcel wss wtr wa cv cab cint ctc cfv wex cvv fvex tcvalg eleq1d
      mpbii intexab sylibr cin ssin biimpi trin anim12i an4s expcom visset
      inex1 wceq sseq2 treq anbi12d elab intss1 sylbir inss2 syl6ss syl6
      19.23adv syl5com sseq1d sylibrd ) ACFZABGZBHZIZADJZGZVJHZIZDKZLZBGZAMNZBG
      VFAEJZGZVRHZIZEOZVIVPVFWAEKLZPFZWBVFVQPFWDAMQVFVQWCPEACRSTWAEUAUBVIWAVPEV
      IWAAVRBUCZGZWEHZIZVPWAVIWHVSVGVTVHWHVSVGIZWFVTVHIWGWIWFAVRBUDUEVRBUFUGUHU
      IWHVOWEBWHWEVNFVOWEGVMWHDWEVRBEUJUKVJWEULVKWFVLWGVJWEAUMVJWEUNUOUPWEVNUQU
      RVRBUSUTVAVBVCVFVQVOBDACRVDVE $.
      $( [23-Jun-2013] $)
  $}

  ${
    $d A x y $.
    tc2.1 $e |- A e. _V $.
    $( A variant of the definition of the transitive closure function, using
       instead the smallest transitive set containing ` A ` as a member, gives
       almost the same set, except that ` A ` itself must be added because it
       is not usually a member of ` ( TC `` A ) ` (and it is never a member if
       ` A ` is well-founded).  (Contributed by Mario Carneiro,
       23-Jun-2013.) $)
    tc2 $p |- ( ( TC ` A ) u. { A } ) = |^| { x | ( A e. x /\ Tr x ) } $=
      ( ctc cfv csn cun cv wcel wtr wa cab cint wss cvv wceq tcvalg ax-mp trss
      impcom simpr jca ss2abi intss eqsstri wi wal simpl ax-gen elintab mpbir
      snss mpbi unss biimpi mp2an fvex snex unex eleq2 treq anbi12d elab snid
      ssun2 sseli cuni uniun tctr df-tr unisn tcid ssun1 sstri mpbir2an intss1
      eqssi ) BDEZBFZGZBAHZIZWAJZKZALZMZVRWFNZVSWFNZVTWFNZVRBWANZWCKZALZMZWFBOI
      ZVRWMPCABOQRWEWLNWMWFNWDWKAWDWJWCWCWBWJWABSTWBWCUAUBUCWEWLUDRUEBWFIZWHWOW
      DWBUFZAUGWPAWBWCUHUIWDABCUJUKBWFCULUMWGWHKWIVRVSWFUNUOUPVTWEIZWFVTNWQBVTI
      ZVTJZWDWRWSKAVTVRVSBDUQBURUSWAVTPWBWRWCWSWAVTBUTWAVTVAVBVCBVSIWRBCVDVSVTB
      VSVRVEVFRWSVTVGZVTNWTVRVTWTVRVGZVSVGZGZVRVRVSVHXAVRNZXBVRNZXCVRNZVRJXDBVI
      VRVJUMXBBVRBCVKWNBVRNCBOVLRUEXDXEKXFXAXBVRUNUOUPUEVRVSVMVNVTVJUKVOVTWEVPR
      VQ $.
      $( [23-Jun-2013] $)

    $d B x $.
    $( The transitive closure function inherits the subset relation.
       (Contributed by Mario Carneiro, 23-Jun-2013.) $)
    tcss $p |- ( B C_ A -> ( TC ` B ) C_ ( TC ` A ) ) $=
      ( vx wss ctc cfv cv wtr wa cab cint cvv wcel wceq ssexg mpan2 tcvalg syl
      sstr2 anim1d ss2abdv intss ax-mp syl6sseqr eqsstrd ) BAEZBFGZBDHZEZUIIZJZ
      DKZLZAFGZUGBMNZUHUNOUGAMNZUPCBAMPQDBMRSUGUNAUIEZUKJZDKZLZUOUGUTUMEUNVAEUG
      USULDUGURUJUKBAUITUAUBUTUMUCSUQUOVAOCDAMRUDUEUF $.
      $( [23-Jun-2013] $)

    $( The transitive closure function converts the element relation to the
       subset relation.  (Contributed by Mario Carneiro, 23-Jun-2013.) $)
    tcel $p |- ( B e. A -> ( TC ` B ) C_ ( TC ` A ) ) $=
      ( vx wcel ctc cfv cv wss wtr wa cab cint tcvalg wi ssel com12 trss syl6
      imp3a simpr a1i jcad ss2abdv intss syl cvv wceq ax-mp syl6sseqr eqsstrd
      ) BAEZBFGBDHZIZUMJZKZDLZMZAFGZDBANULURAUMIZUOKZDLZMZUSULVBUQIURVCIULVAUPD
      ULVAUNUOULUTUOUNULUTBUMEZUOUNOUTULVDAUMBPQUOVDUNUMBRQSTVAUOOULUTUOUAUBUCU
      DVBUQUEUFAUGEUSVCUHCDAUGNUIUJUK $.
      $( [23-Jun-2013] $)
  $}

  ${
    $( The transitive closure function is idempotent.  (Contributed by Mario
       Carneiro, 23-Jun-2013.) $)
    tcidm $p |- ( TC ` ( TC ` A ) ) = ( TC ` A ) $=
      ( ctc cfv wss wtr ssid tctr cvv wcel wa wi fvex tcmin ax-mp mp2an tcid
      eqssi ) ABCZBCZRRRDZREZSRDZRFAGRHIZTUAJUBKABLZRRHMNOUCRSDUDRHPNQ $.
      $( [23-Jun-2013] $)
  $}


