$(
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
        Lagrange's four-square theorem
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
$)

  $c Z[i] $.

  $( Extend class notation with the set of gaussian integers. $)
  cgz $a class Z[i] $.

  $( Define the set of gaussian integers, which are complex numbers whose real
     and imaginary parts are integers.  (Note that the ` [ _i ] ` is actually
     part of the symbol token and has no independent meaning.) $)
  df-gz $a |- Z[i] = { x e. CC | ( ( Re ` x ) e. ZZ /\ ( Im ` x ) e. ZZ ) } $.

  ${
    $d x A $.
    $( Elementhood in the gaussian integers.  (Contributed by Mario Carneiro,
       14-Jul-2014.) $)
    elgz $p |- ( A e. Z[i] <->
      ( A e. CC /\ ( Re ` A ) e. ZZ /\ ( Im ` A ) e. ZZ ) ) $=
      ( vx cgz wcel cc cre cfv cz cim wa w3a cv wceq fveq2 eleq1d anbi12d df-gz
      elrab2 3anass bitr4i ) ACDAEDZAFGZHDZAIGZHDZJZJUAUCUEKBLZFGZHDZUGIGZHDZJU
      FBAECUGAMZUIUCUKUEULUHUBHUGAFNOULUJUDHUGAINOPBQRUAUCUEST $.
      $( [14-Jul-2014] $)
  $}

  $( A gaussian integer is a complex number.  (Contributed by Mario Carneiro,
     14-Jul-2014.) $)
  gzcn $p |- ( A e. Z[i] -> A e. CC ) $=
    ( cgz wcel cc cre cfv cz cim elgz simp1bi ) ABCADCAEFGCAHFGCAIJ $.
    $( [14-Jul-2014] $)

  $( An integer is a gaussian integer.  (Contributed by Mario Carneiro,
     14-Jul-2014.) $)
  zgz $p |- ( A e. ZZ -> A e. Z[i] ) $=
    ( cz wcel cc cre cfv cim cgz zcn cr wceq zre rere id eqeltrd reim0 syl6eqel
    syl cc0 0z elgz syl3anbrc ) ABCZADCAEFZBCAGFZBCAHCAIUCUDABUCAJCZUDAKALZAMRU
    CNOUCUESBUCUFUESKUGAPRTQAUAUB $.
    $( [14-Jul-2014] $)

  $( ` _i ` is a gaussian integer.  (Contributed by Mario Carneiro,
     14-Jul-2014.) $)
  igz $p |- _i e. Z[i] $=
    ( ci cgz wcel cc cre cfv cz cim elgz ax-icn cc0 rei 0z eqeltri imi mpbir3an
    c1 1z ) ABCADCAEFZGCAHFZGCAIJSKGLMNTQGORNP $.
    $( [14-Jul-2014] $)

  $( The gaussian integers are closed under negation.  (Contributed by Mario
     Carneiro, 14-Jul-2014.) $)
  gznegcl $p |- ( A e. Z[i] -> -u A e. Z[i] ) $=
    ( cgz wcel cneg cc cre cfv cz cim gzcn negcl wceq reneg elgz simp2bi znegcl
    syl eqeltrd imneg simp3bi syl3anbrc ) ABCZADZECZUCFGZHCUCIGZHCUCBCUBAECZUDA
    JZAKQUBUEAFGZDZHUBUGUEUJLUHAMQUBUIHCZUJHCUBUGUKAIGZHCZANZOUIPQRUBUFULDZHUBU
    GUFUOLUHASQUBUMUOHCUBUGUKUMUNTULPQRUCNUA $.
    $( [14-Jul-2014] $)

  $( The gaussian integers are closed under conjugation.  (Contributed by Mario
     Carneiro, 14-Jul-2014.) $)
  gzcjcl $p |- ( A e. Z[i] -> ( * ` A ) e. Z[i] ) $=
    ( cgz wcel ccj cfv cc cre cim gzcn cjcl wceq recj elgz simp2bi eqeltrd cneg
    cz syl imcj simp3bi znegcl syl3anbrc ) ABCZADEZFCZUDGEZQCUDHEZQCUDBCUCAFCZU
    EAIZAJRUCUFAGEZQUCUHUFUJKUIALRUCUHUJQCZAHEZQCZAMZNOUCUGULPZQUCUHUGUOKUIASRU
    CUMUOQCUCUHUKUMUNTULUAROUDMUB $.
    $( [14-Jul-2014] $)

  $( The gaussian integers are closed under addition.  (Contributed by Mario
     Carneiro, 14-Jul-2014.) $)
  gzaddcl $p |- ( ( A e. Z[i] /\ B e. Z[i] ) -> ( A + B ) e. Z[i] ) $=
    ( cgz wcel wa caddc co cc cre cfv cim gzcn syl2an wceq elgz simp2bi eqeltrd
    cz zaddcl simp3bi addcl readd imadd syl3anbrc ) ACDZBCDZEZABFGZHDZUHIJZRDUH
    KJZRDUHCDUEAHDZBHDZUIUFALZBLZABUAMUGUJAIJZBIJZFGZRUEULUMUJURNUFUNUOABUBMUEU
    PRDZUQRDZURRDUFUEULUSAKJZRDZAOZPUFUMUTBKJZRDZBOZPUPUQSMQUGUKVAVDFGZRUEULUMU
    KVGNUFUNUOABUCMUEVBVEVGRDUFUEULUSVBVCTUFUMUTVEVFTVAVDSMQUHOUD $.
    $( [14-Jul-2014] $)

  $( The gaussian integers are closed under multiplication.  (Contributed by
     Mario Carneiro, 14-Jul-2014.) $)
  gzmulcl $p |- ( ( A e. Z[i] /\ B e. Z[i] ) -> ( A x. B ) e. Z[i] ) $=
    ( cgz wcel cmul co cre cfv cim gzcn syl2an wceq elgz simp2bi zmulcl simp3bi
    cc cz syl2anc eqeltrd mulcl cmin remul zsubcl caddc immul zaddcl syl3anbrc
    wa ) ACDZBCDZUIZABEFZQDZUMGHZRDUMIHZRDUMCDUJAQDZBQDZUNUKAJZBJZABUAKULUOAGHZ
    BGHZEFZAIHZBIHZEFZUBFZRUJUQURUOVGLUKUSUTABUCKULVCRDZVFRDZVGRDUJVARDZVBRDZVH
    UKUJUQVJVDRDZAMZNZUKURVKVERDZBMZNZVAVBOKUJVLVOVIUKUJUQVJVLVMPZUKURVKVOVPPZV
    DVEOKVCVFUDSTULUPVAVEEFZVDVBEFZUEFZRUJUQURUPWBLUKUSUTABUFKULVTRDZWARDZWBRDU
    JVJVOWCUKVNVSVAVEOKUJVLVKWDUKVRVQVDVBOKVTWAUGSTUMMUH $.
    $( [14-Jul-2014] $)

  $( Construct a gaussian integer from real and imaginary parts.  (Contributed
     by Mario Carneiro, 16-Jul-2014.) $)
  gzreim $p |- ( ( A e. ZZ /\ B e. ZZ ) -> ( A + ( _i x. B ) ) e. Z[i] ) $=
    ( cz wcel cgz ci cmul co caddc zgz igz gzmulcl sylancr gzaddcl syl2an ) ACD
    AEDFBGHZEDZAPIHEDBCDZAJRFEDBEDQKBJFBLMAPNO $.
    $( [16-Jul-2014] $)

  $( The gaussian integers are closed under subtraction.  (Contributed by Mario
     Carneiro, 14-Jul-2014.) $)
  gzsubcl $p |- ( ( A e. Z[i] /\ B e. Z[i] ) -> ( A - B ) e. Z[i] ) $=
    ( cgz wcel wa cneg caddc co cmin cc wceq gzcn negsub syl2an gznegcl gzaddcl
    sylan2 eqeltrrd ) ACDZBCDZEABFZGHZABIHZCSAJDBJDUBUCKTALBLABMNTSUACDUBCDBOAU
    APQR $.
    $( [14-Jul-2014] $)

  $( The squared norm of a gaussian integer is an integer.  (Contributed by
     Mario Carneiro, 16-Jul-2014.) $)
  gzabssqcl $p |- ( A e. Z[i] -> ( ( abs ` A ) ^ 2 ) e. NN0 ) $=
    ( cgz wcel cabs cfv c2 cexp co cre cim caddc cn0 cc wceq gzcn absvalsq2 syl
    cz elgz zsqcl2 simp2bi simp3bi nn0addcl syl2anc eqeltrd ) ABCZADEFGHZAIEZFG
    HZAJEZFGHZKHZLUFAMCZUGULNAOAPQUFUILCZUKLCZULLCUFUHRCZUNUFUMUPUJRCZASZUAUHTQ
    UFUQUOUFUMUPUQURUBUJTQUIUKUCUDUE $.
    $( [16-Jul-2014] $)

  ${
    $d a b c d n w x y z $.  $d a b c d n B $.  $d n E $.  $d n G $.  $d n H $.
    $d a b c d j k n v A $.  $d a b c d n C $.  $d a b c d n D $.  $d j n F $.
    $d a b c d i k n u M $.  $d k m n u v N $.  $d a b c d i j k m n u v P $.
    $d a b c d j k m n u v ph $.  $d a b c d i j k m n u v S $.  $d k u T $.
    $d i R $.
    4sq.1 $e |- S = { n | E. x e. ZZ E. y e. ZZ E. z e. ZZ E. w e. ZZ
      n = ( ( ( x ^ 2 ) + ( y ^ 2 ) ) + ( ( z ^ 2 ) + ( w ^ 2 ) ) ) } $.
    $( Lemma for ~ 4sq .  The set ` S ` is the set of all numbers that are
       expressible as a sum of four squares.  Our goal is to show that
       ` S = NN0 ` ; here we show one subset direction. $)
    4sqlem1 $p |- S C_ NN0 $=
      ( cv c2 cexp co caddc cz wrex cn0 wcel wa zsqcl2 nn0addcl syl2an wceq cab
      wi eleq1a syl rexlimdvva rexlimivv abssi eqsstri ) EFHZAHZIJKZBHZIJKZLKZC
      HZIJKZDHZIJKZLKZLKZUAZDMNCMNZBMNAMNZFUBOGVDFOVCUJOPZABMMUKMPZUMMPZQZVBVEC
      DMMVHUPMPZURMPZQZQVAOPZVBVEUCVHUOOPZUTOPZVLVKVFULOPUNOPVMVGUKRUMRULUNSTVI
      UQOPUSOPVNVJUPRURRUQUSSTUOUTSTVAOUJUDUEUFUGUHUI $.
      $( [14-Jul-2014] $)

    $( Lemma for ~ 4sq .  Change bound variables in ` S ` . $)
    4sqlem2 $p |- ( A e. S <-> E. a e. ZZ E. b e. ZZ E. c e. ZZ E. d e. ZZ
      A = ( ( ( a ^ 2 ) + ( b ^ 2 ) ) + ( ( c ^ 2 ) + ( d ^ 2 ) ) ) ) $=
      ( cv c2 cexp co caddc wceq cz wrex wcel cab eleq2i wa wi id ovex syl6eqel
      cvv a1i rexlimdvva rexlimivv oveq1 oveq1d eqeq2d 2rexbidv oveq2d cbvrex2v
      eqeq1 syl5bb elab3 bitri ) EFUAEGMZAMZNOPZBMZNOPZQPZCMZNOPZDMZNOPZQPZQPZR
      ZDSTCSTZBSTASTZGUBZUAEHMZNOPZIMZNOPZQPZJMZNOPZKMZNOPZQPZQPZRZKSTJSTZISTHS
      TZFVRELUCVQWLGEWKEUIUAZHISSVSSUAWASUAUDZWJWMJKSSWJWMUEWNWDSUAWFSUAUDUDWJE
      WIUIWJUFWCWHQUGUHUJUKULVQVCWCVMQPZRZDSTCSTZISTHSTVCERZWLVPWQVCVTVGQPZVMQP
      ZRZDSTCSTABHISSVDVSRZVOXACDSSXBVNWTVCXBVHWSVMQXBVEVTVGQVDVSNOUMUNUNUOUPVF
      WARZXAWPCDSSXCWTWOVCXCWSWCVMQXCVGWBVTQVFWANOUMUQUNUOUPURWRWQWKHISSWQVCWIR
      ZKSTJSTWRWKWPXDVCWCWEVLQPZQPZRCDJKSSVIWDRZWOXFVCXGVMXEWCQXGVJWEVLQVIWDNOU
      MUNUQUOVKWFRZXFWIVCXHXEWHWCQXHVLWGWEQVKWFNOUMUQUQUOURWRXDWJJKSSVCEWIUSUPU
      TUPUTVAVB $.
      $( [14-Jul-2014] $)

    $( Lemma for ~ 4sq .  Sufficient condition to be in ` S ` . $)
    4sqlem3 $p |- ( ( ( A e. ZZ /\ B e. ZZ ) /\ ( C e. ZZ /\ D e. ZZ ) ) ->
      ( ( ( A ^ 2 ) + ( B ^ 2 ) ) + ( ( C ^ 2 ) + ( D ^ 2 ) ) ) e. S ) $=
      ( vc vd cz c2 cexp co caddc wceq wrex va vb wcel wa cv eqid oveq1d oveq2d
      oveq1 eqeq2d rcla42ev mp3an3 2rexbidv 3expa 4sqlem2 sylibr sylan2 ) GNUCZ
      HNUCZUDENUCZFNUCZUDZEOPQZFOPQZRQZGOPQZHOPQZRQZRQZVELUEZOPQZMUEZOPQZRQZRQZ
      SZMNTLNTZVIIUCZURUSVIVISZVQVIUFVPVSVIVEVFVMRQZRQZSLMGHNNVJGSZVOWAVIWBVNVT
      VERWBVKVFVMRVJGOPUIUGUHUJVLHSZWAVIVIWCVTVHVERWCVMVGVFRVLHOPUIUHUHUJUKULVB
      VQUDVIUAUEZOPQZUBUEZOPQZRQZVNRQZSZMNTLNTZUBNTUANTZVRUTVAVQWLWKVQVIVCWGRQZ
      VNRQZSZMNTLNTUAUBEFNNWDESZWJWOLMNNWPWIWNVIWPWHWMVNRWPWEVCWGRWDEOPUIUGUGUJ
      UMWFFSZWOVPLMNNWQWNVOVIWQWMVEVNRWQWGVDVCRWFFOPUIUHUGUJUMUKUNABCDVIIJUAUBL
      MKUOUPUQ $.
      $( [14-Jul-2014] $)

    $( Lemma for ~ 4sqlem4 . $)
    4sqlem4a $p |- ( ( A e. Z[i] /\ B e. Z[i] ) ->
      ( ( ( abs ` A ) ^ 2 ) + ( ( abs ` B ) ^ 2 ) ) e. S ) $=
      ( cgz wcel wa cabs cfv c2 cexp co caddc cre cz cim cc wceq gzcn absvalsq2
      syl oveqan12d elgz simp2bi simp3bi jca 4sqlem3 syl2an eqeltrd ) EJKZFJKZL
      EMNOPQZFMNOPQZRQESNZOPQEUANZOPQRQZFSNZOPQFUANZOPQRQZRQZGUOUPUQVAURVDRUOEU
      BKZUQVAUCEUDEUEUFUPFUBKZURVDUCFUDFUEUFUGUOUSTKZUTTKZLVBTKZVCTKZLVEGKUPUOV
      HVIUOVFVHVIEUHZUIUOVFVHVIVLUJUKUPVJVKUPVGVJVKFUHZUIUPVGVJVKVMUJUKABCDUSUT
      VBVCGHIULUMUN $.
      $( [14-Jul-2014] $)

    ${
      $d u A $.
      $( Lemma for ~ 4sq .  We can express the four-square property more
         compactly in terms of gaussian integers, because the norms of gaussian
         integers are exactly sums of two squares. $)
      4sqlem4 $p |- ( A e. S <-> E. u e. Z[i] E. v e. Z[i]
        A = ( ( ( abs ` u ) ^ 2 ) + ( ( abs ` v ) ^ 2 ) ) ) $=
        ( wcel cfv c2 cexp co caddc wceq cgz wrex cz va vb vc cabs 4sqlem2 cmul
        vd cv wa ci gzreim adantr adantl cre cim cc gzcn syl absvalsq2 zre crre
        syl2an oveq1d crim oveq12d eqtrd oveqan12d eqcomd fveq2 eqeq2d rcla42ev
        cr oveq2d eqeq1 2rexbidv syl5ibrcom rexlimdvva rexlimivv sylbi 4sqlem4a
        syl3anc wi eleq1a impbii ) GHKZGFUHZUDLZMNOZEUHZUDLZMNOZPOZQZERSFRSZWEG
        UAUHZMNOZUBUHZMNOZPOZUCUHZMNOZUGUHZMNOZPOZPOZQZUGTSUCTSZUBTSUATSWNABCDG
        HIUAUBUCUGJUEXGWNUAUBTTWOTKZWQTKZUIZXFWNUCUGTTXJWTTKZXBTKZUIZUIZWNXFXEW
        LQZERSFRSZXNWOUJWQUFOPOZRKZWTUJXBUFOPOZRKZXEXQUDLZMNOZXSUDLZMNOZPOZQZXP
        XJXRXMWOWQUKZULXMXTXJWTXBUKZUMXNYEXEXJXMYBWSYDXDPXJYBXQUNLZMNOZXQUOLZMN
        OZPOZWSXJXQUPKZYBYMQXJXRYNYGXQUQURXQUSURXJYJWPYLWRPXJYIWOMNXHWOVLKZWQVL
        KZYIWOQXIWOUTZWQUTZWOWQVAVBVCXJYKWQMNXHYOYPYKWQQXIYQYRWOWQVDVBVCVEVFXMY
        DXSUNLZMNOZXSUOLZMNOZPOZXDXMXSUPKZYDUUCQXMXTUUDYHXSUQURXSUSURXMYTXAUUBX
        CPXMYSWTMNXKWTVLKZXBVLKZYSWTQXLWTUTZXBUTZWTXBVAVBVCXMUUAXBMNXKUUEUUFUUA
        XBQXLUUGUUHWTXBVDVBVCVEVFVGVHXOYFXEYBWKPOZQFEXQXSRRWFXQQZWLUUIXEUUJWHYB
        WKPUUJWGYAMNWFXQUDVIVCVCVJWIXSQZUUIYEXEUUKWKYDYBPUUKWJYCMNWIXSUDVIVCVMV
        JVKWAXFWMXOFERRGXEWLVNVOVPVQVRVSWMWEFERRWFRKWIRKUIWLHKWMWEWBABCDWFWIHIJ
        VTWLHGWCURVRWD $.
        $( [14-Jul-2014] $)

      mul4sq.1 $e |- ( ph -> A e. Z[i] ) $.
      mul4sq.2 $e |- ( ph -> B e. Z[i] ) $.
      mul4sq.3 $e |- ( ph -> C e. Z[i] ) $.
      mul4sq.4 $e |- ( ph -> D e. Z[i] ) $.
      mul4sq.5 $e |- X = ( ( ( abs ` A ) ^ 2 ) + ( ( abs ` B ) ^ 2 ) ) $.
      mul4sq.6 $e |- Y = ( ( ( abs ` C ) ^ 2 ) + ( ( abs ` D ) ^ 2 ) ) $.
      mul4sq.7 $e |- ( ph -> M e. NN ) $.
      mul4sq.8 $e |- ( ph -> ( ( A - C ) / M ) e. Z[i] ) $.
      mul4sq.9 $e |- ( ph -> ( ( B - D ) / M ) e. Z[i] ) $.
      mul4sq.10 $e |- ( ph -> ( X / M ) e. NN0 ) $.
      $( Lemma for ~ mul4sq : algebraic manipulations.  The extra assumptions
         involving ` M ` are for a part of ~ 4sqlem16 which needs to know not
         just that the product is a sum of squares, but also that it preserves
         divisibility by ` M ` . $)
      mul4sqlem $p |- ( ph -> ( ( X / M ) x. ( Y / M ) ) e. S ) $=
        ( ccj cfv cmul co caddc cdiv cabs c2 cexp cmin wcel wceq cgz gzcn mulcl
        cc syl syl2anc absvalsq cjcl eqeltrd addcom oveq2d mul4 syl22anc 3eqtrd
        cjmul oveq12d adddi syl3anc eqtr3d eqtr4d add42 addcl adddir cjadd cjcj
        3eqtr4d oveq1d eqtrd mulcom subcl cjsub subdir subdi subadd4 ppncan cc0
        syl5eq wne cn nncn nnne0 absdiv cr cle wbr nnre nnnn0 nn0ge0 3syl absid
        cn0 abscl recnd sqdiv nnsqcl divdir syl112anc wa syl5eqel jca divmuldiv
        sqval nncan addsub4 wi idi divsubdir divass cjdiv cjre nn0z zgz gzmulcl
        cz gzcjcl gzaddcl gzsubcl nnncan1 3eqtr3d 4sqlem4a eqeltrrd ) AFUFUGZHU
        HUIZGIUFUGZUHUIZUJUIZLUKUIZULUGZUMUNUIZYSIUHUIZGHUFUGZUHUIZUOUIZLUKUIZU
        LUGZUMUNUIZUJUIZMLUKUIZNLUKUIUHUIZJAUUCULUGZUMUNUIZUUJULUGZUMUNUIZUJUIZ
        LUMUNUIZUKUIZMNUHUIZUVBUKUIZUUNUUPAUVAUVDUVBUKAFHUHUIZULUGUMUNUIZGIUHUI
        ZULUGUMUNUIZUJUIZFIUHUIZULUGUMUNUIZGHUHUIZULUGUMUNUIZUJUIZUJUIZFYSUHUIZ
        GGUFUGZUHUIZUJUIZHUUHUHUIZIUUAUHUIZUJUIZUHUIZUVAUVDAUVGUVLUJUIZUVNUVIUJ
        UIZUJUIZUVQUWCUHUIZUVSUWCUHUIZUJUIZUVPUWDAUWEUWHUWFUWIUJAUVLUVGUJUIZUWE
        UWHAUVLVAUPZUVGVAUPZUWKUWEUQAUVLUVKUVKUFUGZUHUIZVAAUVKVAUPZUVLUWOUQAFVA
        UPZIVAUPZUWPAFURUPZUWQPFUSVBZAIURUPUWRSIUSVBZFIUTVCZUVKVDVBZAUWPUWNVAUP
        ZUWOVAUPUXBAUWPUXDUXBUVKVEVBUVKUWNUTVCVFZAUVGUVFUVFUFUGZUHUIZVAAUVFVAUP
        ZUVGUXGUQAUWQHVAUPZUXHUWTAHURUPUXIRHUSVBZFHUTVCZUVFVDVBZAUXHUXFVAUPZUXG
        VAUPUXKAUXHUXMUXKUVFVEVBUVFUXFUTVCVFZUVLUVGVGVCZAUWEUVQUWAUHUIZUVQUWBUH
        UIZUJUIZUWKUWHAUVGUXPUVLUXQUJAUVGUXGUVFYSUUHUHUIZUHUIZUXPUXLAUXFUXSUVFU
        HAUWQUXIUXFUXSUQUWTUXJFHVLVCZVHAUWQUXIYSVAUPZUUHVAUPZUXTUXPUQUWTUXJAUWQ
        UYBUWTFVEVBZAUXIUYCUXJHVEVBZFHYSUUHVIVJVKAUVLUWOUVKYSUUAUHUIZUHUIZUXQUX
        CAUWNUYFUVKUHAUWQUWRUWNUYFUQUWTUXAFIVLVCZVHAUWQUWRUYBUUAVAUPZUYGUXQUQUW
        TUXAUYDAUWRUYIUXAIVEVBZFIYSUUAVIVJVKVMUXOAUVQVAUPZUWAVAUPZUWBVAUPZUWHUX
        RUQAUWQUYBUYKUWTUYDFYSUTVCZAUXIUYCUYLUXJUYEHUUHUTVCZAUWRUYIUYMUXAUYJIUU
        AUTVCZUVQUWAUWBVNVOWCVPAUWFUVSUWAUHUIZUVSUWBUHUIZUJUIZUWIAUVNUYQUVIUYRU
        JAUVNUVMUVMUFUGZUHUIZUVMUVRUUHUHUIZUHUIZUYQAUVMVAUPZUVNVUAUQAGVAUPZUXIV
        UDAGURUPZVUEQGUSVBZUXJGHUTVCZUVMVDVBZAUYTVUBUVMUHAVUEUXIUYTVUBUQVUGUXJG
        HVLVCZVHAVUEUXIUVRVAUPZUYCVUCUYQUQVUGUXJAVUEVUKVUGGVEVBZUYEGHUVRUUHVIVJ
        VKAUVIUVHUVHUFUGZUHUIZUVHUVRUUAUHUIZUHUIZUYRAUVHVAUPZUVIVUNUQAVUEUWRVUQ
        VUGUXAGIUTVCZUVHVDVBZAVUMVUOUVHUHAVUEUWRVUMVUOUQVUGUXAGIVLVCZVHAVUEUWRV
        UKUYIVUPUYRUQVUGUXAVULUYJGIUVRUUAVIVJVKVMAUVSVAUPZUYLUYMUWIUYSUQAVUEVUK
        VVAVUGVULGUVRUTVCZUYOUYPUVSUWAUWBVNVOVQVMAUWMUVIVAUPZUWLUVNVAUPZUVPUWGU
        QUXNAUVIVUNVAVUSAVUQVUMVAUPZVUNVAUPVURAVUQVVEVURUVHVEVBUVHVUMUTVCVFZUXE
        AUVNVUAVAVUIAVUDUYTVAUPZVUAVAUPVUHAVUDVVGVUHUVMVEVBUVMUYTUTVCVFZUVGUVIU
        VLUVNVRVJAUYKVVAUWCVAUPZUWDUWJUQUYNVVBAUYLUYMVVIUYOUYPUWAUWBVSVCZUVQUVS
        UWCVTVOWCAUVAUVJYTUVRIUHUIZUHUIZUUIFUUAUHUIZUHUIZUJUIZUJUIZUVOVVOUOUIZU
        JUIZUVPAUURVVPUUTVVQUJAUURUUCUUCUFUGZUHUIZUUCFUUHUHUIZVVKUJUIZUHUIZVVPA
        UUCVAUPZUURVVTUQAYTVAUPZUUBVAUPZVWDAUYBUXIVWEUYDUXJYSHUTVCZAVUEUYIVWFVU
        GUYJGUUAUTVCZYTUUBVSVCZUUCVDVBAVVSVWBUUCUHAVVSYTUFUGZUUBUFUGZUJUIZVWBAV
        WEVWFVVSVWLUQVWGVWHYTUUBWAVCAVWJVWAVWKVVKUJAVWJYSUFUGZUUHUHUIZVWAAUYBUX
        IVWJVWNUQUYDUXJYSHVLVCAVWMFUUHUHAUWQVWMFUQUWTFWBVBZWDWEAVWKUVRUUAUFUGZU
        HUIZVVKAVUEUYIVWKVWQUQVUGUYJGUUAVLVCAVWPIUVRUHAUWRVWPIUQUXAIWBVBVHWEVMW
        EVHAYTVWBUHUIZUUBVWBUHUIZUJUIZUVGVVLUJUIZVVNUVIUJUIZUJUIZVWCVVPAVWRVXAV
        WSVXBUJAVWRYTVWAUHUIZVVLUJUIZVXAAVWEVWAVAUPZVVKVAUPZVWRVXEUQVWGAUWQUYCV
        XFUWTUYEFUUHUTVCZAVUKUWRVXGVULUXAUVRIUTVCZYTVWAVVKVNVOAVXDUVGVVLUJAVXDU
        XGUVGAHYSUHUIZVWAUHUIZHFUHUIZUXSUHUIZVXDUXGAUXIUYBUWQUYCVXKVXMUQUXJUYDU
        WTUYEHYSFUUHVIVJAYTVXJVWAUHAUYBUXIYTVXJUQUYDUXJYSHWFVCWDAUVFVXLUXFUXSUH
        AUWQUXIUVFVXLUQUWTUXJFHWFVCUYAVMWCUXLVQWDWEAVWSUUBVWAUHUIZUUBVVKUHUIZUJ
        UIZVXBAVWFVXFVXGVWSVXPUQVWHVXHVXIUUBVWAVVKVNVOAVXNVVNVXOUVIUJAVXNUUBUUH
        FUHUIZUHUIZUUIUUAFUHUIZUHUIZVVNAVWAVXQUUBUHAUWQUYCVWAVXQUQUWTUYEFUUHWFV
        CVHAVUEUYIUYCUWQVXRVXTUQVUGUYJUYEUWTGUUAUUHFVIVJAVXSVVMUUIUHAUYIUWQVXSV
        VMUQUYJUWTUUAFWFVCVHVKAVXOVUNUVIAUUBIUVRUHUIZUHUIZUVHUUAUVRUHUIZUHUIZVX
        OVUNAVUEUYIUWRVUKVYBVYDUQVUGUYJUXAVULGUUAIUVRVIVJAVVKVYAUUBUHAVUKUWRVVK
        VYAUQVULUXAUVRIWFVCVHAVUMVYCUVHUHAVUMVUOVYCVUTAVUKUYIVUOVYCUQVULUYJUVRU
        UAWFVCWEVHWCVUSVQVMWEVMAVWEVWFVWBVAUPZVWCVWTUQVWGVWHAVXFVXGVYEVXHVXIVWA
        VVKVSVCYTUUBVWBVTVOAUWMVVCVVLVAUPZVVNVAUPZVVPVXCUQUXNVVFAVWEVXGVYFVWGVX
        IYTVVKUTVCZAUUIVAUPZVVMVAUPZVYGAVUEUYCVYIVUGUYEGUUHUTVCZAUWQUYIVYJUWTUY
        JFUUAUTVCZUUIVVMUTVCZUVGUVIVVLVVNVRVJWCVKZAUUTUUJUUJUFUGZUHUIZUUJVVMUVR
        HUHUIZUOUIZUHUIZVVQAUUJVAUPZUUTVYPUQAUUGVAUPZVYIVYTAUYBUWRWUAUYDUXAYSIU
        TVCZVYKUUGUUIWGVCZUUJVDVBAVYOVYRUUJUHAVYOUUGUFUGZUUIUFUGZUOUIZVYRAWUAVY
        IVYOWUFUQWUBVYKUUGUUIWHVCAWUDVVMWUEVYQUOAWUDVWMUUAUHUIZVVMAUYBUWRWUDWUG
        UQUYDUXAYSIVLVCAVWMFUUAUHVWOWDWEAWUEUVRUUHUFUGZUHUIZVYQAVUEUYCWUEWUIUQV
        UGUYEGUUHVLVCAWUHHUVRUHAUXIWUHHUQUXJHWBVBVHWEVMWEVHAVYSUUGVYRUHUIZUUIVY
        RUHUIZUOUIZUVLVVLUOUIZVVNUVNUOUIZUOUIZVVQAWUAVYIVYRVAUPZVYSWULUQWUBVYKA
        VYJVYQVAUPZWUPVYLAVUKUXIWUQVULUXJUVRHUTVCZVVMVYQWGVCUUGUUIVYRWIVOAWUJWU
        MWUKWUNUOAWUJUUGVVMUHUIZUUGVYQUHUIZUOUIZWUMAWUAVYJWUQWUJWVAUQWUBVYLWURU
        UGVVMVYQWJVOAWUSUVLWUTVVLUOAWUSUWOUVLAIYSUHUIZVVMUHUIZIFUHUIZUYFUHUIZWU
        SUWOAUWRUYBUWQUYIWVCWVEUQUXAUYDUWTUYJIYSFUUAVIVJAUUGWVBVVMUHAUYBUWRUUGW
        VBUQUYDUXAYSIWFVCWDAUVKWVDUWNUYFUHAUWQUWRUVKWVDUQUWTUXAFIWFVCUYHVMWCUXC
        VQAWUTUUGHUVRUHUIZUHUIZYTVYAUHUIZVVLAVYQWVFUUGUHAVUKUXIVYQWVFUQVULUXJUV
        RHWFVCZVHAUYBUWRUXIVUKWVGWVHUQUYDUXAUXJVULYSIHUVRVIVJAVYAVVKYTUHAUWRVUK
        VYAVVKUQUXAVULIUVRWFVCVHVKVMWEAWUKVVNUUIVYQUHUIZUOUIZWUNAVYIVYJWUQWUKWV
        KUQVYKVYLWURUUIVVMVYQWJVOAWVJUVNVVNUOAWVJVUAUVNAWVJUUIWVFUHUIZUVMUUHUVR
        UHUIZUHUIZVUAAVYQWVFUUIUHWVIVHAVUEUYCUXIVUKWVLWVNUQVUGUYEUXJVULGUUHHUVR
        VIVJAWVMUYTUVMUHAWVMVUBUYTAUYCVUKWVMVUBUQUYEVULUUHUVRWFVCVUJVQVHVKVUIVQ
        VHWEVMAUWLVYFVYGVVDWUOVVQUQUXEVYHVYMVVHUVLVVLVVNUVNWKVJVKVKZVMAUVJVAUPZ
        VVOVAUPZUVOVAUPZVVRUVPUQAUWMVVCWVPUXNVVFUVGUVIVSVCZAVYFVYGWVQVYHVYMVVLV
        VNVSVCZAUWLVVDWVRUXEVVHUVLUVNVSVCZUVJVVOUVOWLVOWEAMUVTNUWCUHAMFULUGUMUN
        UIZGULUGUMUNUIZUJUIZUVTTAWWBUVQWWCUVSUJAUWQWWBUVQUQUWTFVDVBZAVUEWWCUVSU
        QVUGGVDVBZVMWNZANHULUGUMUNUIZIULUGUMUNUIZUJUIUWCUAAWWHUWAWWIUWBUJAUXIWW
        HUWAUQUXJHVDVBAUWRWWIUWBUQUXAIVDVBVMWNZVMWCWDAUUNUURUVBUKUIZUUTUVBUKUIZ
        UJUIZUVCAUUFWWKUUMWWLUJAUUFUUQLUKUIZUMUNUIZWWKAUUEWWNUMUNAUUEUUQLULUGZU
        KUIZWWNAVWDLVAUPZLWMWOZUUEWWQUQVWIALWPUPZWWRUBLWQVBZAWWTWWSUBLWRVBZUUCL
        WSVOAWWPLUUQUKALWTUPZWMLXAXBZWWPLUQAWWTWXCUBLXCVBZAWWTLXHUPWXDUBLXDLXEX
        FLXGVCZVHWEWDAUUQVAUPWWRWWSWWOWWKUQAUUQAVWDUUQWTUPVWIUUCXIVBXJWXAWXBUUQ
        LXKVOWEAUUMUUSLUKUIZUMUNUIZWWLAUULWXGUMUNAUULUUSWWPUKUIZWXGAVYTWWRWWSUU
        LWXIUQWUCWXAWXBUUJLWSVOAWWPLUUSUKWXFVHWEWDAUUSVAUPWWRWWSWXHWWLUQAUUSAVY
        TUUSWTUPWUCUUJXIVBXJWXAWXBUUSLXKVOWEVMAUURVAUPUUTVAUPUVBVAUPZUVBWMWOZUV
        CWWMUQAUURVVPVAVYNAWVPWVQVVPVAUPWVSWVTUVJVVOVSVCVFAUUTVVQVAWVOAWVRWVQVV
        QVAUPWWAWVTUVOVVOWGVCVFAUVBWPUPZWXJAWWTWXLUBLXLVBZUVBWQVBAWXLWXKWXMUVBW
        RVBUURUUTUVBXMXNVQAUUPUVDLLUHUIZUKUIZUVEAMVAUPZNVAUPWWRWWSXOZWXQUUPWXOU
        QAMWWDVATAWWBVAUPWWCVAUPWWDVAUPAWWBUVQVAWWEUYNVFAWWCUVSVAWWFVVBVFWWBWWC
        VSVCXPZANUWCVAWWJVVJVFAWWRWWSWXAWXBXQZWXSMNLLXRVJAUVBWXNUVDUKAWWRUVBWXN
        UQWXALXSVBVHVQWCAUUDURUPUUKURUPUUNJUPAUUDUUOYSFHUOUIZLUKUIZUHUIZGGIUOUI
        ZLUKUIZUFUGZUHUIZUJUIZUOUIZURAUUDMYSWXTUHUIZGWYCUFUGZUHUIZUJUIZUOUIZLUK
        UIZUUOWYLLUKUIZUOUIZWYHAUUCWYMLUKAMMUUCUOUIZUOUIZUUCWYMAWXPVWDWYRUUCUQW
        XRVWIMUUCXTVCAWYQWYLMUOAUVTUUCUOUIZUVQYTUOUIZUVSUUBUOUIZUJUIZWYQWYLAUYK
        VVAVWEVWFWYSXUBUQUYNVVBVWGVWHUVQUVSYTUUBYAVJAMUVTUUCUOWWGWDAWYIWYTWYKXU
        AUJAWYIYSFUHUIZYTUOUIZWYTAUYBUWQUXIWYIXUDUQUYDUWTUXJYSFHWJVOAXUCUVQYTUO
        AUYBUWQXUCUVQUQUYDUWTYSFWFVCWDWEAWYKGUVRUUAUOUIZUHUIZXUAAWYJXUEGUHAVUEU
        WRWYJXUEUQVUGUXAGIWHVCVHAVUEVUKUYIXUFXUAUQVUGVULUYJGUVRUUAWJVOWEVMWCVHV
        PWDAWXPWYLVAUPZWXQWYNWYPUQWXRAWYIVAUPZWYKVAUPZXUGAUYBWXTVAUPZXUHUYDAUWQ
        UXIXUJUWTUXJFHWGVCZYSWXTUTVCZAVUEWYJVAUPZXUIVUGAWYCVAUPZXUMAVUEUWRXUNVU
        GUXAGIWGVCZWYCVEVBZGWYJUTVCZWYIWYKVSVCAWXQYBWXSYCMWYLLYDVOAWYOWYGUUOUOA
        WYOWYILUKUIZWYKLUKUIZUJUIZWYGAXUHXUIWXQWYOXUTUQXULXUQWXSWYIWYKLXMVOAXUR
        WYBXUSWYFUJAUYBXUJWXQXURWYBUQUYDXUKWXSYSWXTLYEVOAXUSGWYJLUKUIZUHUIZWYFA
        VUEXUMWXQXUSXVBUQVUGXUPWXSGWYJLYEVOAWYEXVAGUHAWYEWYJLUFUGZUKUIZXVAAXUNW
        WRWWSWYEXVDUQXUOWXAWXBWYCLYFVOAXVCLWYJUKAWXCXVCLUQWXELYGVBZVHWEVHVQVMWE
        VHVKAUUOURUPZWYGURUPZWYHURUPAUUOXHUPUUOYKUPXVFUEUUOYHUUOYIXFAWYBURUPZWY
        FURUPZXVGAYSURUPZWYAURUPZXVHAUWSXVJPFYLVBZUCYSWYAYJVCAVUFWYEURUPZXVIQAW
        YDURUPZXVMUDWYDYLVBGWYEYJVCWYBWYFYMVCUUOWYGYNVCVFAUUKGWYAUFUGZUHUIZYSWY
        DUHUIZUOUIZURAGWXTUFUGZUHUIZYSWYCUHUIZUOUIZLUKUIZXVTLUKUIZXWALUKUIZUOUI
        ZUUKXVRAXVTVAUPZXWAVAUPZWXQXWCXWFUQAVUEXVSVAUPZXWGVUGAXUJXWIXUKWXTVEVBZ
        GXVSUTVCAUYBXUNXWHUYDXUOYSWYCUTVCWXSXVTXWALYDVOAXWBUUJLUKAXWBGYSUHUIZUU
        IUOUIZXWKUUGUOUIZUOUIZUUJAXVTXWLXWAXWMUOAXVTGYSUUHUOUIZUHUIZXWLAXVSXWOG
        UHAUWQUXIXVSXWOUQUWTUXJFHWHVCVHAVUEUYBUYCXWPXWLUQVUGUYDUYEGYSUUHWJVOWEA
        XWAYSGUHUIZUUGUOUIZXWMAUYBVUEUWRXWAXWRUQUYDVUGUXAYSGIWJVOAXWQXWKUUGUOAU
        YBVUEXWQXWKUQUYDVUGYSGWFVCWDWEVMAXWKVAUPZVYIWUAXWNUUJUQAVUEUYBXWSVUGUYD
        GYSUTVCVYKWUBXWKUUIUUGYOVOWEWDAXWDXVPXWEXVQUOAXWDGXVSLUKUIZUHUIZXVPAVUE
        XWIWXQXWDXXAUQVUGXWJWXSGXVSLYEVOAXVOXWTGUHAXVOXVSXVCUKUIZXWTAXUJWWRWWSX
        VOXXBUQXUKWXAWXBWXTLYFVOAXVCLXVSUKXVEVHWEVHVQAUYBXUNWXQXWEXVQUQUYDXUOWX
        SYSWYCLYEVOVMYPAXVPURUPZXVQURUPZXVRURUPAVUFXVOURUPZXXCQAXVKXXEUCWYAYLVB
        GXVOYJVCAXVJXVNXXDXVLUDYSWYDYJVCXVPXVQYNVCVFBCDEUUDUUKJKOYQVCYR $.
        $( [14-Jul-2014] $)
    $}

    $( Euler's four-square identity:  The product of two sums of four squares
       is also a sum of four squares.  This is usually quoted as an explicit
       formula involving eight real variables; we save some time by working
       with complex numbers (gaussian integers) instead, so that we only have
       to work with four variables, and also hiding the actual formula for the
       product in the proof of ~ mul4sqlem .  (For the curious, the explicit
       formula that is used is
       ` ( | a | ^ 2 + | b | ^ 2 ) ( | c | ^ 2 + | d | ^ 2 ) = `
       ` | a * x. c + b x. d * | ^ 2 + | a * x. d - b x. c * | ^ 2 ` .)
       (Contributed by Mario Carneiro, 14-Jul-2014.) $)
    mul4sq $p |- ( ( A e. S /\ B e. S ) -> ( A x. B ) e. S ) $=
      ( va vb vc vd wcel co wceq cgz wrex wa cn0 cv cabs cfv c2 cexp caddc cmul
      4sqlem4 reeanv c1 cdiv simpll gzabssqcl syl simprl nn0addcl syl2anc nn0cn
      cc div1 3syl simplr simprr oveq12d eqid cn 1nn a1i gzsubcl adantr eqeltrd
      cmin adantl mul4sqlem eqeltrrd oveq12 eleq1d syl5ibrcom syl5bir rexlimivv
      gzcn rexlimdvva sylbir syl2anb ) EGNEJUAZUBUCUDUEOZKUAZUBUCUDUEOZUFOZPZKQ
      RZJQRZFLUAZUBUCUDUEOZMUAZUBUCUDUEOZUFOZPZMQRZLQRZEFUGOZGNZFGNABCDKJEGHIUH
      ABCDMLFGHIUHWLWTSWKWSSZLQRJQRXBWKWSJLQQUIXCXBJLQQXCWJWRSZMQRKQRWEQNZWMQNZ
      SZXBWJWRKMQQUIXGXDXBKMQQXGWGQNZWOQNZSZSZXBXDWIWQUGOZGNXKWIUJUKOZWQUJUKOZU
      GOXLGXKXMWIXNWQUGXKWITNZWIUSNXMWIPXKWFTNZWHTNZXOXKXEXPXEXFXJULZWEUMUNXKXH
      XQXGXHXIUOZWGUMUNWFWHUPUQZWIURWIUTVAZXKWQTNZWQUSNXNWQPXKWNTNZWPTNZYBXKXFY
      CXEXFXJVBZWMUMUNXKXIYDXGXHXIVCZWOUMUNWNWPUPUQWQURWQUTVAVDXKABCDWEWGWMWOGH
      UJWIWQIXRXSYEYFWIVEWQVEUJVFNXKVGVHXKWEWMVLOZUJUKOZYGQXKYGQNZYGUSNYHYGPXGY
      IXJWEWMVIVJZYGWAYGUTVAYJVKXKWGWOVLOZUJUKOZYKQXKYKQNZYKUSNYLYKPXJYMXGWGWOV
      IVMZYKWAYKUTVAYNVKXKXMWITYAXTVKVNVOXDXAXLGEWIFWQUGVPVQVRWBVSVTWCWD $.
      $( [14-Jul-2014] $)

    ${
      4sqlem5.2 $e |- ( ph -> A e. ZZ ) $.
      4sqlem5.3 $e |- ( ph -> M e. NN ) $.
      4sqlem5.4 $e |- B = ( ( ( A + ( M / 2 ) ) mod M ) - ( M / 2 ) ) $.
      $( Lemma for ~ 4sq . $)
      4sqlem5 $p |- ( ph -> ( B e. ZZ /\ ( ( A - B ) / M ) e. ZZ ) ) $=
        ( cz wcel co cc syl syl2anc cmin cdiv wceq zcn c2 caddc cmo cr crp nnre
        zre rehalfcl readdcl nnrp modcl recnd subcl syl5eqel nncan cmul cc0 wne
        divcan1 syl3anc oveq2i subsub3 syl5eq oveq1d moddifz eqeltrd nnz zmulcl
        cn nnne0 eqeltrrd zsubcl jca ) AGOPFGUAQZJUBQZOPZAFVRUAQZGOAFRPZGRPZWAG
        UCAFOPZWBLFUDSZAGFJUEUBQZUFQZJUGQZWFUAQZRNAWHRPZWFRPZWIRPAWHAWGUHPZJUIP
        ZWHUHPAFUHPZWFUHPZWLAWDWNLFUKSAJUHPZWOAJVMPZWPMJUJSZJULSZFWFUMTZAWQWMMJ
        UNSZWGJUOTUPZAWFWSUPZWHWFUQTURZFGUSTAWDVROPWAOPLAVSJUTQZVROAVRRPZJRPJVA
        VBZXEVRUCAWBWCXFWEXDFGUQTAJWRUPAWQXGMJVNSVRJVCVDAVTJOPZXEOPAVSWGWHUAQZJ
        UBQZOAVRXIJUBAVRFWIUAQZXIGWIFUANVEAWBWJWKXKXIUCWEXBXCFWHWFVFVDVGVHAWLWM
        XJOPWTXAWGJVITVJZAWQXHMJVKSVSJVLTVOFVRVPTVOXLVQ $.
        $( [15-Jul-2014] $)

      $( Lemma for ~ 4sq . $)
      4sqlem6 $p |- ( ph -> ( -u ( M / 2 ) <_ B /\ B < ( M / 2 ) ) ) $=
        ( co wbr clt cr wcel syl c2 cdiv cneg cle cc0 cmin caddc cmo crp cz zre
        cn nnre rehalfcl readdcl syl2anc modge0 wb 0re a1i modcl lesub1 syl3anc
        nnrp mpbid df-neg 3brtr4g modlt cc wceq recnd 2halves breqtrrd ltsubadd
        mpbird syl5eqbr jca ) AJUAUBOZUCZGUDPGVRQPAUEVRUFOZFVRUGOZJUHOZVRUFOZVS
        GUDAUEWBUDPZVTWCUDPZAWARSZJUISZWDAFRSZVRRSZWFAFUJSWHLFUKTAJRSZWIAJULSZW
        JMJUMTZJUNTZFVRUOUPZAWKWGMJVDTZWAJUQUPAUERSZWBRSZWIWDWEURWPAUSUTAWFWGWQ
        WNWOWAJVAUPZWMUEWBVRVBVCVEVRVFNVGAGWCVRQNAWCVRQPZWBVRVRUGOZQPZAWBJWTQAW
        FWGWBJQPWNWOWAJVHUPAJVISWTJVJAJWLVKJVLTVMAWQWIWIWSXAURWRWMWMWBVRVRVNVCV
        OVPVQ $.
        $( [15-Jul-2014] $)

      $( Lemma for ~ 4sq . $)
      4sqlem7 $p |- ( ph -> ( B ^ 2 ) <_ ( ( ( M ^ 2 ) / 2 ) / 2 ) ) $=
        ( c2 co cdiv cle wcel syl cexp wbr cneg cr wa wb cz cmin 4sqlem5 simpld
        cc0 zre crp nnrp rphalfcl rpre rpge0 lenegsq syl3anc clt 4sqlem6 simprd
        cn wi ltle syl2anc mpd lenegcon1 mpbid mpbi2and cmul wceq 2cn a1i sqval
        cc oveq2d wne nncn 2ne0 sqdiv sqcl divdiv1 syl122anc 3eqtr4d breqtrd )
        AGOUAPZJOQPZOUAPZJOUAPZOQPOQPZRAGWHRUBZGUCWHRUBZWGWIRUBZAGUDSZWHUDSZUKW
        HRUBZWLWMUEWNUFAGUGSZWOAWRFGUHPJQPUGSABCDEFGHIJKLMNUIUJGULTZAWHUMSZWPAJ
        UMSZWTAJVCSZXAMJUNTJUOTZWHUPTZAWTWQXCWHUQTGWHURUSAGWHUTUBZWLAWHUCGRUBZX
        EABCDEFGHIJKLMNVAZVBAWOWPXEWLVDWSXDGWHVEVFVGAXFWMAXFXEXGUJAWPWOXFWMUFXD
        WSWHGVHVFVIVJAWJOOUAPZQPZWJOOVKPZQPZWIWKAXHXJWJQAOVPSZXHXJVLXLAVMVNZOVO
        TVQAJVPSZXLOUKVRZWIXIVLAXBXNMJVSTZXMXOAVTVNZJOWAUSAWJVPSZXLXOXLXOWKXKVL
        AXNXRXPJWBTXMXQXMXQWJOOWCWDWEWF $.
        $( [15-Jul-2014] $)

      $( Lemma for ~ 4sq . $)
      4sqlem8 $p |- ( ph -> M || ( ( A ^ 2 ) - ( B ^ 2 ) ) ) $=
        ( co cdivides cz wcel syl syl2anc cmin wbr cexp cdiv 4sqlem5 simprd cc0
        c2 wne wb cn nnz nnne0 simpld zsubcl divides2 syl3anc mpbird caddc cmul
        zaddcl dvdsmul2 cc wceq zcn subsq breqtrrd wa idi zsqcl dvdstr mp2and
        wi ) AJFGUAOZPUBZVNFUHUCOZGUHUCOZUAOZPUBZJVRPUBZAVOVNJUDOQRZAGQRZWAABCD
        EFGHIJKLMNUEZUFAJQRZJUGUIZVNQRZVOWAUJAJUKRZWDMJULSZAWGWEMJUMSAFQRZWBWFL
        AWBWAWCUNZFGUOTZJVNUPUQURAVNFGUSOZVNUTOZVRPAWLQRZWFVNWMPUBAWIWBWNLWJFGV
        ATWKWLVNVBTAFVCRZGVCRZVRWMVDAWIWOLFVESAWBWPWJGVESFGVFTVGAWDWFVRQRZVOVSV
        HVTVMWHAWFVMWKVIAVPQRZVQQRZWQAWIWRLFVJSAWBWSWJGVJSVPVQUOTJVNVRVKUQVL $.
        $( [15-Jul-2014] $)

      ${
        4sqlem9.5 $e |- ( ( ph /\ ps ) -> ( B ^ 2 ) = 0 ) $.
        $( Lemma for ~ 4sq . $)
        4sqlem9 $p |- ( ( ph /\ ps ) -> ( M ^ 2 ) || ( A ^ 2 ) ) $=
          ( co cz wcel syl wa cdivides wbr c2 cexp cdiv cmin wceq cc wb 4sqlem5
          cc0 simpld zcn sqeq0 biimpa syldan oveq2d adantr subid1 oveq1d simprd
          eqtrd eqeltrrd wne cn nnz nnne0 divides2 syl3anc mpbird syl2anc mpbid
          dvdssq ) ABUAZKGUBUCZKUDUEQGUDUEQUBUCZVOVPGKUFQZRSZVOGHUGQZKUFQZVRRVO
          VTGKUFVOVTGULUGQZGVOHULGUGABHUDUEQULUHZHULUHZPAWCWDAHUISZWCWDUJAHRSZW
          EAWFWARSZACDEFGHIJKLMNOUKZUMHUNTHUOTUPUQURVOGUISZWBGUHVOGRSZWIAWJBMUS
          ZGUNTGUTTVCVAAWGBAWFWGWHVBUSVDAVPVSUJZBAKRSZKULVEZWJWLAKVFSZWMNKVGTZA
          WOWNNKVHTMKGVIVJUSVKVOWMWJVPVQUJAWMBWPUSWKKGVNVLVM $.
          $( [15-Jul-2014] $)
      $}

      4sqlem10.5 $e |- ( ( ph /\ ps ) ->
        ( ( ( ( M ^ 2 ) / 2 ) / 2 ) - ( B ^ 2 ) ) = 0 ) $.
      $( Lemma for ~ 4sq . $)
      4sqlem10 $p |- ( ( ph /\ ps ) ->
        ( M ^ 2 ) || ( ( A ^ 2 ) - ( ( ( M ^ 2 ) / 2 ) / 2 ) ) ) $=
        ( c2 co wcel syl wa cexp cdiv caddc cmul cmin cdivides wbr cmo cc0 wceq
        cneg wn wne cr clt cz 4sqlem5 adantr simpld zre cn rehalfcl cle 4sqlem6
        nnre simprd ltne syl3anc necomd df-ne sylib wo cc 2cn sqval oveq2d nncn
        a1i 2ne0 sqdiv sqcl 3syl divdiv1 syl122anc 3eqtr4d halfcl recnd syl2anc
        wb subeq0 mpbid eqtr2d sqeqor ord df-neg 3eqtr3g negneg eqeltrrd znegcl
        mpd crp zaddcl modcl 0cn subcan2 divides3 mpbird dvdssq nnne0 dvdsmulcr
        nnrp nnz syl112anc eqbrtrd wi zsqcl zmulcl dvds2sub mp2and oveq1d subdi
        2halves pnpcan2 eqtr3d subsq 3eqtr2d breqtrd ) ABUAZKQUBRZGKQUCRZUDRZQU
        BRZYLKUERZUFRZGQUBRZYJQUCRZQUCRZUFRZUGYIYJYMUGUHZYJYNUGUHZYJYOUGUHZYIKY
        LUGUHZYTYIUUCYLKUIRZUJUKZYIUUDYKUFRZUJYKUFRZUKZUUEYIHYKULZUUFUUGYIHYKUK
        ZUMZHUUIUKZYIHYKUNUUKYIYKHYIHUOSZYKUOSZHYKUPUHZYKHUNYIHUQSZUUMYIUUPGHUF
        RKUCRUQSZAUUPUUQUABACDEFGHIJKLMNOURUSUTZHVATZYIKUOSZUUNYIKVBSZUUTAUVABN
        USZKVFTKVCTZYIUUIHVDUHZUUOAUVDUUOUABACDEFGHIJKLMNOVEUSVGHYKVHVIVJHYKVKV
        LYIUUJUULYIHQUBRZYKQUBRZUKZUUJUULVMZYIUVFYRUVEYIYJQQUBRZUCRZYJQQUERZUCR
        ZUVFYRYIUVIUVKYJUCYIQVNSZUVIUVKUKUVMYIVOVSZQVPTVQYIKVNSZUVMQUJUNZUVFUVJ
        UKYIUVAUVOUVBKVRZTZUVNUVPYIVTVSZKQWAVIYIYJVNSZUVMUVPUVMUVPYRUVLUKYIUVAU
        VOUVTUVBUVQKWBWCZUVNUVSUVNUVSYJQQWDWEWFZYIYRUVEUFRUJUKZYRUVEUKZPYIYRVNS
        ZUVEVNSZUWCUWDWJYIUVTYQVNSUWEUWAYJWGYQWGWCYIHVNSZUWFYIHUUSWHZHWBTYRUVEW
        KWIWLWMYIUWGYKVNSZUVGUVHWJUWHYIYKUVCWHZHYKWNWIWLWOXAZOYKWPWQYIUUDVNSUJV
        NSZUWIUUHUUEWJYIUUDYIYLUOSZKXBSZUUDUOSYIYLUQSZUWMYIGUQSZYKUQSUWOAUWPBMU
        SZYIUUIULZYKUQYIUWIUWRYKUKUWJYKWRTYIUUIUQSUWRUQSYIHUUIUQUWKUURWSUUIWTTW
        SGYKXCWIZYLVATZYIUVAUWNUVBKXLTYLKXDWIWHUWLYIXEVSUWJUUDUJYKXFVIWLYIUVAUW
        OUUCUUEWJUVBUWSKYLXGWIXHZYIKUQSZUWOUUCYTWJYIUVAUXBUVBKXMTZUWSKYLXIWIWLY
        IYJKKUERZYNUGYIUVOYJUXDUKUVRKVPTYIUXDYNUGUHZUUCUXAYIUXBUWOUXBKUJUNZUXEU
        UCWJUXCUWSUXCYIUVAUXFUVBKXJTKKYLXKXNXHXOYIYJUQSZYMUQSZYNUQSZYTUUAUAUUBX
        PYIUXBUXGUXCKXQTYIUWOUXHUWSYLXQTYIUWOUXBUXIUWSUXCYLKXRWIYJYMYNXSVIXTYIY
        OYLYLUERZYNUFRZYLYLKUFRZUERZYSYIYMUXJYNUFYIYLVNSZYMUXJUKYIYLUWTWHZYLVPT
        YAYIUXNUXNUVOUXMUXKUKUXOUXOUVRYLYLKYBVIYIUXMYLGYKUFRZUERZYPUVFUFRZYSYIU
        XLUXPYLUEYIYLYKYKUDRZUFRZUXLUXPYIUXSKYLUFYIUVOUXSKUKUVRKYCTVQYIGVNSZUWI
        UWIUXTUXPUKYIGYIUWPGUOSUWQGVATWHZUWJUWJGYKYKYDVIYEVQYIUYAUWIUXRUXQUKUYB
        UWJGYKYFWIYIUVFYRYPUFUWBVQYGYGYH $.
        $( [16-Jul-2014] $)
    $}

    ${
      4sq.2 $e |- ( ph -> N e. NN ) $.
      4sq.3 $e |- ( ph -> P = ( ( 2 x. N ) + 1 ) ) $.
      4sq.4 $e |- ( ph -> P e. Prime ) $.
      ${
        4sqlem11.5 $e |- A =
          { u | E. m e. ( 0 ... N ) u = ( ( m ^ 2 ) mod P ) } $.
        4sqlem11.6 $e |- F = ( v e. A |-> ( ( P - 1 ) - v ) ) $.
        $( Lemma for ~ 4sq .  Use the pigeonhole principle to show that the
           sets ` { m ^ 2 | m e. ( 0 ... N ) } ` and
           ` { -u 1 - n ^ 2 | n e. ( 0 ... N ) } ` have a common element,
           ` mod P ` . $)
        4sqlem11 $p |- ( ph -> ( A i^i ran F ) =/= (/) ) $=
          ( vk crn cun chash cfv clt wbr wn cin c0 wne cle cc0 c1 cmin cfz cdom
          co cfn wcel wss fzfid cv c2 cexp cmo wceq wrex wa wi cz elfzelz zsqcl
          cab cn syl cprime prmnn zmodcl2 syl2anr caddc cc oveq1d adantr sselda
          cvv ovex sylancr ssfi syl2anc sylc mpbird cen fz01en hashen cn0 nnnn0
          wb hashfz1 eqtrd breqtrd cr nn0re zre mpbid ltp1 ax-1cn syl22anc cmul
          a1i syl3anc 3eqtrd copab wf1o wf1 ex cdivides ad2antrl ad2antll zsscn
          sseldi elfzle2 breqtrrd cabs nn0z subid1 fveq2d elfzle1 absid oveq12d
          sylanbrc dvdsle necon4ad sylbid dom2lem f1f1orn ax-mp sylibr sstri
          mtod eleq1a rexlimdva abssdv syl5eqss wf prmz peano2zm addid2 fzrev3i
          zcn eqeltrrd fmptd frn unssd ssdomg hashdom lenlt nncn add4 2cn mulcl
          hashcl addass 2times wo moddvds subsq breq2d zaddcl zsubcl 3bitrd 2re
          euclemma nnre remulcl 3syl le2add lelttrd ltnle ad2antrr 1re nn0abscl
          mp2and crp recnd subeq0 necon3bid biimpar absrpcl rpgt0 elnnz abs3dif
          nnge1 0cn abssub letrd elnnz1 dvdsabsb letr mpan2d jaod oveq1 impbid1
          rnopab2 eqtr4i f1oeq3 f1oen ensymg pncan sylancl oveq2d eqbrtrrd entr
          peano2nn0 cuz fzssuz uzssz syl6ss adantrr adantrl subcan df-mpt eqtri
          cmpt f1eq1 f1oeng eqtr3d 3eqtr4d simpr hashun eqtr4d necon3bd mpd ) A
          IHMUBZUCZUDUEZUFUGZUHZHUYNUIZUJUKAUYPIULUGZUYRAUYPUMIUNUOURZUPURZUDUE
          ZIULAUYPVUCULUGZUYOVUBUQUGZAUYOUSUTZUYOVUBVAZVUEAVUBUSUTZVUGVUFAUMVUA
          VBZAHUYNVUBAHGVCZKVCZVDVEURZIVFURZVGZKUMNUPURZVHZGVNZVUBSAVUPGVUBAVUN
          VUJVUBUTZKVUOAVUKVUOUTZVIVUMVUBUTZVUNVURVJVUSVULVKUTZIVOUTZVUTAVUSVUK
          VKUTZVVAVUKUMNVLZVUKVMZVPAIVQUTZVVBRIVRVPZVULIVSVTZVUMVUBVUJUUAVPUUBU
          UCUUDZAHVUBMUUEUYNVUBVAZAFHVUAFVCZUOURZVUBMAVVKHUTZVIZUMVUAWAURZVVKUO
          URZVVLVUBAVVPVVLVGVVMAVVOVUAVVKUOAVUAWBUTZVVOVUAVGAVUAVKUTZVVQAIVKUTZ
          VVRAVVFVVSRIUUFZVPZIUUGVPVUAUUJVPZVUAUUHVPWCWDVVNVUAWFUTVVKVUBUTVVPVU
          BUTIUNUOWGAHVUBVVKVVIWEWFVVKUMVUAUUIWHUUKZTUULHVUBMUUMVPZUUNZVUBUYOWI
          WJZVWEUYOVUBUSUUOWKAVUFVUHVUDVUEWRVWFVUIUYOVUBUUPWJWLAVUCUNIUPURZUDUE
          ZIAVUCVWHVGZVUBVWGWMUGZAVVSVWJVWAIWNVPAVUHVWGUSUTVWIVWJWRVUIAUNIVBVUB
          VWGWOWJWLAIWPUTZVWHIVGAVVBVWKVVGIWQVPIWSVPWTXAAUYPXBUTZIXBUTZUYTUYRWR
          AUYPWPUTZVWLAVUFVWNVWFUYOUVBVPUYPXCVPAVVSVWMVWAIXDZVPZUYPIUUQWJXEAUYQ
          UYSUJAUYSUJVGZUYQAVWQVIZIIUNWAURZUYPUFVWRVWMIVWSUFUGAVWMVWQVWPWDIXFVP
          VWRVWSHUDUEZUYNUDUEZWAURZUYPAVWSVXBVGVWQANNWAURZUNUNWAURZWAURZNUNWAUR
          ZVXFWAURZVWSVXBANWBUTZVXHUNWBUTZVXIVXEVXGVGANVOUTZVXHPNUURVPZVXKVXIAX
          GXJZVXLNNUNUNUUSXHAVWSVDNXIURZUNWAURZUNWAURZVXMVXDWAURZVXEAIVXNUNWAQW
          CAVXMWBUTZVXIVXIVXOVXPVGAVDWBUTVXHVXQUUTVXKVDNUVAWHVXLVXLVXMUNUNUVCXK
          AVXMVXCVXDWAAVXHVXMVXCVGZVXKNUVDZVPWCXLAVWTVXFVXAVXFWAAVWTUNVXFUPURZU
          DUEZVXFAVWTVYAVGZHVXTWMUGZAHVUOWMUGZVUOVXTWMUGVYCAHUSUTZVUOHWMUGZVYDA
          VUHHVUBVAVYEVUIVVIVUBHWIWJZAVUOHVUSVUNVIKGXMZXNZVYFAVUOVYHUBZVYHXNZVY
          IAVUOVUBVYHXOVYKAKGVUOVUBVUMVUJVDVEURZIVFURZAVUSVUTVVHXPAVUSVUJVUOUTZ
          VIZVUMVYMVGZVUKVUJVGZWRAVYOVIZVYPVYQVYRVYPIVUKVUJWAURZXQUGZIVUKVUJUOU
          RZXQUGZUVEZVYQVYRVYPIVULVYLUOURZXQUGZIVYSWUAXIURZXQUGZWUCVYRVVBVVAVYL
          VKUTZVYPWUEWRAVVBVYOVVGWDVYRVVCVVAVUSVVCAVYNVVDXRZVVEVPVYRVUJVKUTZWUH
          VYNWUJAVUSVUJUMNVLXSZVUJVMVPVULVYLIUVFXKVYRWUDWUFIXQVYRVUKWBUTZVUJWBU
          TZWUDWUFVGVYRVKWBVUKXTWUIYAZVYRVKWBVUJXTWUKYAZVUKVUJUVGWJUVHVYRVVFVYS
          VKUTZWUAVKUTZWUGWUCWRAVVFVYORWDZVYRVVCWUJWUPWUIWUKVUKVUJUVIWJZVYRVVCW
          UJWUQWUIWUKVUKVUJUVJWJZIVYSWUAUVMXKUVKVYRVYTVYQWUBVYRVYTVUKVUJVYRVUKV
          UJUKZVYTUHVYRWVAVIZVYTIVYSULUGZVYRWVCUHZWVAVYRVYSIUFUGZWVDVYRVYSVXMIV
          YRWUPVYSXBUTZWUSVYSXDZVPZAVXMXBUTZVYOAVDXBUTNXBUTZWVIUVLAVXJWVJPNUVNV
          PZVDNUVOWHZWDVYRVVFVVSVWMWURVVTVWOUVPZVYRVYSVXCVXMULVYRVUKNULUGZVUJNU
          LUGZVYSVXCULUGZVUSWVNAVYNVUKUMNYBXRVYNWVOAVUSVUJUMNYBXSVYRVUKXBUTZVUJ
          XBUTZWVJWVJWVNWVOVIWVPVJVYRVVCWVQWUIVUKXDVPZVYRWUJWVRWUKVUJXDVPZAWVJV
          YOWVKWDZWWAVUKVUJNNUVQXHUWCVYRVXHVXRAVXHVYOVXKWDVXSVPYCAVXMIUFUGVYOAV
          XMVXNIUFAWVIVXMVXNUFUGWVLVXMXFVPQYCWDUVRVYRWVFVWMWVEWVDWRWVHWVMVYSIUV
          SWJXEZWDWVBVVSVYSVOUTZVYTWVCVJAVVSVYOWVAVWAUVTWVBWUPUNVYSULUGWWCVYRWU
          PWVAWUSWDZWVBUNWUAYDUEZVYSUNXBUTWVBUWAXJVYRWWEXBUTZWVAVYRWWEWPUTZWWFV
          YRWUQWWGWUTWUAUWBVPZWWEXCVPZWDWVBWUPWVFWWDWVGVPWVBWWEVOUTZUNWWEULUGWV
          BWWEVKUTZUMWWEUFUGZWWJWVBWWGWWKVYRWWGWVAWWHWDWWEYEVPWVBWWEUWDUTZWWLWV
          BWUAWBUTZWUAUMUKZWWMVYRWWNWVAVYRWUAVYRWUQWUAXBUTWUTWUAXDVPUWEWDVYRWWO
          WVAVYRWUAUMVUKVUJVYRWULWUMWUAUMVGVYQWRWUNWUOVUKVUJUWFWJUWGUWHWUAUWIWJ
          WWEUWJVPWWEUWKYKZWWEUWMVPVYRWWEVYSULUGZWVAVYRWWEVUKUMUOURZYDUEZUMVUJU
          OURYDUEZWAURZVYSULVYRWULWUMUMWBUTZWWEWXAULUGWUNWUOWXBVYRUWNXJZVUKVUJU
          MUWLXKVYRWWSVUKWWTVUJWAVYRWWSVUKYDUEZVUKVYRWWRVUKYDVYRWULWWRVUKVGWUNV
          UKYFVPYGVYRWVQUMVUKULUGZWXDVUKVGWVSVUSWXEAVYNVUKUMNYHXRVUKYIWJWTVYRWW
          TVUJUMUOURZYDUEZVUJYDUEZVUJVYRWXBWUMWWTWXGVGWXCWUOUMVUJUWOWJVYRWXFVUJ
          YDVYRWUMWXFVUJVGWUOVUJYFVPYGVYRWVRUMVUJULUGZWXHVUJVGWVTVYNWXIAVUSVUJU
          MNYHXSVUJYIWJXLYJXAZWDUWPVYSUWQYKIVYSYLWJYTXPYMVYRWUBIWWEXQUGZVYQVYRV
          VSWUQWUBWXKWRVYRVVFVVSWURVVTVPZWUTIWUAUWRWJVYRWXKVUKVUJVYRWVAWXKUHWVB
          WXKIWWEULUGZVYRWXMUHWVAVYRWXMWVCWWBVYRWXMWWQWVCWXJVYRVWMWWFWVFWXMWWQV
          IWVCVJWVMWWIWVHIWWEVYSUWSXKUWTYTWDWVBVVSWWJWXKWXMVJVYRVVSWVAWXLWDWWPI
          WWEYLWJYTXPYMYNUXAYNVYQVULVYLIVFVUKVUJVDVEUXBWCUXCXPYOVUOVUBVYHYPVPHV
          YJVGVYIVYKWRHVUQVYJSKGVUOVUMUXDUXEHVYJVUOVYHUXFYQYRVUOHVYHUMNUPWGUXGV
          PVUOHUSUXHWKAUMVXFUNUOURZUPURZVUOVXTWMAWXNNUMUPAVXHVXIWXNNVGVXKXGNUNU
          XIUXJUXKAVXFVKUTZWXOVXTWMUGAVXFWPUTZWXPANWPUTZWXQAVXJWXRPNWQVPNUXNVPZ
          VXFYEVPVXFWNVPUXLHVUOVXTUXMWJAVYEVXTUSUTVYBVYCWRVYGAUNVXFVBHVXTWOWJWL
          AWXQVYAVXFVGWXSVXFWSVPWTZAVWTVXAVXFAVWTVXAVGZHUYNWMUGZAVYEHUYNMXNZWYB
          VYGAHVUBMXOZWYCAHVUBVVMUAVCZVVLVGVIFUAXMZXOZWYDAFUAHVUBVVLVUAWYEUOURZ
          AVVMVVLVUBUTVWCXPAVVMWYEHUTZVIZVVLWYHVGVVKWYEVGWRZAWYJVIVVQVVKWBUTZWY
          EWBUTZWYKAVVQWYJVWBWDAVVMWYLWYIAHWBVVKAHVUBWBVVIVUBUMUXOUEZWBUMVUAUXP
          WYNVKWBUMUXQXTYSYSUXRZWEUXSAWYIWYMVVMAHWBWYEWYOWEUXTVUAVVKWYEUYAXKXPY
          OMWYFVGWYDWYGWRMFHVVLUYDWYFTFUAHVVLUYBUYCHVUBMWYFUYEYQYRHVUBMYPVPHUYN
          USMUYFWJAVYEUYNUSUTZWYAWYBWRVYGAVUHVVJWYPVUIVWDVUBUYNWIWJZHUYNWOWJWLW
          XTUYGYJUYHWDVWRVYEWYPVWQUYPVXBVGAVYEVWQVYGWDAWYPVWQWYQWDAVWQUYIHUYNUY
          JXKUYKXAXPUYLUYM $.
          $( [15-Jul-2014] $)

        $( Lemma for ~ 4sq .  For any odd prime ` P ` , there is a ` k < P `
           such that ` k P - 1 ` is a sum of two squares. $)
        4sqlem12 $p |- ( ph -> E. k e. ( 1 ... ( P - 1 ) ) E. u e. Z[i]
          ( ( ( abs ` u ) ^ 2 ) + 1 ) = ( k x. P ) ) $=
          ( vj cv crn cin wcel wex cabs cfv c2 cexp co caddc cmul wceq cgz wrex
          c1 cmin cfz c0 wne 4sqlem11 n0 sylib cmo wa cc0 vex eqeq1 rexbidv cab
          elab2 rnmpt eleq2i abid rexeq ax-mp oveq1 oveq1d eqeq2d cbvrexv rexab
          syl5bb bitri 3bitri rexcom4 r19.41v exbii ovex ceqsexv rexbii 3bitr2i
          wb oveq2 anbi12i elin reeanv w3a cz cle wbr clt 3ad2ant1 syl cdivides
          sylancr cr crp cn0 cn nn0re nnrp nnre syl22anc elfzelz zsqcl2 syl2anc
          zsqcl nn0z mpbid breqtrrd syl3anc nn0cn recnd subsub3 nncn a1i mpbird
          cc eqtrd 2nn nnmulcl zre elfzle1 elfzle2 le2sq2 c4 nngt0 syl112anc ci
          3bitr4i eqtr2 cdiv 1z cprime prmz elfzm11 prmnn nnm1nn0 nn0ge0 simp2r
          ltm1 modid modlt zmodcl zltlem1 modsubdir simp3 simp2l zsubcl moddvds
          3eqtr4rd nn0addcl breqtrd nn0p1nn nnz dvdssubr nnne0 divides2 rpdivcl
          ax-1cn syl2an rpgt0 elnnz sylanbrc nnge1 resqcl readdcl nnsqcl le2add
          wi mp2and 2times 2re 4re ltmul1 mpbii 2cn sqmul oveq1i syl6eq lelttrd
          2lt4 sq2 ltaddrp lttrd ltadd1 sqval eqtr3d binom21 ltdivmul mpbir3and
          1re gzreim cre gzcn absvalsq2 crre crim oveq12d divcan1 eqtr4d eqeq1d
          cim fveq2 rcla42ev 3expia syl5 rexlimdvva syl5bi exlimdv mpd ) AUBUCZ
          HNUDZUEZUFZUBUGZGUCZUHUIZUJUKULZURUMULZKUCZIUNULZUOZGUPUQKURIURUSULZU
          TULZUQZAUYFVAVBUYHABCDEFGHIJLMNOPQRSTUAVCUBUYFVDVEAUYGUYRUBUYGUYDLUCZ
          UJUKULZIVFULZUOZUYDUYPMUCZUJUKULZIVFULZUSULZUOZVGZMVHOUTULZUQLVUIUQZA
          UYRUYDHUFZUYDUYEUFZVGVUBLVUIUQZVUGMVUIUQZVGUYGVUJVUKVUMVULVUNUYIVUAUO
          ZLVUIUQZVUMGUYDHUBVIUYIUYDUOVUOVUBLVUIUYIUYDVUAVJVKTVMVULFUCZVUEUOZMV
          UIUQZUYDUYPVUQUSULZUOZVGZFUGZVURVVAVGZFUGZMVUIUQZVUNVULUYDVVAFHUQZUBV
          LZUFVVGVVCUYEVVHUYDFUBHVUTNUAVNVOVVGUBVPVVGVVAFVUPGVLZUQZVVCHVVIUOVVG
          VVJWNTVVAFHVVIVQVRVUPVUSVVAGFVUPUYIVUEUOZMVUIUQUYIVUQUOZVUSVUOVVKLMVU
          IUYSVUCUOZVUAVUEUYIVVMUYTVUDIVFUYSVUCUJUKVSVTWAWBVVLVVKVURMVUIUYIVUQV
          UEVJVKWDWCWEWFVVFVVDMVUIUQZFUGVVCVVDMFVUIWGVVNVVBFVURVVAMVUIWHWIWEVVE
          VUGMVUIVVAVUGFVUEVUDIVFWJVURVUTVUFUYDVUQVUEUYPUSWOWAWKWLWMWPUYDHUYEWQ
          VUBVUGLMVUIVUIWRUUBAVUHUYRLMVUIVUIVUHVUAVUFUOZAUYSVUIUFZVUCVUIUFZVGZV
          GUYRUYDVUAVUFUUCAVVRVVOUYRAVVRVVOWSZUYTVUDUMULZURUMULZIUUDULZUYQUFZUY
          SUUAVUCUNULUMULZUPUFZVWDUHUIZUJUKULZURUMULZVWBIUNULZUOZUYRVVSVWCVWBWT
          UFZURVWBXAXBZVWBIXCXBZVVSURWTUFIWTUFZVWCVWKVWLVWMWSWNUUEVVSIUUFUFZVWN
          AVVRVWOVVOSXDZIUUGXEZVWBURIUUHXGVVSIVWAXFXBZVWKVVSVWRIVWAIUSULZXFXBZV
          VSIUYTUYPVUDUSULZUSULZVWSXFVVSVUAVXAIVFULZUOZIVXBXFXBZVVSUYPIVFULZVUE
          USULZVUFVXCVUAVVSVXFUYPVUEUSVVSUYPXHUFZIXIUFZVHUYPXAXBZUYPIXCXBZVXFUY
          PUOVVSUYPXJUFZVXHVVSIXKUFZVXLVVSVWOVXMVWPIUUIXEZIUUJXEZUYPXLXEZVVSVXM
          VXIVXNIXMZXEZVVSVXLVXJVXOUYPUUKXEVVSIXHUFZVXKVVSVXMVXSVXNIXNXEZIUUMXE
          UYPIUUNXOZVTVVSVUEVXFXAXBZVXCVXGUOZVVSVUEUYPVXFXAVVSVUEIXCXBZVUEUYPXA
          XBZVVSVUDXHUFZVXIVYDVVSVUDXJUFZVYFVVSVUCWTUFZVYGVVSVVQVYHAVVPVVQVVOUU
          LZVUCVHOXPXEZVUCXQXEZVUDXLXEZVXRVUDIUUOXRVVSVUEWTUFZVWNVYDVYEWNVVSVUE
          XJUFZVYMVVSVUDWTUFZVXMVYNVVSVYHVYOVYJVUCXSXEZVXNVUDIUUPXRVUEXTXEVWQVU
          EIUUQXRYAVYAYBVVSVXHVYFVXIVYBVYCWNVXPVYLVXRUYPVUDIUURYCYAAVVRVVOUUSUV
          CVVSVXMUYTWTUFZVXAWTUFZVXDVXEWNVXNVVSUYSWTUFZVYQVVSVVPVYSAVVPVVQVVOUU
          TZUYSVHOXPXEZUYSXSXEVVSUYPWTUFZVYOVYRVVSVXLWUBVXOUYPXTXEVYPUYPVUDUVAX
          RUYTVXAIUVBYCYAVVSVXBVVTUYPUSULZVWSVVSUYTYJUFZUYPYJUFVUDYJUFVXBWUCUOV
          VSUYTXJUFZWUDVVSVYSWUEWUAUYSXQXEZUYTYDXEVVSUYPVXPYEVVSVUDVYLYEUYTUYPV
          UDYFYCVVSVVTYJUFZIYJUFZURYJUFZWUCVWSUOVVSVVTXJUFZWUGVVSWUEVYGWUJWUFVY
          KUYTVUDUVDXRZVVTYDXEVVSVXMWUHVXNIYGXEZWUIVVSUVLYHVVTIURYFYCYKUVEVVSVW
          NVWAWTUFZVWRVWTWNVWQVVSVWAXKUFZWUMVVSWUJWUNWUKVVTUVFXEZVWAUVGXEZIVWAU
          VHXRYIVVSVWNIVHVBZWUMVWRVWKWNVWQVVSVXMWUQVXNIUVIXEZWUPIVWAUVJYCYAZVVS
          VWBXKUFZVWLVVSVWKVHVWBXCXBZWUTWUSVVSVWBXIUFZWVAVVSWUNVXMWVBWUOVXNWUNV
          WAXIUFVXIWVBVXMVWAXMVXQVWAIUVKUVMXRVWBUVNXEVWBUVOUVPVWBUVQXEVVSVWMVWA
          IIUNULZXCXBZVVSVWAUJOUNULZUJUKULZUJWVEUNULZUMULZURUMULZWVCXCVVSVVTWVH
          XCXBZVWAWVIXCXBZVVSVVTWVFWVHVVSWUJVVTXHUFZWUKVVTXLXEZVVSWVEXHUFZWVFXH
          UFZVVSWVEXKUFZWVNVVSUJXKUFZOXKUFZWVPYLAVVRWVRVVOQXDZUJOYMXGZWVEXNXEZW
          VEUVRXEZVVSWVOWVGXHUFZWVHXHUFZWWBVVSWVGXKUFZWWCVVSWVQWVPWWEYLWVTUJWVE
          YMXGZWVGXNXEWVFWVGUVSXRZVVSVVTUJOUJUKULZUNULZWVFWVMVVSWWIXKUFZWWIXHUF
          VVSWVQWWHXKUFZWWJYLVVSWVRWWKWVSOUVTXEZUJWWHYMXGWWIXNXEWWBVVSVVTWWHWWH
          UMULZWWIXAVVSUYTWWHXAXBZVUDWWHXAXBZVVTWWMXAXBZVVSUYSXHUFZVHUYSXAXBZOX
          HUFZUYSOXAXBZWWNVVSVYSWWQWUAUYSYNXEZVVSVVPWWRVYTUYSVHOYOXEVVSWVRWWSWV
          SOXNXEZVVSVVPWWTVYTUYSVHOYPXEUYSOYQXOVVSVUCXHUFZVHVUCXAXBZWWSVUCOXAXB
          ZWWOVVSVYHWXCVYJVUCYNXEZVVSVVQWXDVYIVUCVHOYOXEWXBVVSVVQWXEVYIVUCVHOYP
          XEVUCOYQXOVVSUYTXHUFZVYFWWHXHUFZWXHWWNWWOVGWWPUWBVVSWUEWXGWUFUYTXLXEV
          YLVVSWWKWXHWWLWWHXNXEZWXIUYTVUDWWHWWHUWAXOUWCVVSWWHYJUFWWIWWMUOVVSWWH
          WXIYEWWHUWDXEYBVVSWWIYRWWHUNULZWVFXCVVSUJYRXCXBZWWIWXJXCXBZUWNVVSUJXH
          UFZYRXHUFZWXHVHWWHXCXBZWXKWXLWNWXMVVSUWEYHWXNVVSUWFYHWXIVVSWWKWXOWWLW
          WHYSXEUJYRWWHUWGYTUWHVVSWVFUJUJUKULZWWHUNULZWXJVVSUJYJUFOYJUFWVFWXQUO
          UWIVVSOWXBYEUJOUWJXGWXPYRWWHUNUWOUWKUWLYBUWMVVSWVOWVGXIUFZWVFWVHXCXBW
          WBVVSWWEWXRWWFWVGXMXEWVFWVGUWPXRUWQVVSWVLWWDURXHUFZWVJWVKWNWVMWWGWXSV
          VSUXDYHVVTWVHURUWRYCYAVVSWVCWVEURUMULZUJUKULZWVIVVSIUJUKULZWVCWYAVVSW
          UHWYBWVCUOWULIUWSXEVVSIWXTUJUKAVVRIWXTUOVVORXDVTUWTVVSWVEYJUFWYAWVIUO
          VVSWVEWWAYEWVEUXAXEYKYBVVSVWAXHUFZVXSVXSVHIXCXBZVWMWVDWNVVSWUNWYCWUOV
          WAXNXEVXTVXTVVSVXMWYDVXNIYSXEVWAIIUXBYTYIUXCVVSVYSVYHVWEWUAVYJUYSVUCU
          XEXRZVVSVWHVWAVWIVVSVWGVVTURUMVVSVWGVWDUXFUIZUJUKULZVWDUXOUIZUJUKULZU
          MULZVVTVVSVWDYJUFZVWGWYJUOVVSVWEWYKWYEVWDUXGXEVWDUXHXEVVSWYGUYTWYIVUD
          UMVVSWYFUYSUJUKVVSWWQWXCWYFUYSUOWXAWXFUYSVUCUXIXRVTVVSWYHVUCUJUKVVSWW
          QWXCWYHVUCUOWXAWXFUYSVUCUXJXRVTUXKYKVTVVSVWAYJUFZWUHWUQVWIVWAUOVVSWUN
          WYLWUOVWAYGXEWULWURVWAIUXLYCUXMUYOVWJUYLVWIUOKGVWBVWDUYQUPUYMVWBUOUYN
          VWIUYLUYMVWBIUNVSWAUYIVWDUOZUYLVWHVWIWYMUYKVWGURUMWYMUYJVWFUJUKUYIVWD
          UHUXPVTVTUXNUXQYCUXRUXSUXTUYAUYBUYC $.
          $( [15-Jul-2014] $)
      $}

      4sq.5 $e |- ( ph -> ( 0 ... ( 2 x. N ) ) C_ S ) $.
      4sq.6 $e |- T = { i e. NN | ( i x. P ) e. S } $.
      4sq.7 $e |- M = sup ( T , RR , `' < ) $.
      $( Lemma for ~ 4sq . $)
      4sqlem13 $p |- ( ph -> ( T =/= (/) /\ M < P ) ) $=
        ( c1 vu vk vv vm cv cabs cfv c2 cexp co caddc cmul wceq cgz wrex cfz c0
        cmin wne clt wbr cmo cc0 cab cmpt eqid 4sqlem12 wcel simplrl elfznn syl
        wa cn simpr cle 1re 0re lt01 ltleii absid mp2an oveq1i sq1 eqtri oveq2i
        cr simplrr cz 1z ax-mp 4sqlem4a sylancl syl5eqelr eqeltrrd oveq1 eleq1d
        zgz elrab2 sylanbrc ne0i crab ssrab2 eqsstri ccnv csup cuz nnuz sseqtri
        wss infmssuzcl sylancr syl5eqel sseldi cprime ad2antrr prmnn infmssuzle
        nnre syl5eqbr w3a wb elfzm11 mpbid simp3d lelttrd jca ex rexlimdvva mpd
        prmz ) AUAUEZUFUGUHUIUJZTUKUJZUBUEZFULUJZUMZUAUNUOUBTFTURUJZUPUJZUOHUQU
        SZKFUTVAZVLZABCDEUCUAYKUDUEUHUIUJFVBUJUMUDVCLUPUJUOUAVDZFGUBUDJUCUUBYQU
        CUEURUJVEZLMNOPUUBVFUUCVFVGAYPUUAUBUAYRUNAYNYRVHZYKUNVHZVLZVLZYPUUAUUGY
        PVLZYSYTUUHYNHVHZYSUUHYNVMVHZYOGVHZUUIUUHUUDUUJAUUDUUEYPVIZYNYQVJVKZUUH
        YMYOGUUGYPVNUUHYMYLTUFUGZUHUIUJZUKUJZGUUOTYLUKUUOTUHUIUJTUUNTUHUITWFVHV
        CTVOVAUUNTUMVPVCTVQVPVRVSTVTWAWBWCWDWEUUHUUETUNVHZUUPGVHAUUDUUEYPWGTWHV
        HZUUQWITWQWJBCDEYKTGJMWKWLWMWNIUEZFULUJZGVHZUUKIYNVMHUUSYNUMUUTYOGUUSYN
        FULWOWPRWRWSZHYNWTVKZUUHKYNFUUHKVMVHKWFVHUUHHVMKHUVAIVMXAVMRUVAIVMXBXCZ
        UUHKHWFUTXDXEZHSUUHHTXFUGZXIZYSUVEHVHHVMUVFUVDXGXHZUVCHTXJXKXLXMKXRVKUU
        HUUJYNWFVHUUMYNXRVKUUHFVMVHZFWFVHUUHFXNVHZUVIAUVJUUFYPPXOZFXPVKFXRVKUUH
        KUVEYNVOSUUHUVGUUIUVEYNVOVAUVHUVBYNHTXQXKXSUUHYNWHVHZTYNVOVAZYNFUTVAZUU
        HUUDUVLUVMUVNXTZUULUUHUURFWHVHZUUDUVOYAWIUUHUVJUVPUVKFYJVKYNTFYBXKYCYDY
        EYFYGYHYI $.
        $( [16-Jul-2014] $)

      ${
        4sq.m $e |- ( ph -> M e. ( ZZ>= ` 2 ) ) $.
        4sq.a $e |- ( ph -> A e. ZZ ) $.
        4sq.b $e |- ( ph -> B e. ZZ ) $.
        4sq.c $e |- ( ph -> C e. ZZ ) $.
        4sq.d $e |- ( ph -> D e. ZZ ) $.
        4sq.e $e |- E = ( ( ( A + ( M / 2 ) ) mod M ) - ( M / 2 ) ) $.
        4sq.f $e |- F = ( ( ( B + ( M / 2 ) ) mod M ) - ( M / 2 ) ) $.
        4sq.g $e |- G = ( ( ( C + ( M / 2 ) ) mod M ) - ( M / 2 ) ) $.
        4sq.h $e |- H = ( ( ( D + ( M / 2 ) ) mod M ) - ( M / 2 ) ) $.
        4sq.r $e |- R =
          ( ( ( ( E ^ 2 ) + ( F ^ 2 ) ) + ( ( G ^ 2 ) + ( H ^ 2 ) ) ) / M ) $.
        4sq.p $e |- ( ph -> ( M x. P ) =
          ( ( ( A ^ 2 ) + ( B ^ 2 ) ) + ( ( C ^ 2 ) + ( D ^ 2 ) ) ) ) $.
        $( Lemma for ~ 4sq . $)
        4sqlem14 $p |- ( ph -> R e. NN0 ) $=
          ( c2 cexp co caddc cdiv cn0 cz wcel cc0 cle wbr cdivides cmul cmin cn
          cv crab ssrab2 eqsstri cr clt ccnv csup c1 cuz cfv wss c0 wne sseqtri
          nnuz 4sqlem13 simpld infmssuzcl sylancr syl5eqel sseldi prmz dvdsmul1
          nnz syl cprime syl2anc 4sqlem8 wa wi zsqcl 4sqlem5 zsqcl2 nn0z zsubcl
          dvds2add syl3anc mp2and wceq zre recnd sqcl addsub4 syl22anc breqtrrd
          cc zaddcl nn0addcl oveq1d addcl eqtrd zmulcl dvds2sub nnre prmnn nncn
          mulcl nncan breqtrd wb nnne0 divides2 mpbid nn0re nn0ge0 nngt0 divge0
          elnn0z sylanbrc ) AKPUTVAVBZQUTVAVBZVCVBZRUTVAVBZSUTVAVBZVCVBZVCVBZTV
          DVBZVEURAUULVFVGZVHUULVIVJZUULVEVGATUUKVKVJZUUMATTJVLVBZUUPUUKVMVBZVM
          VBZUUKVKATUUPVKVJZTUUQVKVJZTUURVKVJZATVFVGZJVFVGZUUSATVNVGZUVBAMVNTMN
          VOJVLVBLVGZNVNVPVNUGUVENVNVQVRZATMVSVTWAWBZMUHAMWCWDWEZWFMWGWHZUVGMVG
          MVNUVHUVFWJWIAUVITJVTVJABCDEJLMNOTUAUBUCUDUEUFUGUHWKWLMWCWMWNWOWPZTWS
          WTZAJXAVGZUVCUEJWQWTZTJWRXBATFUTVAVBZGUTVAVBZVCVBZUUGVMVBZHUTVAVBZIUT
          VAVBZVCVBZUUJVMVBZVCVBZUUQVKATUVQVKVJZTUWAVKVJZTUWBVKVJZATUVNUUEVMVBZ
          UVOUUFVMVBZVCVBZUVQVKATUWFVKVJZTUWGVKVJZTUWHVKVJZABCDEFPLOTUBUJUVJUNX
          CABCDEGQLOTUBUKUVJUOXCAUVBUWFVFVGZUWGVFVGZUWIUWJXDUWKXEUVKAUVNVFVGZUU
          EVFVGZUWLAFVFVGZUWNUJFXFWTZAUUEVEVGZUWOAPVFVGZUWRAUWSFPVMVBTVDVBVFVGA
          BCDEFPLOTUBUJUVJUNXGWLZPXHWTZUUEXIWTUVNUUEXJXBAUVOVFVGZUUFVFVGZUWMAGV
          FVGZUXBUKGXFWTZAUUFVEVGZUXCAQVFVGZUXFAUXGGQVMVBTVDVBVFVGABCDEGQLOTUBU
          KUVJUOXGWLZQXHWTZUUFXIWTUVOUUFXJXBTUWFUWGXKXLXMAUVNYAVGZUVOYAVGZUUEYA
          VGZUUFYAVGZUVQUWHXNAFYAVGUXJAFAUWPFVSVGUJFXOWTXPFXQWTZAGYAVGUXKAGAUXD
          GVSVGUKGXOWTXPGXQWTZAPYAVGUXLAPAUWSPVSVGUWTPXOWTXPPXQWTZAQYAVGUXMAQAU
          XGQVSVGUXHQXOWTXPQXQWTZUVNUVOUUEUUFXRXSXTATUVRUUHVMVBZUVSUUIVMVBZVCVB
          ZUWAVKATUXRVKVJZTUXSVKVJZTUXTVKVJZABCDEHRLOTUBULUVJUPXCABCDEISLOTUBUM
          UVJUQXCAUVBUXRVFVGZUXSVFVGZUYAUYBXDUYCXEUVKAUVRVFVGZUUHVFVGZUYDAHVFVG
          ZUYFULHXFWTZAUUHVEVGZUYGARVFVGZUYJAUYKHRVMVBTVDVBVFVGABCDEHRLOTUBULUV
          JUPXGWLZRXHWTZUUHXIWTUVRUUHXJXBAUVSVFVGZUUIVFVGZUYEAIVFVGZUYNUMIXFWTZ
          AUUIVEVGZUYOASVFVGZUYRAUYSISVMVBTVDVBVFVGABCDEISLOTUBUMUVJUQXGWLZSXHW
          TZUUIXIWTUVSUUIXJXBTUXRUXSXKXLXMAUVRYAVGZUVSYAVGZUUHYAVGZUUIYAVGZUWAU
          XTXNAHYAVGVUBAHAUYHHVSVGULHXOWTXPHXQWTZAIYAVGVUCAIAUYPIVSVGUMIXOWTXPI
          XQWTZARYAVGVUDARAUYKRVSVGUYLRXOWTXPRXQWTZASYAVGVUEASAUYSSVSVGUYTSXOWT
          XPSXQWTZUVRUVSUUHUUIXRXSXTAUVBUVQVFVGZUWAVFVGZUWCUWDXDUWEXEUVKAUVPVFV
          GZUUGVFVGZVUJAUWNUXBVULUWQUXEUVNUVOYBXBAUUGVEVGZVUMAUWRUXFVUNUXAUXIUU
          EUUFYCXBZUUGXIWTZUVPUUGXJXBAUVTVFVGZUUJVFVGZVUKAUYFUYNVUQUYIUYQUVRUVS
          YBXBAUUJVEVGZVURAUYJUYRVUSUYMVUAUUHUUIYCXBZUUJXIWTZUVTUUJXJXBTUVQUWAX
          KXLXMAUUQUVPUVTVCVBZUUKVMVBZUWBAUUPVVBUUKVMUSYDAUVPYAVGZUVTYAVGZUUGYA
          VGZUUJYAVGZVVCUWBXNAUXJUXKVVDUXNUXOUVNUVOYEXBAVUBVUCVVEVUFVUGUVRUVSYE
          XBAUXLUXMVVFUXPUXQUUEUUFYEXBZAVUDVUEVVGVUHVUIUUHUUIYEXBZUVPUVTUUGUUJX
          RXSYFXTAUVBUUPVFVGZUUQVFVGZUUSUUTXDUVAXEUVKAUVBUVCVVJUVKUVMTJYGXBZAVV
          JUUKVFVGZVVKVVLAVUMVURVVMVUPVVAUUGUUJYBXBUUPUUKXJXBTUUPUUQYHXLXMAUUPY
          AVGZUUKYAVGZUURUUKXNATYAVGJYAVGZVVNATAUVDTVSVGZUVJTYIWTZXPAJVNVGZVVPA
          UVLVVSUEJYJWTJYKWTTJYLXBAVVFVVGVVOVVHVVIUUGUUJYEXBUUPUUKYMXBYNAUVBTVH
          WHZVVMUUOUUMYOUVKAUVDVVTUVJTYPWTAUUKVEVGZVVMAVUNVUSVWAVUOVUTUUGUUJYCX
          BZUUKXIWTTUUKYQXLYRAUUKVSVGZVHUUKVIVJZVVQVHTVTVJZUUNAVWAVWCVWBUUKYSWT
          AVWAVWDVWBUUKYTWTVVRAUVDVWEUVJTUUAWTUUKTUUBXSUULUUCUUDWO $.
          $( [16-Jul-2014] $)

        $( Lemma for ~ 4sq . $)
        4sqlem15 $p |- ( ph -> ( R <_ M /\
          ( ( R = 0 \/ R = M ) -> ( M ^ 2 ) || ( M x. P ) ) ) ) $=
          ( cle wbr cc0 wceq wo c2 cexp co cmul cdivides wi caddc cdiv cuz wcel
          cfv cn c1 clt eluz2b2 simplbi syl 4sqlem7 cr wa cz cmin 4sqlem5 zsqcl
          simpld 3syl nnre resqcl rehalfcl le2add syl22anc mp2and recnd 2halves
          cc breqtrd readdcl syl2anc sqval wb nngt0 ledivmul syl112anc syl5eqbr
          zre mpbird simpr syl5eqr wne nnne0 diveq0 syl3anc cn0 zsqcl2 nn0addcl
          nn0ge0 add20 bitrd biimpa syldan simprd nnsqcl dvds2add adantr zaddcl
          4sqlem9 addsub4 oveq1d eqtr3d subge0 eqtrd 4sqlem10 zsubcl zcn oveq2d
          resubcl divcan1 3eqtr2rd oveq12d subid 3eqtr3d mpbid eqeltrd eqeltrrd
          nnz subeq0 dvdssubr jaodan breqtrrd ex jca ) AKTUTVAKVBVCZKTVCZVDZTVE
          VFVGZTJVHVGZVIVAZVJAKPVEVFVGZQVEVFVGZVKVGZRVEVFVGZSVEVFVGZVKVGZVKVGZT
          VLVGZTUTURAUVITUTVAZUVHTTVHVGZUTVAZAUVHUUSUVKUTAUVHUUSVEVLVGZUVMVKVGZ
          UUSUTAUVDUVMUTVAZUVGUVMUTVAZUVHUVNUTVAZAUVDUVMVEVLVGZUVRVKVGZUVMUTAUV
          BUVRUTVAZUVCUVRUTVAZUVDUVSUTVAZABCDEFPLOTUBUJATVEVMVOVNZTVPVNZUIUWCUW
          DVQTVRVATVSVTWAZUNWBZABCDEGQLOTUBUKUWEUOWBZAUVBWCVNZUVCWCVNZUVRWCVNZU
          WJUVTUWAWDUWBVJAPWEVNZUVBWEVNZUWHAUWKFPWFVGTVLVGWEVNABCDEFPLOTUBUJUWE
          UNWGWIZPWHZUVBXIWJZAQWEVNZUVCWEVNUWIAUWPGQWFVGTVLVGWEVNABCDEGQLOTUBUK
          UWEUOWGWIZQWHUVCXIWJZAUVMWCVNZUWJAUUSWCVNZUWSATWCVNZUWTAUWDUXAUWETWKW
          AZTWLWAZUUSWMWAZUVMWMWAZUXEUVBUVCUVRUVRWNWOWPAUVMWSVNZUVSUVMVCZAUVMUX
          DWQZUVMWRWAZWTZAUVGUVSUVMUTAUVEUVRUTVAZUVFUVRUTVAZUVGUVSUTVAZABCDEHRL
          OTUBULUWEUPWBZABCDEISLOTUBUMUWEUQWBZAUVEWCVNZUVFWCVNZUWJUWJUXKUXLWDUX
          MVJARWEVNZUVEWEVNUXPAUXRHRWFVGTVLVGWEVNABCDEHRLOTUBULUWEUPWGWIZRWHUVE
          XIWJZASWEVNZUVFWEVNUXQAUYAISWFVGTVLVGWEVNABCDEISLOTUBUMUWEUQWGWIZSWHU
          VFXIWJZUXEUXEUVEUVFUVRUVRWNWOWPUXIWTZAUVDWCVNZUVGWCVNZUWSUWSUVOUVPWDU
          VQVJAUWHUWIUYEUWOUWRUVBUVCXAXBZAUXPUXQUYFUXTUYCUVEUVFXAXBZUXDUXDUVDUV
          GUVMUVMWNWOWPAUUSWSVNZUVNUUSVCZAUUSUXCWQZUUSWRWAZWTATWSVNZUUSUVKVCZAT
          UXBWQZTXCWAZWTAUVHWCVNZUXAUXAVBTVRVAZUVJUVLXDAUYEUYFUYQUYGUYHUVDUVGXA
          XBZUXBUXBAUWDUYRUWETXEWAUVHTTXFXGXJXHAUURUVAAUURWDUUSFVEVFVGZGVEVFVGZ
          VKVGZHVEVFVGZIVEVFVGZVKVGZVKVGZUUTVIAUUPUUSVUFVIVAZUUQAUUPWDZUUSVUBVI
          VAZUUSVUEVIVAZVUGVUHUUSUYTVIVAZUUSVUAVIVAZVUIAUUPBCDEFPLOTUBUJUWEUNVU
          HUVBVBVCZUVCVBVCZAUUPUVDVBVCZVUMVUNWDZVUHVUOUVGVBVCZAUUPUVIVBVCZVUOVU
          QWDZVUHUVIKVBURAUUPXKXLAVURVUSAVURUVHVBVCZVUSAUVHWSVNZUYMTVBXMZVURVUT
          XDAUVHUYSWQZUYOAUWDVVBUWETXNWAZUVHTXOXPAUYEVBUVDUTVAZUYFVBUVGUTVAZVUT
          VUSXDUYGAUVDXQVNZVVEAUVBXQVNZUVCXQVNZVVGAUWKVVHUWMPXRWAZAUWPVVIUWQQXR
          WAZUVBUVCXSXBUVDXTWAUYHAUVGXQVNZVVFAUVEXQVNZUVFXQVNZVVLAUXRVVMUXSRXRW
          AZAUYAVVNUYBSXRWAZUVEUVFXSXBUVGXTWAUVDUVGYAWOYBYCYDZWIAVUOVUPAUWHVBUV
          BUTVAZUWIVBUVCUTVAZVUOVUPXDUWOAVVHVVRVVJUVBXTWAUWRAVVIVVSVVKUVCXTWAUV
          BUVCYAWOYCYDZWIYJAUUPBCDEGQLOTUBUKUWEUOVUHVUMVUNVVTYEYJAVUKVULWDVUIVJ
          ZUUPAUUSWEVNZUYTWEVNZVUAWEVNZVWAAUUSVPVNZVWBAUWDVWEUWETYFWAUUSUUIWAZA
          FWEVNVWCUJFWHWAZAGWEVNVWDUKGWHWAZUUSUYTVUAYGXPYHWPVUHUUSVUCVIVAZUUSVU
          DVIVAZVUJAUUPBCDEHRLOTUBULUWEUPVUHUVEVBVCZUVFVBVCZAUUPVUQVWKVWLWDZVUH
          VUOVUQVVQYEAVUQVWMAUXPVBUVEUTVAZUXQVBUVFUTVAZVUQVWMXDUXTAVVMVWNVVOUVE
          XTWAUYCAVVNVWOVVPUVFXTWAUVEUVFYAWOYCYDZWIYJAUUPBCDEISLOTUBUMUWEUQVUHV
          WKVWLVWPYEYJAVWIVWJWDVUJVJZUUPAVWBVUCWEVNZVUDWEVNZVWQVWFAHWEVNVWRULHW
          HWAZAIWEVNVWSUMIWHWAZUUSVUCVUDYGXPYHWPAVUIVUJWDVUGVJZUUPAVWBVUBWEVNZV
          UEWEVNZVXBVWFAVWCVWDVXCVWGVWHUYTVUAYIXBZAVWRVWSVXDVWTVXAVUCVUDYIXBZUU
          SVUBVUEYGXPYHWPAUUQWDZVUGUUSVUFUUSWFVGZVIVAZVXGUUSVUBUVMWFVGZVUEUVMWF
          VGZVKVGZVXHVIVXGUUSVXJVIVAZUUSVXKVIVAZUUSVXLVIVAZVXGUUSUYTUVRWFVGZVUA
          UVRWFVGZVKVGZVXJVIVXGUUSVXPVIVAZUUSVXQVIVAZUUSVXRVIVAZAUUQBCDEFPLOTUB
          UJUWEUNVXGUVRUVBWFVGZVBVCZUVRUVCWFVGZVBVCZAUUQVYBVYDVKVGZVBVCZVYCVYEW
          DZVXGVYFUVMUVDWFVGZVBAVYFVYIVCUUQAUVSUVDWFVGZVYFVYIAUVRWSVNZVYKUVBWSV
          NZUVCWSVNVYJVYFVCAUVRUXEWQZVYMAUVBUWOWQZAUVCUWRWQUVRUVRUVBUVCYKWOAUVS
          UVMUVDWFUXIYLYMYHVXGVYIVBVCZUVMUVGWFVGZVBVCZAUUQVYIVYPVKVGZVBVCZVYOVY
          QWDZVXGUVNUVHWFVGZUUSUUSWFVGZVYRVBVXGUVNUUSUVHUUSWFAUYJUUQUYLYHVXGUUS
          UVKUVITVHVGZUVHAUYNUUQUYPYHVXGUVITTVHVXGUVIKTURAUUQXKXLYLAWUCUVHVCZUU
          QAVVAUYMVVBWUDVVCUYOVVDUVHTUUAXPYHUUBUUCAWUAVYRVCZUUQAUXFUXFUVDWSVNUV
          GWSVNWUEUXHUXHAUVDUYGWQAUVGUYHWQUVMUVMUVDUVGYKWOYHAWUBVBVCZUUQAUYIWUF
          UYKUUSUUDWAYHUUEAVYSVYTAVYIWCVNZVBVYIUTVAZVYPWCVNZVBVYPUTVAZVYSVYTXDA
          UWSUYEWUGUXDUYGUVMUVDYTXBAWUHUVOUXJAUWSUYEWUHUVOXDUXDUYGUVMUVDYNXBXJA
          UWSUYFWUIUXDUYHUVMUVGYTXBAWUJUVPUYDAUWSUYFWUJUVPXDUXDUYHUVMUVGYNXBXJV
          YIVYPYAWOYCYDZWIYOAVYGVYHAVYBWCVNZVBVYBUTVAZVYDWCVNZVBVYDUTVAZVYGVYHX
          DAUWJUWHWULUXEUWOUVRUVBYTXBAWUMUVTUWFAUWJUWHWUMUVTXDUXEUWOUVRUVBYNXBX
          JAUWJUWIWUNUXEUWRUVRUVCYTXBAWUOUWAUWGAUWJUWIWUOUWAXDUXEUWRUVRUVCYNXBX
          JVYBVYDYAWOYCYDZWIZYPAUUQBCDEGQLOTUBUKUWEUOVXGVYCVYEWUPYEYPVXGVWBVXPW
          EVNZVXQWEVNZVXSVXTWDVYAVJAVWBUUQVWFYHZVXGVWCUVRWEVNZWURAVWCUUQVWGYHVX
          GUVRUVBWEVXGVYCUVRUVBVCZWUQAVYCWVBXDZUUQAVYKVYLWVCVYMVYNUVRUVBUUJXBYH
          UUFAUWLUUQAUWKUWLUWMUWNWAYHUUGZUYTUVRYQXBVXGVWDWVAWUSAVWDUUQVWHYHWVDV
          UAUVRYQXBUUSVXPVXQYGXPWPAVXRVXJVCUUQAVUBUVSWFVGZVXRVXJAUYTWSVNZVUAWSV
          NZVYKVYKWVEVXRVCAVWCWVFVWGUYTYRWAAVWDWVGVWHVUAYRWAVYMVYMUYTVUAUVRUVRY
          KWOAUVSUVMVUBWFUXIYSYMYHWTVXGUUSVUCUVRWFVGZVUDUVRWFVGZVKVGZVXKVIVXGUU
          SWVHVIVAZUUSWVIVIVAZUUSWVJVIVAZAUUQBCDEHRLOTUBULUWEUPVXGUVRUVEWFVGZVB
          VCZUVRUVFWFVGZVBVCZAUUQWVNWVPVKVGZVBVCZWVOWVQWDZVXGWVRVYPVBAWVRVYPVCU
          UQAUVSUVGWFVGZWVRVYPAVYKVYKUVEWSVNUVFWSVNWWAWVRVCVYMVYMAUVEUXTWQAUVFU
          YCWQUVRUVRUVEUVFYKWOAUVSUVMUVGWFUXIYLYMYHVXGVYOVYQWUKYEYOAWVSWVTAWVNW
          CVNZVBWVNUTVAZWVPWCVNZVBWVPUTVAZWVSWVTXDAUWJUXPWWBUXEUXTUVRUVEYTXBAWW
          CUXKUXNAUWJUXPWWCUXKXDUXEUXTUVRUVEYNXBXJAUWJUXQWWDUXEUYCUVRUVFYTXBAWW
          EUXLUXOAUWJUXQWWEUXLXDUXEUYCUVRUVFYNXBXJWVNWVPYAWOYCYDZWIYPAUUQBCDEIS
          LOTUBUMUWEUQVXGWVOWVQWWFYEYPVXGVWBWVHWEVNZWVIWEVNZWVKWVLWDWVMVJWUTVXG
          VWRWVAWWGAVWRUUQVWTYHWVDVUCUVRYQXBVXGVWSWVAWWHAVWSUUQVXAYHWVDVUDUVRYQ
          XBUUSWVHWVIYGXPWPAWVJVXKVCUUQAVUEUVSWFVGZWVJVXKAVUCWSVNZVUDWSVNZVYKVY
          KWWIWVJVCAVWRWWJVWTVUCYRWAAVWSWWKVXAVUDYRWAVYMVYMVUCVUDUVRUVRYKWOAUVS
          UVMVUEWFUXIYSYMYHWTVXGVWBVXJWEVNZVXKWEVNZVXMVXNWDVXOVJWUTVXGVXCUVMWEV
          NZWWLAVXCUUQVXEYHVXGUVSUVMWEAUXGUUQUXIYHVXGWVAWVAUVSWEVNWVDWVDUVRUVRY
          IXBUUHZVUBUVMYQXBVXGVXDWWNWWMAVXDUUQVXFYHWWOVUEUVMYQXBUUSVXJVXKYGXPWP
          AVXLVXHVCUUQAVUFUVNWFVGZVXLVXHAVUBWSVNZVUEWSVNZUXFUXFWWPVXLVCAVXCWWQV
          XEVUBYRWAAVXDWWRVXFVUEYRWAUXHUXHVUBVUEUVMUVMYKWOAUVNUUSVUFWFUYLYSYMYH
          WTVXGVWBVUFWEVNZVUGVXIXDWUTAWWSUUQAVXCVXDWWSVXEVXFVUBVUEYIXBYHUUSVUFU
          UKXBXJUULAUUTVUFVCUURUSYHUUMUUNUUO $.
          $( [16-Jul-2014] $)

        $( Lemma for ~ 4sq . $)
        4sqlem16 $p |- -. ph $=
          ( c2 cexp co cmul cdivides wbr cc0 wceq wo cle cr wa wb cn wn wne clt
          wcel cv crab ssrab2 eqsstri ccnv csup c1 cuz cfv wss c0 nnuz 4sqlem13
          sseqtri simpld infmssuzcl sylancr syl5eqel sseldi cprime prmnn simprd
          nnre syl ltne syl3anc cc recnd cz syl112anc syl2anc cn0 ci caddc cabs
          cdiv cre cim cgz gzreim gzcn absvalsq2 crre oveq1d crim oveq12d eqtrd
          zre eqtr4d cmin 4sqlem5 eqid ax-icn mulcl syl22anc subdi oveq2d subcl
          addsub4 divdir divass 3eqtrd eqeltrd necomd breq1d nnz prmz dvdscmulr
          sqval nnne0 dvdsprm 3bitrd necon3bbid mpbird 4sqlem14 elnn0 sylib ord
          orc 4sqlem15 syl5 syld mt3d letri3 nncn divcan3 eqtr3d syl6eqr mulcom
          wi idi a1i nnnn0 mul4sqlem eqeltrrd eleq1d elrab2 sylanbrc infmssuzle
          oveq1 syl5eqbr mpbir2and olcd mpd pm2.65i ) ATUTVAVBZTJVCVBZVDVEZAKVF
          VGZKTVGZVHZUWEAUWGUWFAUWGKTVIVEZTKVIVEZAKVJVQZTVJVQZUWGUWIUWJVKVLAKVM
          VQZUWKAUWMUWEAUWEVNTJVOAJTAUWLJVJVQZTJVPVEZJTVOATVMVQZUWLAMVMTMNVRZJV
          CVBZLVQZNVMVSVMUGUWSNVMVTWAZATMVJVPWBWCZMUHAMWDWEWFZWGZMWHVOZUXAMVQMV
          MUXBUWTWIWKZAUXDUWOABCDEJLMNOTUAUBUCUDUEUFUGUHWJZWLMWDWMWNWOWPZTWTXAZ
          AJVMVQZUWNAJWQVQZUXIUEJWRXAZJWTXAAUXDUWOUXFWSTJXBXCUUAAUWETJAUWETTVCV
          BZUWDVDVEZTJVDVEZTJVGZAUWCUXLUWDVDATXDVQZUWCUXLVGATUXHXEZTUUFXAUUBATX
          FVQZJXFVQZUXRTVFVOZUXMUXNVLAUWPUXRUXGTUUCXAZAUXJUXSUEJUUDXAUYAAUWPUXT
          UXGTUUGXAZTTJUUEXGATUTWEWFVQUXJUXNUXOVLUIUEJTUUHXHUUIUUJUUKZAUWMVNUWF
          UWEAUWMUWFAKXIVQUWMUWFVHABCDEFGHIJKLMNOPQRSTUAUBUCUDUEUFUGUHUIUJUKULU
          MUNUOUPUQURUSUULKUUMUUNUUOUWFUWHAUWEUWFUWGUUPAUWIUWHUWEUVGZABCDEFGHIJ
          KLMNOPQRSTUAUBUCUDUEUFUGUHUIUJUKULUMUNUOUPUQURUSUUQZWSZUURUUSUUTZKWTX
          AZUXHKTUVAXHAUWIUYDUYEWLATUXAKVIUHAUXCKMVQZUXAKVIVEUXEAUWMKJVCVBZLVQZ
          UYIUYGAFXJGVCVBZXKVBZXLWFUTVAVBZHXJIVCVBZXKVBZXLWFUTVAVBZXKVBZTXMVBZP
          XJQVCVBZXKVBZXLWFUTVAVBZRXJSVCVBZXKVBZXLWFUTVAVBZXKVBZTXMVBZVCVBZUYJL
          AVUHJKVCVBZUYJAUYSJVUGKVCAUWDTXMVBZUYSJAUWDUYRTXMAUWDFUTVAVBZGUTVAVBZ
          XKVBZHUTVAVBZIUTVAVBZXKVBZXKVBUYRUSAUYNVUMUYQVUPXKAUYNUYMXNWFZUTVAVBZ
          UYMXOWFZUTVAVBZXKVBZVUMAUYMXDVQZUYNVVAVGAUYMXPVQZVVBAFXFVQZGXFVQZVVCU
          JUKFGXQXHZUYMXRXAUYMXSXAAVURVUKVUTVULXKAVUQFUTVAAFVJVQZGVJVQZVUQFVGAV
          VDVVGUJFYEXAZAVVEVVHUKGYEXAZFGXTXHYAAVUSGUTVAAVVGVVHVUSGVGVVIVVJFGYBX
          HYAYCYDAUYQUYPXNWFZUTVAVBZUYPXOWFZUTVAVBZXKVBZVUPAUYPXDVQZUYQVVOVGAUY
          PXPVQZVVPAHXFVQZIXFVQZVVQULUMHIXQXHZUYPXRXAUYPXSXAAVVLVUNVVNVUOXKAVVK
          HUTVAAHVJVQZIVJVQZVVKHVGAVVRVWAULHYEXAZAVVSVWBUMIYEXAZHIXTXHYAAVVMIUT
          VAAVWAVWBVVMIVGVWCVWDHIYBXHYAYCYDYCYFYAAJXDVQZUXPUXTVUJJVGAUXIVWEUXKJ
          UVBXAZUXQUYBJTUVCXCUVDZAVUGPUTVAVBZQUTVAVBZXKVBZRUTVAVBZSUTVAVBZXKVBZ
          XKVBZTXMVBKAVUFVWNTXMAVUBVWJVUEVWMXKAVUBVUAXNWFZUTVAVBZVUAXOWFZUTVAVB
          ZXKVBZVWJAVUAXDVQZVUBVWSVGAVUAXPVQZVWTAPXFVQZQXFVQZVXAAVXBFPYGVBZTXMV
          BZXFVQZABCDEFPLOTUBUJUXGUNYHZWLZAVXCGQYGVBZTXMVBZXFVQZABCDEGQLOTUBUKU
          XGUOYHZWLZPQXQXHZVUAXRXAVUAXSXAAVWPVWHVWRVWIXKAVWOPUTVAAPVJVQZQVJVQZV
          WOPVGAVXBVXOVXHPYEXAZAVXCVXPVXMQYEXAZPQXTXHYAAVWQQUTVAAVXOVXPVWQQVGVX
          QVXRPQYBXHYAYCYDAVUEVUDXNWFZUTVAVBZVUDXOWFZUTVAVBZXKVBZVWMAVUDXDVQZVU
          EVYCVGAVUDXPVQZVYDARXFVQZSXFVQZVYEAVYFHRYGVBZTXMVBZXFVQZABCDEHRLOTUBU
          LUXGUPYHZWLZAVYGISYGVBZTXMVBZXFVQZABCDEISLOTUBUMUXGUQYHZWLZRSXQXHZVUD
          XRXAVUDXSXAAVXTVWKVYBVWLXKAVXSRUTVAARVJVQZSVJVQZVXSRVGAVYFVYSVYLRYEXA
          ZAVYGVYTVYQSYEXAZRSXTXHYAAVYASUTVAAVYSVYTVYASVGWUAWUBRSYBXHYAYCYDYCYA
          URUVEYCAVWEKXDVQVUIUYJVGVWFAKUYHXEJKUVFXHYDABCDEUYMUYPVUAVUDLOTUYRVUF
          UBVVFVVTVXNVYRUYRYIVUFYIUXGAUYMVUAYGVBZTXMVBZVXEXJVXJVCVBZXKVBZXPAWUD
          VXDXJVXIVCVBZXKVBZTXMVBZVXEWUGTXMVBZXKVBZWUFAWUCWUHTXMAWUCVXDUYLUYTYG
          VBZXKVBZWUHAFXDVQZUYLXDVQZPXDVQZUYTXDVQZWUCWUMVGAFVVIXEZAXJXDVQZGXDVQ
          ZWUOYJAGVVJXEZXJGYKWNAPVXQXEZAWUSQXDVQZWUQWUSYJUVHAQVXRXEZXJQYKWNFUYL
          PUYTYPYLAWUGWULVXDXKAWUSWUTWVCWUGWULVGWUSAYJUVIZWVAWVDXJGQYMXCYNYFYAA
          VXDXDVQZWUGXDVQZUXPUXTWUIWUKVGAWUNWUPWVFWURWVBFPYOXHAWUSVXIXDVQZWVGYJ
          AWUTWVCWVHWVAWVDGQYOXHZXJVXIYKWNUXQUYBVXDWUGTYQXGAWUJWUEVXEXKAWUSWVHU
          XPUXTWUJWUEVGWVEWVIUXQUYBXJVXITYRXGYNYSAVXFVXKWUFXPVQAVXBVXFVXGWSAVXC
          VXKVXLWSVXEVXJXQXHYTAUYPVUDYGVBZTXMVBZVYIXJVYNVCVBZXKVBZXPAWVKVYHXJVY
          MVCVBZXKVBZTXMVBZVYIWVNTXMVBZXKVBZWVMAWVJWVOTXMAWVJVYHUYOVUCYGVBZXKVB
          ZWVOAHXDVQZUYOXDVQZRXDVQZVUCXDVQZWVJWVTVGAHVWCXEZAWUSIXDVQZWWBYJAIVWD
          XEZXJIYKWNARWUAXEZAWUSSXDVQZWWDYJASWUBXEZXJSYKWNHUYORVUCYPYLAWVNWVSVY
          HXKAWUSWWFWWIWVNWVSVGWVEWWGWWJXJISYMXCYNYFYAAVYHXDVQZWVNXDVQZUXPUXTWV
          PWVRVGAWWAWWCWWKWWEWWHHRYOXHAWUSVYMXDVQZWWLYJAWWFWWIWWMWWGWWJISYOXHZX
          JVYMYKWNUXQUYBVYHWVNTYQXGAWVQWVLVYIXKAWUSWWMUXPUXTWVQWVLVGWVEWWNUXQUY
          BXJVYMTYRXGYNYSAVYJVYOWVMXPVQAVYFVYJVYKWSAVYGVYOVYPWSVYIVYNXQXHYTAUYS
          JXIVWGAUXIJXIVQUXKJUVJXAYTUVKUVLUWSUYKNKVMMUWQKVGUWRUYJLUWQKJVCUVQUVM
          UGUVNUVOKMWDUVPWNUVRUVSUVTUYFUWAUYCUWB $.
          $( [16-Jul-2014] $)
      $}

      $( Lemma for ~ 4sq .  Inductive step, odd prime case. $)
      4sqlem17 $p |- ( ph -> P e. S ) $=
        ( co va vb vc vd c1 cmul cc wcel wceq cn cprime prmnn syl mulid2 c2 cuz
        nncn cfv wn wa cv cexp caddc cz wrex cr clt ccnv csup wss c0 wne ssrab2
        crab eqsstri nnuz sseqtri wbr 4sqlem13 simpld infmssuzcl syl5eqel oveq1
        sylancr eleq1d elrab2 simprd 4sqlem2 adantr wi w3a cdiv cmo cmin simp1l
        sylib cc0 cfz simp1r simp2ll simp2lr simp2rl simp2rr eqid simp3 pm2.21i
        4sqlem16 3expia anassrs rexlimdvva mpd ex pm2.01d elnn1uz2 ord eqeltrrd
        wo mt3d simprbi ) AUEFUFTZFGAFUGUHZXTFUIAFUJUHZYAAFUKUHZYBPFULUMFUQUMFU
        NUMAUEHUHZXTGUHZAKUEHAKUEUIZKUOUPURUHZAYGAYGYGUSZAYGUTZKFUFTZUAVAZUOVBT
        UBVAZUOVBTVCTUCVAZUOVBTUDVAZUOVBTVCTVCTUIZUDVDVEUCVDVEZUBVDVEUAVDVEZYHA
        YQYGAYJGUHZYQAKUJUHZYRAKHUHYSYRUTAKHVFVGVHVIZHSAHUEUPURZVJHVKVLZYTHUHHU
        JUUAHIVAZFUFTZGUHZIUJVNUJRUUEIUJVMVOVPVQAUUBKFVGVRABCDEFGHIJKLMNOPQRSVS
        VTHUEWAWDWBZUUEYRIKUJHUUCKUIUUDYJGUUCKFUFWCWERWFWPZWGBCDEYJGJUAUBUCUDMW
        HWPWIYIYPYHUAUBVDVDYIYKVDUHZYLVDUHZUTZUTYOYHUCUDVDVDYIUUJYMVDUHZYNVDUHZ
        UTZYOYHWJYIUUJUUMUTZYOYHYIUUNYOWKZYHUUOBCDEYKYLYMYNFYKKUOWLTZVCTKWMTUUP
        WNTZUOVBTYLUUPVCTKWMTUUPWNTZUOVBTVCTYMUUPVCTKWMTUUPWNTZUOVBTYNUUPVCTKWM
        TUUPWNTZUOVBTVCTVCTKWLTZGHIJUUQUURUUSUUTKLMUUOALUJUHAYGUUNYOWOZNUMUUOAF
        UOLUFTZUEVCTUIUVBOUMUUOAYCUVBPUMUUOAWQUVCWRTGVJUVBQUMRSAYGUUNYOWSUUHUUI
        UUMYIYOWTUUHUUIUUMYIYOXAUUKUULUUJYIYOXBUUKUULUUJYIYOXCUUQXDUURXDUUSXDUU
        TXDUVAXDYIUUNYOXEXGXFXHXIXJXJXKXLXMAYFYGAYSYFYGXQAYSYRUUGVTKXNWPXOXRUUF
        XPYDUEUJUHYEUUEYEIUEUJHUUCUEUIUUDXTGUUCUEFUFWCWERWFXSUMXP $.
        $( [16-Jul-2014] $)
    $}

    $( Lemma for ~ 4sq .  The proof is by strong induction - we show that if
       all the integers less than ` k ` are in ` S ` , then ` k ` is as well.
       In this part of the proof we do the induction argument and dispense with
       all the cases except the odd prime case, which is sent to ~ 4sqlem17 .
       If ` k ` is ` 0 , 1 , 2 ` , we show ` k e. S ` directly; otherwise if
       ` k ` is composite, ` k ` is the product of two numbers less than it
       (and hence in ` S ` by assumption), so by ~ mul4sq ` k e. S ` . $)
    4sqlem18 $p |- NN0 = S $=
      ( wcel cc0 cfz co c1 caddc cmin wceq cn c2 syl wbr clt vk vj vm vi cn0 cv
      nn0cn ax-1cn pncan sylancl oveq2d wss nn0p1nn oveq1 subidi syl6eq elfz1eq
      cc sseq1d cabs cfv cexp abs0 oveq1i sq0 eqtri oveq12i cgz cz 0z zgz ax-mp
      00id 4sqlem4a mp2an eqeltrri syl6eqel ssriv wa csn cun nnnn0 adantr npcan
      eqtr4d cuz 1z zsubcl nn0uz 0cn fveq2i eqtr4i syl6eleq eluzp1m1 sylancr wo
      nncn wi cle 1re lt01 a1d cdivides cdiv cmul wne ad2antrr ad2antrl eluz2b2
      id cr zcn simplbi divcan2 syl3anc cvv simprl sseldd simprr divides2 mpbid
      wb crp nnrp syl2anc a1i nngt0 wn 2re ad2antll mpbird oveq1d eleq1d sylbid
      nnre 2z 3syl eqsstrd ex jaoi fzsuc2 eqtrd simpr elnn1uz2 0re ltleii absid
      sq1 addid1i wrex eluzelz elfzuz nnne0 2nn0 eleqtri ovex simplr syl5ss w3a
      fzss1 elfzm11 elfzelz rpdivcl syl2an simprbi ltdiv2 syl33anc div1 breqtrd
      rpge0 mpbir3and mul4sq eqeltrrd expr rexlimdva ralnex cprime isprm3 baibr
      wral uzp1 df-2 crab ccnv csup prmnn readdcli ltp1 eluzle ltne necomd uzid
      ltletrd dvdsprm necon3bbid nnz 2ne0 prmz syl5ibr mtod simpl nneo peano2zm
      2cn idi eqtr2d cbvrabv 4sqlem17 expdimp syl5bir pm2.61d sylbi imp eqeltrd
      eqid snssd unssd nnind eqsstr3d eluzfz2 eleq2s 4sqlem1 eqssi ) UEEUAUEEUA
      UFZUEHZIUYDJKZEUYDUYEUYFIUYDLMKZLNKZJKZEUYEUYHUYDIJUYEUYDURHZLURHZUYHUYDO
      ZUYDUGUHUYDLUIUJZUKUYEUYGPHUYIEULZUYDUMIUBUFZLNKZJKZEULIIJKZEULIUYDLNKZJK
      ZEULZUYNUYNUBUAUYGUYOLOZUYQUYREVUBUYPIIJVUBUYPLLNKIUYOLLNUNLUHUOUPUKUSUYO
      UYDOZUYQUYTEVUCUYPUYSIJUYOUYDLNUNUKUSUYOUYGOZUYQUYIEVUDUYPUYHIJUYOUYGLNUN
      UKUSZVUEUAUYREUYDUYRHUYDIEUYDIUQIUTVAZQVBKZVUGMKZIEVUHIIMKIVUGIVUGIMVUGIQ
      VBKIVUFIQVBVCVDVEVFZVUIVGVMVFIVHHZVUJVUHEHIVIHZVUJVJIVKVLZVULABCDIIEFGVNV
      OVPVQVRUYDPHZVUAUYNVUMVUAVSZUYIUYTUYSLMKZVTZWAZEVUNUYIIVUOJKZVUQVUNUYHVUO
      IJVUNUYHUYDVUOVUNUYEUYLVUMUYEVUAUYDWBWCZUYMRVUNUYJUYKVUOUYDOZVUMUYJVUAUYD
      WQZWCUHUYDLWDZUJZWEUKVUNVUKUYSILNKZWFVAHZVURVUQOVJVUNVVDVIHZUYDVVDLMKZWFV
      AZHVVEVUKLVIHZVVFVJWGILWHVOVUNUYDUEVVHVUSUEIWFVAZVVHWIVVGIWFIURHUYKVVGIOW
      JUHILWDVOWKWLWMVVDUYDWNWOIUYSUUAWOUUBVUNUYTVUPEVUMVUAUUCVUNVUOEVUNVUOUYDE
      VVCVUMVUAUYDEHZVUMUYDLOZUYDQWFVAZHZWPVUAVVKWRZUYDUUDVVLVVOVVNVVLVVKVUAVVL
      UYDLEVVLXJLUTVAZQVBKZVUGMKZLEVVRLIMKLVVQLVUGIMVVQLQVBKLVVPLQVBLXKHZILWSSV
      VPLOWTILUUEWTXAUUFLUUGVOVDUUHVFZVUIVGLUHUUIVFLVHHZVUJVVREHVVIVWAWGLVKVLZV
      ULABCDLIEFGVNVOVPVQXBVVNVUAVVKVVNVUAVSZUCUFZUYDXCSZUCQUYSJKZUUJZVVKVWCVWE
      VVKUCVWFVWCVWDVWFHZVWEVVKVWCVWHVWEVSZVSZVWDUYDVWDXDKZXEKZUYDEVWJUYJVWDURH
      ZVWDIXFZVWLUYDOVWJUYDVIHZUYJVVNVWOVUAVWIQUYDUUKXGZUYDXLRZVWJVWDPHZVWMVWJV
      WDVVMHZVWRVWHVWSVWCVWEVWDQUYSUULXHZVWSVWRLVWDTSZVWDXIZXMRZVWDWQRVWJVWRVWN
      VXCVWDUUMRZUYDVWDXNXOVWJVWDEHVWKEHVWLEHVWJVWFEVWDVWJVWFUYTEQVVJHUYSXPHVWF
      UYTULQUEVVJUUNWIUUOUYDLNUUPQIUYSXPUUTVOVVNVUAVWIUUQZUURVWCVWHVWEXQXRVWJUY
      TEVWKVXEVWJVWKUYTHZVWKVIHZIVWKWSSZVWKUYDTSZVWJVUKVWOVXFVXGVXHVXIUUSYBVJVW
      PVWKIUYDUVAWOVWJVWEVXGVWCVWHVWEXSVWJVWDVIHZVWNVWOVWEVXGYBVWHVXJVWCVWEVWDQ
      UYSUVBXHVXDVWPVWDUYDXTXOYAVWJVWKYCHZVXHVWJVUMVWRVXKVVNVUMVUAVWIVVNVUMLUYD
      TSUYDXIXMXGZVXCVUMUYDYCHVWDYCHVXKVWRUYDYDVWDYDUYDVWDUVCUVDYEVWKUVJRVWJVWK
      UYDLXDKZUYDTVWJVXAVWKVXMTSZVWJVWSVXAVWTVWSVWRVXAVXBUVERVWJVVSVWDXKHZUYDXK
      HZILTSZIVWDTSZIUYDTSZVXAVXNYBVVSVWJWTYFVWJVWRVXOVXCVWDYORVWJVUMVXPVXLUYDY
      OZRVXQVWJXAYFVWJVWRVXRVXCVWDYGRVWJVUMVXSVXLUYDYGRLVWDUYDUVFUVGYAVWJUYJVXM
      UYDOVWQUYDUVHRUVIUVKXRABCDVWDVWKEFGUVLYEUVMUVNUVOVWGYHVWEYHUCVWFUVTZVWCVV
      KVWEUCVWFUVPVWCVYAUYDUVQHZVVKVVNVYAVYBYBVUAVYBVVNVYAUCUYDUVRUVSWCVVNVUAVY
      BVVKVVNUYDQOZUYDQLMKZWFVAHZWPVUAVYBVSZVVKWRZQUYDUWAVYCVYGVYEVYCVVKVYFVYCU
      YDQEVYCXJVVQVVQMKZQEVYHLLMKQVVQLVVQLMVVTVVTVGUWBWLVWAVWAVYHEHVWBVWBABCDLL
      EFGVNVOVPVQXBVYEVYFVVKVYEVYFVSZABCDUYDEUYOUYDXEKZEHZUBPUWCZUDFVYLXKTUWDUW
      EZUYSQXDKZGVYIVYNPHZVUOQXDKZPHZYHZVYIVYQQUYDXCSZVYIVYSYHQUYDXFVYIUYDQVYIQ
      XKHZVXPQUYDTSUYDQXFVYTVYIYIYFZVYIVUMVXPVYBVUMVYEVUAUYDUWFYJZVXTRZVYIQVYDU
      YDWUAVYDXKHVYIQLYIWTUWGYFWUCVYIVYTQVYDTSWUAQUWHRVYEVYDUYDWSSVYFVYDUYDUWIW
      CUWMQUYDUWJXOUWKVYIVYSQUYDVYIQVVMHZVYBVYSQUYDOYBQVIHZWUDYPQUWLVLVYEVUAVYB
      XSZUYDQUWNWOUWOYKVYIVYQUYDQXDKZPHZVYSVYIVYPWUGPVYIVUOUYDQXDVYIUYJUYKVUTVY
      IVUMUYJWUBVVARUHVVBUJZYLYMWUHVYSVYIWUGVIHZWUGUWPVYIWUEQIXFZVWOVYSWUJYBWUE
      VYIYPYFWUKVYIUWQYFZVYBVWOVYEVUAUYDUWRYJZQUYDXTXOUWSYNUWTVYIUYSVVMHZUYSPHZ
      VYOVYRYBVYIWUEVYEWUNYPVYEVYFUXAQUYDWNWOWUNWUOLUYSTSUYSXIXMUYSUXBYQYKVYIQV
      YNXEKZLMKVUOUYDVYIWUPUYSLMVYIUYSURHZQURHZWUKWUPUYSOVYIVWOUYSVIHWUQWUMUYDU
      XCUYSXLYQWURVYIUXDYFWULUYSQXNXOZYLVYIVUTWRWUIUXEUXFWUFVYIIWUPJKUYTEVYIWUP
      UYSIJWUSUKVYEVUAVYBXQYRVYKUDUFZUYDXEKZEHUBUDPUYOWUTOVYJWVAEUYOWUTUYDXEUNY
      MUXGVYMUXOUXHYSYTRUXIYNUXJUXKYSYTUXLUXMUXNUXPUXQYRYSUXRRUXSUYDUYFHUYDVVJU
      EIUYDUXTWIUYAXRVRABCDEFGUYBUYC $.
      $( [14-Jul-2014] $)
  $}

  ${
    $d a b c d m n w x y z A $.
    $( Lagrange's four-square theorem, or Bachet's conjecture: every
       nonnegative integer is expressible as a sum of four squares.
       (Contributed by Mario Carneiro, 16-Jul-2014.) $)
    4sq $p |- ( A e. NN0 <-> E. a e. ZZ E. b e. ZZ E. c e. ZZ E. d e. ZZ
        A = ( ( ( a ^ 2 ) + ( b ^ 2 ) ) + ( ( c ^ 2 ) + ( d ^ 2 ) ) ) ) $=
      ( vx vy vz vw vm vn cv c2 cexp co caddc wceq cz wrex 2rexbidv cn0 4sqlem2
      cab eqeq1 cbvabv 4sqlem18 ) FGHIAUAJBCDEFGHIJLZFLMNOGLMNOPOHLMNOILMNOPOPO
      ZQZIRSHRSZGRSFRSZJUCKUKKLZUHQZIRSHRSZGRSFRSJKUGULQZUJUNFGRRUOUIUMHIRRUGUL
      UHUDTTUEUFUB $.
      $( [16-Jul-2014] $)
  $}

