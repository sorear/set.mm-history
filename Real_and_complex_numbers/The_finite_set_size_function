$(
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
               The ` # ` (finite set size) function
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
$)

  $c # $.

  $( Extend the definition of a class to include the ` # ` function. $)
  chash $a class # $.

  ${
    $d x y $.
    $( Define the ` # ` function, which gives the cardinality of a finite set
       as a member of ` NN0 ` . $)
    df-hash $a |- # = ( rec ( { <. x , y >. | y = ( x + 1 ) } , 0 ) o. card )
        $.
  $}

  ${
    $d G n $.  $d n x y $.
    hashgf1o.1 $e |-
                  G = ( rec ( { <. x , y >. | y = ( x + 1 ) } , 0 ) |` om ) $.
    $( ` G ` maps ` om ` one-to-one onto ` NN0 ` .  (Contributed by Paul
       Chapman, 22-Jun-2011.) $)
    hashgf1o $p |- G : om -1-1-onto-> NN0 $=
      ( vn com cn0 wf1o cc0 cv cle wbr cz crab 0z om2uzf1oi wceq wb nn0zrab
      f1oeq3 ax-mp mpbir ) FGCHZFIEJKLEMNZCHZABEICODPGUDQUCUERESGUDFCTUAUB $.
      $( [22-Jun-2011] $)
  $}

  ${
    $d x y $.
    $( A 1-based finite sequence of integers is finite.  (Contributed by Paul
       Chapman, 22-Jun-2011.)  (Proof shortened by Mario Carneiro,
       13-Feb-2013.) $)
    fz1fi $p |- ( N e. NN0 -> ( 1 ... N ) e. Fin ) $=
      ( vy vx cn0 wcel c1 cfz co cfn cv caddc wceq copab cc0 crdg com cres
      ccnv cfv wf1o eqid hashgf1o f1ocnvdm mpan con0 cin onfin2 inss2 eqsstri
      sseli syl cvv cen wbr wb fvex fzennn enfi sylancr mpbird ) ADEZFAGHZIEZAB
      JCJFKHLCBMNOPQZRZSZIEZVAVFPEZVGPDVDTVAVHCBVDVDUAZUBPDAVDUCUDPIVFPUEIUFIUG
      UEIUHUIUJUKVAVFULEVBVFUMUNVCVGUOAVEUPCBVDAVIUQVBVFULURUSUT $.
      $( [13-Feb-2013] $) $( [22-Jun-2011] $)
  $}

  ${
    $d x y $.
    $( A 1-based finite sequence of integers is finite.  (Contributed by Paul
       Chapman, 22-Jun-2011.) $)
    fz1fiOLD $p |- ( N e. NN0 -> ( 1 ... N ) e. Fin ) $=
      ( vy vx cn0 wcel c1 cfz co ccrd cfv com cfn cv caddc wceq copab cc0 crdg
      cres ccnv eqid cardfz wf1o hashgf1o f1ocnvdm mpan eqeltrd cvv cen wbr wb
      oprex cardid enfi mp2an con0 cardon onfin ax-mp bitr3i sylibr ) ADEZFAGHZ
      IJZKEZVCLEZVBVDABMCMFNHOCBPQRKSZTJZKCBVGAVGUAZUBKDVGUCVBVHKECBVGVIUDKDAVG
      UEUFUGVFVDLEZVEVCUHEVDVCUIUJVJVFUKFAGULVCUMVDVCUHUNUOVDUPEVJVEUKVCUQVDURU
      SUTVA $.
      $( [22-Jun-2011] $)
  $}

  ${
    $d A m n z $.  $d m n x y $.
    hashgvalNEW.1 $e |-
                  G = ( rec ( { <. x , y >. | y = ( x + 1 ) } , 0 ) |` om ) $.
    $( The value of the ` # ` function in terms of the mapping ` G ` from
       ` om ` to ` NN0 ` .  The proof avoids the use of ~ ax-ac .  (Contributed
       by Paul Chapman, 22-Jun-2011.)  (Revised by Mario Carneiro,
       12-Feb-2013.) $)
    hashgval $p |- ( A e. Fin -> ( G ` ( card ` A ) ) = ( # ` A ) ) $=
      ( vn vm vz cfn wcel ccrd cfv cv c1 caddc co wceq copab cc0 crdg chash
      com cres weq opreq1 eqeq2d eqeq1 sylan9bb cbvopabv rdgeq1 reseq1 mp2b
      eqtri fveq1i ficardom fvres syl syl5eq ccom df-hash cdm cen wbr con0
      crab cint wex cab wrex finnum breq2 rabbidv inteqd exbidv elabg cvv
      intexrab isset bitri syl6rbbr mpbid df-card dmeqi dmopab syl6eleqr wfun
      wfn rdgfnon fnfun ax-mp funopabeq funeqi mpbir fvco mp3an12 eqtr4d ) CIJZ
      CKLZDLZWRFMZGMZNOPZQZGFRZSTZLZCUALZWQWSWRXEUBUCZLZXFWRDXHDBMZAMZNOPZQZABR
      ZSTZUBUCZXHEXNXDQXOXEQXPXHQXMXCABGFAGUDZXMXJXBQBFUDXCXQXLXBXJXKXANOUEUFXJ
      WTXBUGUHUISXNXDUJXOXEUBUKULUMUNWQWRUBJXIXFQCUOWRUBXEUPUQURWQXGCXEKUSZLZXF
      CUAXRGFUTUNWQCKVAZJZXSXFQZWQCWTHMZXAVBVCZHVDVEZVFZQZFVGZGVHZXTWQYCCVBVCZH
      VDVIZCYIJZHCVJWQYLWTYJHVDVEZVFZQZFVGZYKYHYPGCIXACQZYGYOFYQYFYNWTYQYEYMYQY
      DYJHVDXACYCVBVKVLVMUFVNVOYKYNVPJYPYJHVDVQFYNVRVSVTWAXTYGGFRZVAYIKYRGFHWBZ
      WCYGGFWDUMWEXEWFZKWFZYAYBXEVDWGYTSXDWHVDXEWIWJUUAYRWFGFYFWKKYRYSWLWMCXEKW
      NWOUQURWP $.
      $( [12-Feb-2013] $) $( [22-Jun-2011] $)

    $( ` ``' G ` maps the ` # ` function's value to ` card ` .  (Contributed by
       Paul Chapman, 22-Jun-2011.) $)
    hashginv $p |- ( A e. Fin -> ( `' G ` ( # ` A ) ) = ( card ` A ) ) $=
      ( cfn wcel ccrd cfv chash wceq ccnv hashgval com wi ficardom cn0 wf1o
      hashgf1o f1ocnvfv mpan syl mpd ) CFGZCHIZDICJIZKZUFDLIUEKZABCDEMUDUENGZUG
      UHOZCPNQDRUIUJABDESNQUEUFDTUAUBUC $.
      $( [22-Jun-2011] $)
  $}

  ${
    $d x y z $.
    hashgvalOLD.1 $e |-
                  G = ( rec ( { <. x , y >. | y = ( x + 1 ) } , 0 ) |` om ) $.
    $( The value of the ` # ` function in terms of the mapping ` G ` from
       ` om ` to ` NN0 ` .  (Contributed by Paul Chapman, 22-Jun-2011.) $)
    hashgvalOLD $p |- ( A e. Fin -> ( G ` ( card ` A ) ) = ( # ` A ) ) $=
      ( vz cfn wcel ccrd cfv cv c1 caddc co wceq copab cc0 crdg chash com cres
      fveq1i ficardom fvres syl syl5eq cvv elisset wfun wfn con0 rdgfnon fnfun
      ax-mp cen wbr crab cint wrex numth2 intexrab mpbi wa df-card visset
      biantrur opabbii eqtri fnopab2 w3a ccom df-hash fvco2 mp3an12 eqtr4d ) CG
      HZCIJZDJZVQBKZAKZLMNOABPZQRZJZCSJZVPVRVQWBTUAZJZWCVQDWEEUBVPVQTHWFWCOCUCV
      QTWBUDUEUFVPCUGHZWDWCOZCGUHWBUIZIUGUJZWGWHWBUKUJWIQWAULUKWBUMUNABUGFKVTUO
      UPZFUKUQURZIWKFUKUSWLUGHFVTUTWKFUKVAVBIVSWLOZABPVTUGHZWMVCZABPABFVDWMWOAB
      WNWMAVEVFVGVHVIWIWJWGVJWDCWBIVKZJWCCSWPABVLUBUGCWBIVMUFVNUEVO $.
      $( [22-Jun-2011] $)

    $( ` ``' G ` maps the ` # ` function's value to ` card ` .  (Contributed by
       Paul Chapman, 22-Jun-2011.) $)
    hashginvOLD $p |- ( A e. Fin -> ( `' G ` ( # ` A ) ) = ( card ` A ) ) $=
      ( cfn wcel ccrd cfv chash wceq ccnv hashgval com wi ficardom cn0 wf1o
      hashgf1o f1ocnvfv mpan syl mpd ) CFGZCHIZDICJIZKZUFDLIUEKZABCDEMUDUENGZUG
      UHOZCPNQDRUIUJABDESNQUEUFDTUAUBUC $.
      $( [22-Jun-2011] $)
  $}

  ${
    $d A x $.  $d B x $.  $d x y $.
    $( The set ` ( 1 ... N ) ` has ` N ` elements.  (Contributed by Paul
       Chapman, 22-Jun-2011.) $)
    hashfz1 $p |- ( N e. NN0 -> ( # ` ( 1 ... N ) ) = N ) $=
      ( vy vx cn0 wcel c1 cfz co ccrd cfv cv caddc wceq copab cc0 crdg com
      cres chash cfn fz1fi eqid hashgval syl ccnv cardfz eqcomd fveq2d wf1o
      hashgf1o f1ocnvfv2 mpan eqtr3d ) ADEZFAGHZIJZBKCKFLHMCBNOPQRZJZUOSJZAUNUO
      TEURUSMAUACBUOUQUQUBZUCUDUNAUQUEJZUQJZURAUNVAUPUQUNUPVACBUQAUTUFUGUHQDUQU
      IUNVBAMCBUQUTUJQDAUQUKULUMUM $.
      $( [22-Jun-2011] $)

    $( Two finite sets have the same number of elements iff they are
       equinumerate.  (Contributed by Paul Chapman, 22-Jun-2011.) $)
    hashen $p |- ( ( A e. Fin /\ B e. Fin ) ->
                   ( ( # ` A ) = ( # ` B ) <-> A ~~ B ) ) $=
      ( vy vx cfn wcel wa chash cfv wceq ccrd cen wbr cv c1 caddc co copab cc0
      crdg com cres ccnv fveq2 eqid hashginv eqeqan12d syl5ib hashgval impbid
      wi con0 wrex finnum cardid2 syl ensymg mpd breq1 anbi2d biimprcd entr
      syl6 syl2an carden2b adantl bitrd ) AEFZBEFZGZAHIZBHIZJZAKIZBKIZJZABLMZVJ
      VMVPVMVKCNDNZOPQJDCRSTUAUBZUCZIZVLVTIZJVJVPVKVLVTUDVHVIWAVNWBVODCAVSVSUEZ
      UFDCBVSWCUFUGUHVPVNVSIZVOVSIZJVJVMVNVOVSUDVHVIWDVKWEVLDCAVSWCUIDCBVSWCUIU
      GUHUJVJVPVQVHAVNLMZVOBLMZVPVQUKVIVHVNALMZWFVHVRALMDULUMWHDAUNDAUOUPVNAEUQ
      URVIVRBLMDULUMWGDBUNDBUOUPWFWGGZVPWFVNBLMZGZVQVPWKWIVPWJWGWFVNVOBLUSUTVAA
      VNBVBVCVDVIVQVPUKVHABEVEVFUJVG $.
      $( [12-Feb-2013] $) $( [22-Jun-2011] $)
  $}

  ${
    $d A x $.  $d B x $.  $d x y $.
    $( The set ` ( 1 ... N ) ` has ` N ` elements.  (Contributed by Paul
       Chapman, 22-Jun-2011.) $)
    hashfz1OLD $p |- ( N e. NN0 -> ( # ` ( 1 ... N ) ) = N ) $=
      ( vy vx cn0 wcel c1 cfz co ccrd cfv cv caddc wceq copab cc0 crdg com
      cres chash cfn fz1fi eqid hashgval syl ccnv cardfz eqcomd fveq2d wf1o
      hashgf1o f1ocnvfv2 mpan eqtr3d ) ADEZFAGHZIJZBKCKFLHMCBNOPQRZJZUOSJZAUNUO
      TEURUSMAUACBUOUQUQUBZUCUDUNAUQUEJZUQJZURAUNVAUPUQUNUPVACBUQAUTUFUGUHQDUQU
      IUNVBAMCBUQUTUJQDAUQUKULUMUM $.
      $( [22-Jun-2011] $)

    $( Two finite sets have the same number of elements iff they are
       equinumerate.  The proof avoids the use of ~ ax-ac .  (Contributed by
       Paul Chapman, 22-Jun-2011.)  (Revised by Mario Carneiro,
       12-Feb-2013.) $)
    hashenOLD $p |- ( ( A e. Fin /\ B e. Fin ) ->
                   ( ( # ` A ) = ( # ` B ) <-> A ~~ B ) ) $=
      ( vy vx cfn wcel wa chash cfv wceq ccrd cen wbr cv c1 caddc co copab cc0
      crdg com cres ccnv fveq2 eqid hashginv eqeqan12d syl5ib hashgval impbid
      wi con0 wrex finnum cardid2 syl ensymg mpd breq1 anbi2d biimprcd entr
      syl6 syl2an carden2b adantl bitrd ) AEFZBEFZGZAHIZBHIZJZAKIZBKIZJZABLMZVJ
      VMVPVMVKCNDNZOPQJDCRSTUAUBZUCZIZVLVTIZJVJVPVKVLVTUDVHVIWAVNWBVODCAVSVSUEZ
      UFDCBVSWCUFUGUHVPVNVSIZVOVSIZJVJVMVNVOVSUDVHVIWDVKWEVLDCAVSWCUIDCBVSWCUIU
      GUHUJVJVPVQVHAVNLMZVOBLMZVPVQUKVIVHVNALMZWFVHVRALMDULUMWHDAUNDAUOUPVNAEUQ
      URVIVRBLMDULUMWGDBUNDBUOUPWFWGGZVPWFVNBLMZGZVQVPWKWIVPWJWGWFVNVOBLUSUTVAA
      VNBVBVCVDVIVQVPUKVHABEVEVFUJVG $.
      $( [12-Feb-2013] $) $( [22-Jun-2011] $)

    $( Two finite sets have the same number of elements iff they are
       equinumerate.  (Contributed by Paul Chapman, 22-Jun-2011.) $)
    hashenOLDOLD $p |- ( ( A e. Fin /\ B e. Fin ) ->
                   ( ( # ` A ) = ( # ` B ) <-> A ~~ B ) ) $=
      ( vy vx cfn wcel wa chash cfv wceq ccrd cen wbr cv c1 caddc co copab cc0
      crdg com cres ccnv fveq2 eqid hashginv eqeqan12d syl5ib hashgval impbid
      carden bitrd ) AEFZBEFZGZAHIZBHIZJZAKIZBKIZJZABLMUOURVAURUPCNDNOPQJDCRSTU
      AUBZUCZIZUQVCIZJUOVAUPUQVCUDUMUNVDUSVEUTDCAVBVBUEZUFDCBVBVFUFUGUHVAUSVBIZ
      UTVBIZJUOURUSUTVBUDUMUNVGUPVHUQDCAVBVFUIDCBVBVFUIUGUHUJABEEUKUL $.
      $( [22-Jun-2011] $)
  $}

  ${
    $d j k $.
    $( Closure of the ` # ` function.  (Contributed by Paul Chapman,
       26-Oct-2012.) $)
    hashcl $p |- ( A e. Fin -> ( # ` A ) e. NN0 ) $=
      ( vk vj cfn wcel ccrd cfv cv c1 caddc co wceq copab cc0 crdg com cres
      chash cn0 eqid hashgval ficardom wf wf1o hashgf1o f1of ax-mp ffvelrn
      mpan syl eqeltrrd ) ADEZAFGZBHCHIJKLCBMNOPQZGZARGSCBAUNUNTZUAULUMPEZUOSEZ
      AUBPSUNUCZUQURPSUNUDUSCBUNUPUEPSUNUFUGPSUMUNUHUIUJUK $.
      $( [26-Oct-2012] $)
  $}

  $( Two ways of saying a finite set is empty.  (Contributed by Paul Chapman,
     26-Oct-2012.) $)
  hash0 $p |- ( A e. Fin -> ( ( # ` A ) = 0 <-> A = (/) ) ) $=
    ( chash cfv cc0 wceq c0 cfn wcel c1 cfz co eqid cn0 wb 0nn0 fz1n ax-mp
    mpbir fveq2i hashfz1 eqtr3i eqeq2i cen wbr 0fin hashen mpan2 en0 syl6bb
    syl5bbr ) ABCZDEUKFBCZEZAGHZAFEZULDUKIDJKZBCZULDUPFBUPFEZDDEZDLDMHZURUSNODP
    QRSUTUQDEODTQUAUBUNUMAFUCUDZUOUNFGHUMVANUEAFUFUGAUHUIUJ $.
    $( [26-Oct-2012] $)

  $( The value of the ` # ` function on a singleton.  (Contributed by Paul
     Chapman, 26-Oct-2012.)  (The proof was shortened by Mario Carneiro,
     13-Feb-2013.) $)
  hashsng $p |- ( A e. V -> ( # ` { A } ) = 1 ) $=
    ( wcel csn chash cfv c1 cen wbr wceq cz 1z en2sn mpan2 cfn wb snfi hashen
    mp2an sylibr cfz co cn0 1nn0 hashfz1 ax-mp fzsn fveq2d syl5reqr syl6eq ) AB
    CZADZEFZGDZEFZGUKULUNHIZUMUOJZUKGKCZUPLAGBKMNULOCUNOCUQUPPAQGQULUNRSTURUOGJ
    LURGGGUAUBZEFZUOGUCCUTGJUDGUEUFURUSUNEGUGUHUIUFUJ $.
    $( [13-Feb-2013] $) $( [26-Oct-2012] $)

  $( The value of the ` # ` function on a singleton.  (Contributed by Paul
     Chapman, 26-Oct-2012.) $)
  hashsngOLD $p |- ( A e. V -> ( # ` { A } ) = 1 ) $=
    ( wcel csn c1 cen wbr chash cfv wceq cz 1z en2sn mpan2 cfz co fzsn ax-mp
    fveq2i cn0 1nn0 hashfz1 eqtr3i eqeq2i cfn wb snfi hashen mp2an bitr3i
    sylibr ) ABCZADZEDZFGZUMHIZEJZULEKCZUOLAEBKMNUQUPUNHIZJZUOUSEUPEEOPZHIZUSEV
    AUNHURVAUNJLEQRSETCVBEJUAEUBRUCUDUMUECUNUECUTUOUFAUGEUGUMUNUHUIUJUK $.
    $( [26-Oct-2012] $)

  ${
    $d F f $.  $d N f $.
    $( The value of the ` # ` function on a finite 1-based sequence.
       (Contributed by Paul Chapman, 26-Oct-2012.) $)
    fseq1hash $p |- ( ( N e. NN0 /\ F Fn ( 1 ... N ) ) -> ( # ` F ) = N ) $=
      ( vf cn0 wcel c1 cfz co wfn wa cvv chash cfv wceq oprex fnex mpan2
      adantl cv wi fneq1 anbi2d fveq2 eqeq1d imbi12d cen wbr cdm wfun fnfun
      visset fundmen syl wb fndm breq1 mpbid cfn fz1fi adantr enfi mpan biimpa
      syl11anc hashen mpbird hashfz1 eqtr3d vtoclg com12 mpd ) BDEZAFBGHZIZJZAK
      EZALMZBNZVNVPVLVNVMKEVPFBGOVMKAPQRVPVOVRVLCSZVMIZJZVSLMZBNZTVOVRTCAKVSANZ
      WAVOWCVRWDVTVNVLVMVSAUAUBWDWBVQBVSALUCUDUEWAVMLMZWBBWAWEWBNZVMVSUFUGZVTWG
      VLVTVSUHZVSUFUGZWGVTVSUIWIVMVSUJVSCUKZULUMVTWHVMNWIWGUNVMVSUOWHVMVSUFUPUM
      UQRZWAVMUREZVSUREZWFWGUNVLWLVTBUSUTZWAWGWLWMWKWNWGWLWMVSKEWGWLWMUNWJVMVSK
      VAVBVCVDVMVSVEVDVFVLWEBNVTBVGUTVHVIVJVK $.
      $( [26-Oct-2012] $)
  $}

