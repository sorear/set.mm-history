$(
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
                          Legendre symbol
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
$)

  $c /L $.

  $( Extend class notation with the Legendre symbol function. $)
  clgs $a class /L $.

  ${
    $d a m n $.
    $( Define the Legendre symbol (actually the Kronecker symbol, which extends
       the Legendre symbol to all integers). $)
    df-lgs $a |- /L = ( a e. ZZ , n e. ZZ |-> if ( n = 0 ,
      if ( ( a ^ 2 ) = 1 , 1 , 0 ) , ( if ( ( n < 0 /\ a < 0 ) , -u 1 , 1 ) x.
      ( seq 1 ( x. , ( m e. NN |-> if ( m e. Prime ,
        ( if ( m = 2 , if ( 2 || a , 0 , if ( ( a mod 8 ) e. { 1 , 7 } ,
          1 , -u 1 ) ) , ( ( ( ( a ^ ( ( m - 1 ) / 2 ) ) + 1 ) mod m ) - 1 ) )
            ^ ( m pCnt n ) ) , 1 ) ) ) ` ( abs ` n ) ) ) ) ) $.
  $}

  $( A prime not equal to ` 2 ` is odd. $)
  oddprm $p |- ( ( N e. Prime /\ N =/= 2 ) -> ( ( N - 1 ) / 2 ) e. NN ) $=
    ( cprime wcel c2 wne wa c1 co cz cc0 clt wbr cn cdivides wn adantr wceq syl
    wb 2z cmin cdiv prmz cuz uzid ax-mp dvdsprm eqcom syl6bb necon3bbid biimpar
    cfv mpan 1z 2prm nprmdvds1 omoe mpanr12 syl2anc cn0 prmnn nnm1nn0 nn0z 2ne0
    divides2 mp3an12 mpbid prmuz2 uz2m1nn cr nnre nngt0 2re idi divgt0 sylanbrc
    2pos elnnz ) ABCZADEZFZAGUAHZDUBHZICZJWCKLZWCMCWADWBNLZWDWAAICZDANLZOZWFVSW
    GVTAUCPVSWIVTVSWHADVSWHDAQZADQDDUDULZCZVSWHWJSDICZWLTDUEUFADUGUMDAUHUIUJUKW
    GWIFGICDGNLOZWFUNDBCWNUODUPUFAGUQURUSWAWBICZWFWDSZWAWBUTCZWOWAAMCZWQVSWRVTA
    VAPAVBRWBVCRWMDJEWOWPTVDDWBVEVFRVGWAWBMCZWEWAAWKCZWSVSWTVTAVHPAVIRWSWBVJCZJ
    WBKLZWEWBVKWBVLXAXBFDVJCZJDKLZWEXCVMVNXDVQVNWBDVOURUSRWCVRVP $.
    $( [4-Feb-2015] $)

  ${
    $( When ` a ` is coprime to the prime ` p ` , ` a ^ ( ( p - 1 ) / 2 ) ` is
       equivalent ` mod p ` to ` 1 ` or ` -u 1 ` , and so adding ` 1 ` makes it
       equivalent to ` 0 ` or ` 2 ` . $)
    lgslem1 $p |- ( ( ( A e. ZZ /\ P e. Prime /\ P =/= 2 ) /\ -. P || A ) ->
      ( ( ( A ^ ( ( P - 1 ) / 2 ) ) + 1 ) mod P ) e. { 0 , 2 } ) $=
      ( cz wcel c2 cdivides wbr c1 cmin co cexp cmo cc0 wceq syl2anc wb syl3anc
      syl cn0 a1i cprime wne w3a wn wa cdiv caddc cpr cmul cphi cfv cgcd simpl2
      wo cn prmnn simpl1 gcdcom simpr coprm mpbid eqtrd eulerth nnm1nn0 eqeltrd
      prmz phiprm zexpcl 1z moddvds cc nn0cn 2cn 2ne0 divcan1 eqtr4d oveq2d zcn
      simpl3 oddprm nnnn0 expmul oveq1d sq1 oveq2i syl6eqr ax-1cn subsq sylancl
      2nn0 breqtrd peano2z peano2zm euclemma divides3 nn0zi cr crp cle clt nnrp
      2re nn0ge0i prmuz2 eluzle nnre ltlen mpbir2and modid syl22anc eqeq2d df-2
      cuz pnpcan2 syl5eq breq2d 3bitr3rd orbi12d ovex elpr sylibr ) ACDZBUADZBE
      UBZUCZBAFGUDZUEZABHIJZEUFJZKJZHUGJZBLJZMNZYLENZUNZYLMEUHDYGBYKFGZBYJHIJZF
      GZUNZYOYGBYKYQUIJZFGZYSYGBABUJUKZKJZHIJZYTFYGUUCBLJHBLJNZBUUDFGZYGBUODZYB
      ABULJZHNUUEYGYCUUGYBYCYDYFUMZBUPRZYBYCYDYFUQZYGUUHBAULJZHYGYBBCDZUUHUULNU
      UKYGYCUUMUUIBVFRABUROYGYFUULHNZYEYFUSYGYCYBYFUUNPUUIUUKBAUTOVAVBABVCQYGUU
      GUUCCDZHCDZUUEUUFPUUJYGYBUUBSDUUOUUKYGUUBYHSYGYCUUBYHNUUIBVGRZYGUUGYHSDZU
      UJBVDRZVEAUUBVHOUUPYGVITUUCHBVJQVAYGUUDYJEKJZHEKJZIJZYTYGUUDUUTHIJUVBYGUU
      CUUTHIYGUUCAYIEUIJZKJZUUTYGUUBUVCAKYGUUBYHUVCUUQYGYHVKDZEVKDZEMUBZUVCYHNY
      GUURUVEUUSYHVLRUVFYGVMTUVGYGVNTYHEVOQVPVQYGAVKDZYISDZESDZUVDUUTNYGYBUVHUU
      KAVRRYGYIUODZUVIYGYCYDUVKUUIYBYCYDYFVSZBVTOYIWARZUVJYGWJTAYIEWBQVBWCUVAHU
      UTIWDWEWFYGYJVKDZHVKDZUVBYTNYGYJCDZUVNYGYBUVIUVPUUKUVMAYIVHOZYJVRRZWGYJHW
      HWIVBWKYGYCYKCDZYQCDZUUAYSPUUIYGUVPUVSUVQYJWLRZYGUVPUVTUVQYJWMRBYKYQWNQVA
      YGYPYMYRYNYGUUGUVSYPYMPUUJUWABYKWOOYGYLEBLJZNZBYKEIJZFGZYNYRYGUUGUVSECDZU
      WCUWEPUUJUWAUWFYGEWJWPTYKEBVJQYGUWBEYLYGEWQDZBWRDZMEWSGZEBWTGZUWBENUWGYGX
      BTZYGUUGUWHUUJBXARUWIYGEWJXCTYGUWJEBWSGZYDYGBEXMUKDZUWLYGYCUWMUUIBXDREBXE
      RUVLYGUWGBWQDZUWJUWLYDUEPUWKYGUUGUWNUUJBXFREBXGOXHEBXIXJXKYGUWDYQBFYGUWDY
      KHHUGJZIJZYQEUWOYKIXLWEYGUVNUVOUVOUWPYQNUVRUVOYGWGTZUWQYJHHXNQXOXPXQXRVAY
      LMEYKBLXSXTYA $.
      $( [4-Feb-2015] $)

    lgslem2.z $e |- Z = { x e. ZZ | ( abs ` x ) <_ 1 } $.
    $( The set ` Z ` of all integers with absolute value at most ` 1 ` contains
       ` { -u 1 , 0 , 1 } ` . $)
    lgslem2 $p |- ( -u 1 e. Z /\ 0 e. Z /\ 1 e. Z ) $=
      ( c1 wcel cc0 cz cle wbr 1z ax-mp 1re cabs cfv fveq2 syl6eq breq1d elrab2
      wceq mpbir2an cneg znegcl leidi cv cc ax-1cn absneg cr idi 0re lt01 absid
      ltleii mp2an eqtri 0z abs0 3pm3.2i ) DUAZBEZFBEZDBEZUTUSGEZDDHIZDGEZVCJDU
      BKDLUCZAUDZMNZDHIZVDAUSGBVGUSSZVHDDHVJVHUSMNZDVGUSMOVKDMNZDDUEEVKVLSUFDUG
      KDUHEZFDHIZVLDSVMLUIVNFDUJLUKUMZUIDULUNZUOPQCRTVAFGEVNUPVOVIVNAFGBVGFSZVH
      FDHVQVHFMNFVGFMOUQPQCRTVBVEVDJVFVIVDADGBVGDSZVHDDHVRVHVLDVGDMOVPPQCRTUR
      $.
      $( [4-Feb-2015] $)

    $d x A $.  $d x B $.
    $( The set ` Z ` of all integers with absolute value at most ` 1 ` is
       closed under multiplication. $)
    lgslem3 $p |- ( ( A e. Z /\ B e. Z ) -> ( A x. B ) e. Z ) $=
      ( cz wcel cabs cfv c1 cle wbr wa cmul co wceq cr jca fveq2 breq1d zcn cc0
      zmulcl ad2ant2r cc absmul syl2an abscl absge0 syl adantr 1re a1i lemul12a
      wi adantl syl22anc an4s ax-1cn mulid1i syl6breq eqbrtrd cv elrab2 anbi12i
      imp 3imtr4i ) BFGZBHIZJKLZMZCFGZCHIZJKLZMZMZBCNOZFGZVQHIZJKLZMBDGZCDGZMVQ
      DGVPVRVTVHVLVRVJVNBCUCUDVPVSVIVMNOZJKVHVLVSWCPZVJVNVHBUEGZCUEGZWDVLBUAZCU
      AZBCUFUGUDVPWCJJNOZJKVHVLVJVNWCWIKLZVHVLMZVJVNMZWJWKVIQGZUBVIKLZMZJQGZVMQ
      GZUBVMKLZMZWPWLWJUOVHWOVLVHWEWOWGWEWMWNBUHBUIRUJUKWPWKULUMZVLWSVHVLWFWSWH
      WFWQWRCUHCUIRUJUPWTVIJVMJUNUQVFURJUSUTVAVBRWAVKWBVOAVCZHIZJKLZVJABFDXABPX
      BVIJKXABHSTEVDXCVNACFDXACPXBVMJKXACHSTEVDVEXCVTAVQFDXAVQPXBVSJKXAVQHSTEVD
      VG $.
      $( [4-Feb-2015] $)

    $( The function ` F ` is closed in integers with absolute value less than
       ` 1 ` (namely ` { -u 1 , 0 , 1 } ` although this representation is less
       useful to us). $)
    lgslem4 $p |- ( ( A e. ZZ /\ P e. Prime /\ P =/= 2 ) ->
      ( ( ( ( A ^ ( ( P - 1 ) / 2 ) ) + 1 ) mod P ) - 1 ) e. Z ) $=
      ( cz wcel c2 c1 cmin co cmo wa cc0 cr wceq syl2anc syl a1i ax-1cn wne w3a
      cprime cdivides wbr cdiv cexp caddc crp cn0 simpl1 cn simpl2 simpl3 nnnn0
      oddprm zexpcl zre 0re 1re clt cuz cfv prmuz2 eluz2b2 sylib simpld nnrp 0z
      simpr wb divides3 mpbid 0mod eqtr4d modexp syl221anc oveq1d eqtrd modadd1
      0exp addid2i oveq1i syl6eq nnre simprd 1mod subidi lgslem2 simp2i eqeltri
      cneg syl6eqel wn cpr lgslem1 elpri oveq1 df-neg simp1i eqeltrri 2cn 1p1e2
      wo subaddrii simp3i jaoi pm2.61dan ) BFGZCUCGZCHUAZUBZCBUDUEZBCIJKHUFKZUG
      KZIUHKCLKZIJKZDGZXLXMMZXQIIJKZDXSXPIIJXSXPICLKZIXSXPNIUHKZCLKZYAXSXOOGZNO
      GZIOGZCUIGZXOCLKZNCLKZPXPYCPXSXOFGZYDXSXIXNUJGZYJXIXJXKXMUKZXSXNULGZYKXSX
      JXKYMXIXJXKXMUMZXIXJXKXMUNCUPQZXNUORZBXNUQQXOURRYEXSUSSYFXSUTSXSCULGZYGXS
      YQICVAUEZXSCHVBVCGZYQYRMXSXJYSYNCVDRCVEVFZVGZCVHRZXSYHNXNUGKZCLKZYIXSXINF
      GZYKYGBCLKZYIPYHUUDPYLUUEXSVISYPUUBXSUUFNYIXSXMUUFNPZXLXMVJXSYQXIXMUUGVKU
      UAYLCBVLQVMXSYGYINPUUBCVNRVOBNXNCVPVQXSUUCNCLXSYMUUCNPYOXNWARVRVSXONICVTV
      QYBICLITWBWCWDXSCOGZYRYAIPXSYQUUHUUACWERXSYQYRYTWFCWGQVSVRXTNDITWHIWLZDGZ
      NDGZIDGZADEWIZWJWKWMXLXMWNMXPNHWOGZXRBCWPUUNXPNPZXPHPZXDXRXPNHWQUUOXRUUPU
      UOXQNIJKZDXPNIJWRUUIUUQDIWSUUJUUKUULUUMWTXAWMUUPXQHIJKZDXPHIJWRUURIDHIIXB
      TTXCXEUUJUUKUULUUMXFWKWMXGRRXH $.
      $( [4-Feb-2015] $)
  $}

  ${
    $d a b m n x y z A $.  $d a m x y z F $.  $d n x M $.  $d a m n x y z N $.
    $d a b n y z Z $.
    lgsval.1 $e |- F = ( n e. NN |-> if ( n e. Prime ,
        ( if ( n = 2 , if ( 2 || A , 0 , if ( ( A mod 8 ) e. { 1 , 7 } ,
          1 , -u 1 ) ) , ( ( ( ( A ^ ( ( n - 1 ) / 2 ) ) + 1 ) mod n ) - 1 ) )
            ^ ( n pCnt N ) ) , 1 ) ) $.
    $( Value of the Legendre symbol at an arbitrary integer. $)
    lgsval $p |- ( ( A e. ZZ /\ N e. ZZ ) -> ( A /L N ) = if ( N = 0 ,
      if ( ( A ^ 2 ) = 1 , 1 , 0 ) , ( if ( ( N < 0 /\ A < 0 ) , -u 1 , 1 ) x.
      ( seq 1 ( x. , F ) ` ( abs ` N ) ) ) ) ) $=
      ( va cc0 wceq c2 cexp co c1 cif clt wbr cfv cmul cmo cmin oveq1d vm cz cv
      wa cneg cabs cn cprime wcel cdivides c8 cpr cdiv caddc cpc cmpt cseq clgs
      c7 simpr eqeq1d simpl ifbid breq1d biidd breq2d eleq1d ifbieq2d ifbieq12d
      anbi12d oveq2d oveq12d ifeq1d mpteq2dv syl6eqr seqeq3d fveq2d fveq12d cn0
      df-lgs 1nn0 0nn0 keepel elexi ovex ifex ovmpt2a ) FUAADUBUBUAUCZGHZFUCZIJ
      KZLHZLGMZWHGNOZWJGNOZUDZLUEZLMZWHUFPZQBUGBUCZUHUIZWTIHZIWJUJOZGWJUKRKZLUS
      ULZUIZLWQMZMZWJWTLSKIUMKZJKZLUNKZWTRKZLSKZMZWTWHUOKZJKZLMZUPZLUQZPZQKZMDG
      HZAIJKZLHZLGMZDGNOZAGNOZUDZWQLMZDUFPZQCLUQZPZQKZMURWJAHZWHDHZUDZWIYBWMYAY
      EYMYPWHDGYNYOUTZVAYPWLYDLGYPWKYCLYPWJAIJYNYOVBZTVAVCYPWRYIXTYLQYPWPYHWQLY
      PWNYFWOYGYPWHDGNYQVDYPWJAGNYRVDVJVCYPWSYJXSYKYPXRCQLYPXRBUGXAXBIAUJOZGAUK
      RKZXEUIZLWQMZMZAXIJKZLUNKZWTRKZLSKZMZWTDUOKZJKZLMZUPCYPBUGXQUUKYPXAXPUUJL
      YPXNUUHXOUUIJYPXBXBXHXMUUCUUGYPXBVEYPXCYSXGUUBGYPWJAIUJYRVFYPXFUUALWQYPXD
      YTXEYPWJAUKRYRTVGVCVHYPXLUUFLSYPXKUUEWTRYPXJUUDLUNYPWJAXIJYRTTTTVIYPWHDWT
      UOYQVKVLVMVNEVOVPYPWHDUFYQVQVRVLVIBUAFVTYBYEYMYEVSYDLGVSWAWBWCWDYIYLQWEWF
      WG $.
      $( [4-Feb-2015] $)

    $( Value of the function ` F ` which defines the Legendre symbol at the
       primes. $)
    lgsfval $p |- ( M e. NN -> ( F ` M ) = if (
  M e. Prime , ( if ( M = 2 , if ( 2 || A , 0 , if ( ( A mod 8 ) e. { 1 , 7 } ,
          1 , -u 1 ) ) , ( ( ( ( A ^ ( ( M - 1 ) / 2 ) ) + 1 ) mod M ) - 1 ) )
            ^ ( M pCnt N ) ) , 1 ) ) $=
      ( cprime wcel c2 wceq cmo co c1 cif cmin cdiv cexp caddc cpc oveq1d cv c8
      cdivides wbr cc0 c7 cpr cneg cn eleq1 eqeq1 oveq1 oveq2d oveq12d ifbieq2d
      id eqidd ifbieq12d ovex cz 1z elexi ifex fvmpt ) BDBUAZGHZVEIJZIAUCUDUEAU
      BKLMUFUGHMMUHNNZAVEMOLZIPLZQLZMRLZVEKLZMOLZNZVEESLZQLZMNDGHZDIJZVHADMOLZI
      PLZQLZMRLZDKLZMOLZNZDESLZQLZMNUICVEDJZVFVRVQMWHMVEDGUJWIVOWFVPWGQWIVGVSVN
      WEVHVEDIUKWIVMWDMOWIVLWCVEDKWIVKWBMRWIVJWAAQWIVIVTIPVEDMOULTUMTWIUPUNTUOV
      EDESULUNWIMUQURFVRWHMWFWGQUSMUTVAVBVCVD $.
      $( [4-Feb-2015] $)

    ${
      lgsfcl2.z $e |- Z = { x e. ZZ | ( abs ` x ) <_ 1 } $.
      $( The function ` F ` is closed in integers with absolute value less than
         ` 1 ` (namely ` { -u 1 , 0 , 1 } ` although this representation is
         less useful to us). $)
      lgsfcl2 $p |- ( ( A e. ZZ /\ N e. ZZ /\ N =/= 0 ) -> F : NN --> Z ) $=
        ( cz wcel cc0 cv c2 wceq wbr co c1 wa cle cabs va vb cn cprime cdivides
        wne w3a c8 cmo c7 cpr cneg cif cmin cdiv cexp caddc cpc cn0 0z 0re lt01
        1re ltleii cfv fveq2 syl6eq breq1d elrab2 mpbir2an 1z leidi absid mp2an
        abs0 cr znegcl ax-mp cc ax-1cn absneg eqtri keepel a1i wn simpl1 simplr
        ad2antrr simpr df-ne sylibr lgslem4 syl3anc ifclda simpll2 simpll3 crab
        pczcl syl12anc ssrab2 eqsstri zsscn sstri lgslem3 expcllem syl2anc
        fmptd ) BIJZEIJZEKUFZUGZCUCCLZUDJZXLMNZMBUEOZKBUHUIPQUJUKJZQQULZUMZUMZB
        XLQUNPMUOPUPPQUQPXLUIPQUNPZUMZXLEURPZUPPZQUMFDXKXLUCJZRZXMYCQFYEXMRZYAF
        JYBUSJZYCFJYFXNXSXTFXSFJYFXNRXOKXRFKFJKIJKQSOZUTKQVAVCVBVDZALZTVEZQSOZY
        HAKIFYJKNZYKKQSYMYKKTVEKYJKTVFVOVGVHHVIVJXPQXQFQFJZQIJZQQSOZVKQVCVLZYLY
        PAQIFYJQNZYKQQSYRYKQTVEZQYJQTVFQVPJYHYSQNVCYIQVMVNZVGVHHVIVJZXQFJXQIJZY
        PYOUUBVKQVQVRYQYLYPAXQIFYJXQNZYKQQSUUCYKXQTVEZQYJXQTVFUUDYSQQVSJUUDYSNV
        TQWAVRYTWBVGVHHVIVJWCWCWDYFXNWEZRZXHXMXLMUFZXTFJYEXHXMUUEXHXIXJYDWFWHYE
        XMUUEWGUUFUUEUUGYFUUEWIXLMWJWKABXLFHWLWMWNYFXMXIXJYGYEXMWIXHXIXJYDXMWOX
        HXIXJYDXMWPXLEWRWSUAUBYAYBFFIVSFYLAIWQIHYLAIWTXAXBXCAUALUBLFHXDUUAXEXFY
        NYEXMWERUUAWDWNGXG $.
        $( [4-Feb-2015] $)

      $( The Legendre symbol is an element of ` Z ` . $)
      lgscllem $p |- ( ( A e. ZZ /\ N e. ZZ ) -> ( A /L N ) e. Z ) $=
        ( vy vz cz wcel wa co cc0 c1 cif cfv cmul cn clgs wceq c2 cexp clt cneg
        wbr cabs cseq lgsval lgslem2 simp3i simp2i keepel a1i wn simp1i cuz wne
        simplr simpr df-ne sylibr nnabscl syl2anc nnuz syl6eleq wf cv cfz 3expa
        lgsfcl2 sylan2br elfznn ffvelrn syl2an lgslem3 adantl sylancr eqeltrd
        seqcl ifclda ) BKLZEKLZMZBEUANEOUBZBUCUDNPUBZPOQZEOUEUGBOUEUGMZPUFZPQZE
        UHRZSDPUIRZSNZQFBCDEGUJWEWFWHWNFWHFLWEWFMWGPOFWJFLZOFLZPFLZAFHUKZULZWOW
        PWQWRUMUNUOWEWFUPZMZWKFLWMFLWNFLWIWJPFWOWPWQWRUQWSUNXAIJSFDPWLXAWLTPURR
        XAWDEOUSZWLTLWCWDWTUTXAWTXBWEWTVAEOVBZVCEVDVEVFVGXATFDVHZIVIZTLXEDRFLXE
        PWLVJNLWTWEXBXDXCWCWDXBXDABCDEFGHVLVKVMXEWLVNTFXEDVOVPXEFLJVIZFLMXEXFSN
        FLXAAXEXFFHVQVRWAAWKWMFHVQVSWBVT $.
        $( [4-Feb-2015] $)
    $}

    $( Closure of the function ` F ` which defines the Legendre symbol at the
       primes. $)
    lgsfcl $p |- ( ( A e. ZZ /\ N e. ZZ /\ N =/= 0 ) -> F : NN --> ZZ ) $=
      ( vx cz wcel cc0 wne w3a cn cv cabs cfv c1 cle wbr crab wf lgsfcl2 ssrab2
      wss eqid fss sylancl ) AGHDGHDIJKLFMNOPQRZFGSZCTUHGUCLGCTFABCDUHEUHUDUAUG
      FGUBLUHGCUEUF $.
      $( [4-Feb-2015] $)

    $( The function ` F ` has magnitude less or equal to ` 1 ` . $)
    lgsfle1 $p |- ( ( ( A e. ZZ /\ N e. ZZ /\ N =/= 0 ) /\ M e. NN ) ->
      ( abs ` ( F ` M ) ) <_ 1 ) $=
      ( vx cz wcel cc0 wne w3a cn wa cfv cv cabs c1 cle wbr crab wf sylan fveq2
      eqid lgsfcl2 ffvelrn wceq breq1d elrab simprbi syl ) AHIEHIEJKLZDMIZNDCOZ
      GPZQOZRSTZGHUAZIZUOQOZRSTZUMMUSCUBUNUTGABCEUSFUSUEUFMUSDCUGUCUTUOHIVBURVB
      GUOHUPUOUHUQVARSUPUOQUDUIUJUKUL $.
      $( [4-Feb-2015] $)

    $( Lemma for ~ lgsval2 . $)
    lgsval2lem $p |- ( ( A e. ZZ /\ N e. Prime ) -> ( A /L N ) =
      if ( N = 2 , if ( 2 || A , 0 , if ( ( A mod 8 ) e. { 1 , 7 } ,
      1 , -u 1 ) ) , ( ( ( ( A ^ ( ( N - 1 ) / 2 ) ) + 1 ) mod N ) - 1 ) ) ) $=
      ( cz wcel wa co cc0 wceq c2 cexp c1 cif wbr cfv cmul syl syl2anc clgs clt
      vx cprime cneg cabs cseq cdivides c8 cmo c7 cmin cdiv caddc lgsval sylan2
      cpr wn wne cn prmnn adantl nnne0 df-ne sylib iffalse cle cn0 wi idi nnnn0
      prmz nn0ge0 3syl cr wb 0re nnre lenlt sylancr mpbid simpl nsyl fveq2d cuz
      absid 1z prmuz2 df-2 fveq2i syl6eleq seqm1 ax-1cn mulid1i uz2m1nn nnuz cv
      a1i cfz cpc elfznn lgsfval elfzelz elfzle2 peano2rem pm2.65i eleq1 mtbiri
      zre ltm1 con2i ad2antlr simpllr mtbird simpr ad2antrr pceq0 mpbird oveq2d
      dvdsprm cc 0z znegcl keepel oddprm sylan2br adantll zexpcl peano2z zmodcl
      ax-mp nn0z peano2zm zcn eqtrd oveq1d syl3anc 3eqtrd oveq12d exp1 wf recnd
      ifclda adantlr exp0 ifeq1da ifid syl6eq seqid3 lgsfcl ffvelrn mulid2 pcid
      iftrue sylancl eqtr3d wral ralrimiva eqeq1 id ifbieq2d eleq1d rcla4v sylc
      oveq1 ) AFGZDUDGZHZADUAIZDJKZALMINKNJOZDJUBPZAJUBPZHZNUEZNOZDUFQZRCNUGZQZ
      RIZOZUVTDLKZLAUHPZJAUIUJINUKUQGZNUVOOZOZADNULIZLUMIZMIZNUNIZDUJIZNULIZOZU
      VGUVFDFGZUVIUWAKDVLZABCDEUOUPUVHUVJURZUWAUVTKUVHDJUSZUWPUVHDUTGZUWQUVGUWR
      UVFDVAVBZDVCSZDJVDVEUVJUVKUVTVFSUVHUVTNDCQZRIZUXAUWMUVHUVPNUVSUXARUVHUVNU
      RUVPNKUVHUVLUVNUVHJDVGPZUVLURZUVHUWRDVHGUXCUVHUWRVIUWSVJDVKDVMVNZUVHJVOGZ
      DVOGZUXCUXDVPUXFVQVJUVHUXGVIUVHUWRUXGUWSDVRSZVJJDVSVTWAUVLUVMWBWCUVNUVONV
      FSUVHUVSDUVRQZUXAUVHUVQDUVRUVHUXGUXCUVQDKUXHUXEDWFTWDUVHUXIUWGUVRQZUXARIZ
      UXBUXAUVHNFGZDNNUNIZWEQZGUXIUXKKUXLUVHWGWRUVHDLWEQZUXNUVGDUXOGZUVFDWHVBZL
      UXMWEWIWJWKRCNDWLTUVHUXJNUXARUVHUCRCNUWGNNNRINKUVHNWMWNWRUVHUWGUTNWEQUVHU
      XPUWGUTGUXQDWOSWPWKUVHUCWQZNUWGWSIZGZHZUXRCQZUXRUDGZUXRLKZUWFAUXRNULIZLUM
      IZMIZNUNIZUXRUJIZNULIZOZUXRDWTIZMIZNOZNUYAUXRUTGZUYBUYNKUXTUYOUVHUXRUWGXA
      VBABCUXRDEXBSUYAUYNUYCNNONUYAUYCUYMNNUYAUYCHZUYMUYKJMIZNUYPUYLJUYKMUYPUYL
      JKZUXRDUHPZURZUYPUYSUXRDKZUXTVUAURUVHUYCVUAUXTVUAUXTDUXSGZVUBUWGDUBPZVUBU
      XGVUCVUBUWNUXGDNUWGXCDXISZDXJSVUBDUWGVGPZVUCURZDNUWGXDVUBUXGUWGVOGZVUEVUF
      VPVUDVUBUXGVUGVUDDXESDUWGVSTWAXFUXRDUXSXGXHXKXLUYPUXRUXOGZUVGUYSVUAVPUYCV
      UHUYAUXRWHVBUVFUVGUXTUYCXMDUXRXTTXNUYPUYCUWRUYRUYTVPUYAUYCXOUVHUWRUXTUYCU
      WSXPUXRDXQTXRXSUYPUYKYAGZUYQNKUVHUYCVUIUXTUVHUYCHZUYKFGVUIVUJUYDUWFUYJFUW
      FFGVUJUYDHUWCJUWEFYBUWDNUVOFWGUXLUVOFGWGNYCYKYDYDWRVUJUYDURZHZUYIVHGZUYIF
      GUYJFGVULUYHFGZUYOVUMVULUYGFGZVUNVULUVFUYFVHGZVUOUVHUVFUYCVUKUVFUVGWBZXPV
      ULUYFUTGZVUPUYCVUKVURUVHVUKUYCUXRLUSVURUXRLVDUXRYEYFYGUYFVKSAUYFYHTUYGYIS
      UYCUYOUVHVUKUXRVAXLUYHUXRYJTUYIYLUYIYMVNUUCUYKYNSZUUDUYKUUESYOUUFUYCNUUGU
      UHYOUUIYPUVHUXAYAGZUXBUXAKZUVHUXAFGZVUTUVHUTFCUUAZUWRVVBUVHUVFUWNUWQVVCVU
      QUVGUWNUVFUWOVBZUVHUWQVIUWTVJABCDEUUJZYQUWSUTFDCUUKZTUXAYNZSUXAUULZSYRYOY
      SUVHVUTVVAUVHVVBVUTUVHVVCUWRVVBUVHUVFUWNUWQVVCVUQVVDUWTVVEYQUWSVVFTVVGSVV
      HSUVHUXAUVGUWMDDWTIZMIZNOZVVJUWMUVHUWRUXAVVKKUWSABCDDEXBSUVGVVKVVJKUVFUVG
      VVJNUUNVBUVHVVJUWMNMIZUWMUVHVVINUWMMUVHDDNMIZWTIZVVINUVHVVMDDWTUVHDYAGVVM
      DKUVHDUXHUUBDYTSXSUVHUVGUXLVVNNKUVFUVGXOZWGNDUUMUUOUUPXSUVHUWMYAGZVVLUWMK
      UVHUVGVUIUCUDUUQVVPVVOUVHVUIUCUDVUSUURVUIVVPUCDUDVUAUYKUWMYAVUAUYDUWBUYJU
      WLUWFUXRDLUUSVUAUYIUWKNULVUAUYHUWJUXRDUJVUAUYGUWINUNVUAUYFUWHAMVUAUYEUWGL
      UMUXRDNULUVEYPXSYPVUAUUTYSYPUVAUVBUVCUVDUWMYTSYOYRYRYR $.
      $( [4-Feb-2015] $)

    $( Lemma for ~ lgsval4 . $)
    lgsval4lem $p |- ( ( A e. ZZ /\ N e. ZZ /\ N =/= 0 ) -> F = ( n e. NN |->
      if ( n e. Prime , ( ( A /L n ) ^ ( n pCnt N ) ) , 1 ) ) ) $=
      ( vm cz wcel cc0 cn cv co cexp c1 cif cmpt c2 wceq cmo cmin clgs cdivides
      wne w3a cprime cpc wbr c8 c7 cpr cneg cdiv caddc wa simpr eqid lgsval2lem
      simpl1 syl2anc oveq1d ifeq1da mpteq2dv syl6reqr ) AGHZDGHZDIUCZUDZBJBKZUE
      HZAVHUALZVHDUFLZMLZNOZPBJVIVHQRQAUBUGIAUHSLNUIUJHNNUKOOZAVHNTLQULLMLNUMLV
      HSLNTLOZVKMLZNOZPCVGBJVMVQVGVIVLVPNVGVIUNZVJVOVKMVRVDVIVJVORVDVEVFVIURVGV
      IUOAFFJFKZUEHVSQRVNAVSNTLQULLMLNUMLVSSLNTLOVSVHUFLMLNOPZVHVTUPUQUSUTVAVBE
      VC $.
      $( [4-Feb-2015] $)
  $}

  ${
    $d n x A $.  $d n x N $.  $d n Z $.
    lgscl2.z $e |- Z = { x e. ZZ | ( abs ` x ) <_ 1 } $.
    $( The Legendre symbol is an integer with absolute value less or equal to
       ` 1 ` . $)
    lgscl2 $p |- ( ( A e. ZZ /\ N e. ZZ ) -> ( A /L N ) e. Z ) $=
      ( vn cn cv cprime wcel c2 wceq cdivides wbr cmo co c1 cif cmin cexp c8 c7
      cc0 cpr cneg cdiv caddc cpc cmpt eqid lgscllem ) ABFFGFHZIJULKLKBMNUCBUAO
      PQUBUDJQQUERRBULQSPKUFPTPQUGPULOPQSPRULCUHPTPQRUIZCDUMUJEUK $.
      $( [4-Feb-2015] $)
  $}

  ${
    $d n x y A $.  $d x y F $.  $d n x y N $.  $d n P $.
    $( The Legendre symbol when the second argument is zero. $)
    lgs0 $p |- ( A e. ZZ -> ( A /L 0 ) = if ( ( A ^ 2 ) = 1 , 1 , 0 ) ) $=
      ( vn cz wcel cc0 clgs co wceq c2 cexp c1 cif clt wbr wa cfv cmul cmo cmin
      eqid cneg cabs cn cv cprime cdivides c8 c7 cpr cdiv caddc cpc cmpt lgsval
      cseq 0z mpan2 iftrue ax-mp syl6eq ) ACDZAEFGZEEHZAIJGKHKELZEEMNAEMNOKUAZK
      LEUBPQBUCBUDZUEDVFIHIAUFNEAUGRGKUHUIDKVELLAVFKSGIUJGJGKUKGVFRGKSGLVFEULGJ
      GKLUMZKUOPQGZLZVDVAECDVBVIHUPABVGEVGTUNUQVCVIVDHETVCVDVHURUSUT $.
      $( [4-Feb-2015] $)

    $( The Legendre symbol is an integer. $)
    lgscl $p |- ( ( A e. ZZ /\ N e. ZZ ) -> ( A /L N ) e. ZZ ) $=
      ( vx cz wcel wa cv cabs cfv c1 cle crab clgs co ssrab2 eqid lgscl2 sseldi
      wbr ) ADEBDEFCGHIJKSZCDLZDABMNTCDOCABUAUAPQR $.
      $( [4-Feb-2015] $)

    $( The Legendre symbol has absolute value less or equal to ` 1 ` .
       Together with ~ lgscl this implies that it takes values in
       ` { -u 1 , 0 , 1 } ` . $)
    lgsle1 $p |- ( ( A e. ZZ /\ N e. ZZ ) -> ( abs ` ( A /L N ) ) <_ 1 ) $=
      ( vx cz wcel wa clgs co cv cabs cfv cle wbr crab eqid lgscl2 fveq2 breq1d
      c1 wceq elrab simprbi syl ) ADEBDEFABGHZCIZJKZSLMZCDNZEZUDJKZSLMZCABUHUHO
      PUIUDDEUKUGUKCUDDUEUDTUFUJSLUEUDJQRUAUBUC $.
      $( [4-Feb-2015] $)

    $( The Legendre symbol at a prime (this is the traditional domain of the
       Legendre symbol, except for the addition of prime ` 2 ` ). $)
    lgsval2 $p |- ( ( A e. ZZ /\ P e. Prime ) -> ( A /L P ) = if ( P = 2 ,
      if ( 2 || A , 0 , if ( ( A mod 8 ) e. { 1 , 7 } , 1 , -u 1 ) ) ,
        ( ( ( ( A ^ ( ( P - 1 ) / 2 ) ) + 1 ) mod P ) - 1 ) ) ) $=
      ( vn cn cv cprime wcel c2 wceq cdivides wbr cc0 c8 cmo co c1 c7 cmin cexp
      cif cpr cneg cdiv caddc cpc cmpt eqid lgsval2lem ) ACCDCEZFGUIHIHAJKLAMNO
      PQUAGPPUBTTAUIPROHUCOSOPUDOUINOPROTUIBUEOSOPTUFZBUJUGUH $.
      $( [4-Feb-2015] $)

    $( The Legendre symbol at ` 2 ` . $)
    lgs2 $p |- ( A e. ZZ -> ( A /L 2 ) = if ( 2 || A , 0 ,
      if ( ( A mod 8 ) e. { 1 , 7 } , 1 , -u 1 ) ) ) $=
      ( cz wcel c2 clgs co wceq cdivides wbr cc0 c8 cmo c1 c7 cpr cneg cif cmin
      cdiv cexp caddc cprime 2prm lgsval2 mpan2 eqid iftrue ax-mp syl6eq ) ABCZ
      ADEFZDDGZDAHIJAKLFMNOCMMPQQZADMRFDSFTFMUAFDLFMRFZQZUMUJDUBCUKUOGUCADUDUEU
      LUOUMGDUFULUMUNUGUHUI $.
      $( [4-Feb-2015] $)

    $( The Legendre symbol at an odd prime (this is the traditional domain of
       the Legendre symbol). $)
    lgsval3 $p |- ( ( A e. ZZ /\ P e. Prime /\ P =/= 2 ) -> ( A /L P ) =
        ( ( ( ( A ^ ( ( P - 1 ) / 2 ) ) + 1 ) mod P ) - 1 ) ) $=
      ( cz wcel cprime c2 wne clgs co c1 cmin cdiv cexp caddc cmo wceq cdivides
      wa wbr cif cc0 c8 c7 cpr cneg lgsval2 df-ne iffalse sylbi sylan9eq 3impa
      wn ) ACDZBEDZBFGZABHIZABJKIFLIMIJNIBOIJKIZPUMUNRUOUPBFPZFAQSUAAUBOIJUCUDD
      JJUETTZUQTZUQABUFUOURULUTUQPBFUGURUSUQUHUIUJUK $.
      $( [4-Feb-2015] $)

    $( The Legendre symbol is equivalent to ` a ^ ( ( p - 1 ) / 2 ) ` ,
       ` mod p ` . $)
    lgsvalmod $p |- ( ( A e. ZZ /\ P e. Prime /\ P =/= 2 ) ->
      ( ( A /L P ) mod P ) = ( ( A ^ ( ( P - 1 ) / 2 ) ) mod P ) ) $=
      ( cz wcel c2 co c1 caddc cmo cmin cr wceq syl2anc syl recnd ax-1cn oveq1d
      cc eqtrd sylancl cprime wne clgs cneg cdiv cexp simp1 prmz 3ad2ant2 lgscl
      w3a crp zre peano2re cn0 cn oddprm 3adant1 nnnn0 zexpcl 1re renegcli nnrp
      a1i prmnn lgsval3 eqcomd wb modcl subadd2 syl3anc mpbid modabs2 syl221anc
      modadd1 negsub pncan 3eqtr3d ) ACDZBUADZBEUBZUKZABUCFZGHFZGUDZHFZBIFZABGJ
      FEUEFZUFFZGHFZWEHFZBIFZWCBIFWIBIFWBWDKDZWJKDZWEKDZBULDZWDBIFZWJBIFZLWGWLL
      WBWCKDZWMWBWCCDZWSWBVSBCDZWTVSVTWAUGZVTVSXAWABUHUIABUJMWCUMNZWCUNNZWBWIKD
      ZWNWBWICDZXEWBVSWHUODZXFXBWBWHUPDZXGVTWAXHVSBUQURWHUSNAWHUTMWIUMNZWIUNNZW
      OWBGVAVBVDWBBUPDZWPVTVSXKWABVEUIBVCNZWBWQWRBIFZWRWBWDWRBIWBWRGJFZWCLZWDWR
      LZWBWCXNABVFVGWBWRRDGRDZWCRDZXOXPVHWBWRWBWNWPWRKDXJXLWJBVIMOXQWBPVDWBWCXC
      OZWRGWCVJVKVLQWBWNWPXMWRLXJXLWJBVMMSWDWJWEBVOVNWBWFWCBIWBWFWDGJFZWCWBWDRD
      XQWFXTLWBWDXDOPWDGVPTWBXRXQXTWCLXSPWCGVQTSQWBWKWIBIWBWKWJGJFZWIWBWJRDXQWK
      YALWBWJXJOPWJGVPTWBWIRDXQYAWILWBWIXIOPWIGVQTSQVR $.
      $( [4-Feb-2015] $)

    lgsval4.1 $e |- F = ( n e. NN |->
      if ( n e. Prime , ( ( A /L n ) ^ ( n pCnt N ) ) , 1 ) ) $.
    $( Restate ~ lgsval for nonzero ` N ` , where the function ` F ` has been
       abbreviated into a self-referential expression taking the value of
       ` /L ` on the primes as given. $)
    lgsval4 $p |- ( ( A e. ZZ /\ N e. ZZ /\ N =/= 0 ) -> ( A /L N ) =
      ( if ( ( N < 0 /\ A < 0 ) , -u 1 , 1 ) x.
        ( seq 1 ( x. , F ) ` ( abs ` N ) ) ) ) $=
      ( cz wcel cc0 clgs co wceq c2 cexp c1 cif clt wbr cfv cmul cn wne wa cneg
      w3a cabs cv cprime cdivides c8 cmo cpr cmin cdiv caddc cpc cmpt cseq eqid
      c7 lgsval 3adant3 wn simp3 df-ne sylib iffalse lgsval4lem syl6eqr seqeq3d
      syl fveq1d oveq2d 3eqtrd ) AFGZDFGZDHUAZUDZADIJZDHKZALMJNKNHOZDHPQAHPQUBN
      UCZNOZDUERZSBTBUFZUGGZWDLKLAUHQHAUIUJJNUSUKGNWAOOAWDNULJLUMJMJNUNJWDUJJNU
      LJOWDDUOJZMJNOUPZNUQZRZSJZOZWJWBWCSCNUQZRZSJVNVOVRWKKVPABWGDWGURZUTVAVQVS
      VBZWKWJKVQVPWOVNVOVPVCDHVDVEVSVTWJVFVJVQWIWMWBSVQWCWHWLVQWGCSNVQWGBTWEAWD
      IJWFMJNOUPCABWGDWNVGEVHVIVKVLVM $.
      $( [4-Feb-2015] $)

    $( Closure of the function ` F ` which defines the Legendre symbol at the
       primes. $)
    lgsfcl3 $p |- ( ( A e. ZZ /\ N e. ZZ /\ N =/= 0 ) -> F : NN --> ZZ ) $=
      ( cz wcel cc0 wne w3a cn c2 cmo co c1 cif cmin cexp cmpt wf wceq cdivides
      cv cprime wbr c8 c7 cpr cneg cdiv cpc eqid lgsfcl clgs lgsval4lem syl6eqr
      caddc feq1d mpbid ) AFGDFGDHIJZKFBKBUCZUDGZVALUALAUBUEHAUFMNOUGUHGOOUIPPA
      VAOQNLUJNRNOUQNVAMNOQNPVADUKNZRNOPSZTKFCTABVDDVDULZUMUTKFVDCUTVDBKVBAVAUN
      NVCRNOPSCABVDDVEUOEUPURUS $.
      $( [4-Feb-2015] $)

    $( Same as ~ lgsval4 for positive ` N ` . $)
    lgsval4a $p |- ( ( A e. ZZ /\ N e. NN ) ->
      ( A /L N ) = ( seq 1 ( x. , F ) ` N ) ) $=
      ( vx cz wcel cn wa co cc0 clt wbr c1 cfv cmul wceq adantl syl vy clgs cif
      cneg cabs cseq wne simpl nnz nnne0 lgsval4 syl3anc wn nngt0 cr 0re ltnsym
      wi sylancr mpd intnanrd iffalse cle cn0 nnnn0 nn0ge0 absid syl2anc fveq2d
      nnre oveq12d cc cuz simpr nnuz syl6eleq cfz lgsfcl3 elfznn ffvelrn syl2an
      wf cv zmulcl seqcl zcn mulid2 3eqtrd ) AGHZDIHZJZADUBKZDLMNZALMNZJZOUDZOU
      CZDUEPZQCOUFZPZQKZODWSPZQKZXBWKWIDGHZDLUGZWLXARWIWJUHZWJXDWIDUISZWJXEWIDU
      JSZABCDEUKULWKWQOWTXBQWKWOUMWQORWKWMWNWKLDMNZWMUMZWJXIWIDUNSWKLUOHDUOHZXI
      XJURUPWJXKWIDVJSZLDUQUSUTVAWOWPOVBTWKWRDWSWKXKLDVCNZWRDRXLWKDVDHZXMWJXNWI
      DVESDVFTDVGVHVIVKWKXBVLHZXCXBRWKXBGHXOWKFUAQGCODWKDIOVMPWIWJVNVOVPWKIGCWB
      ZFWCZIHXQCPGHXQODVQKHWKWIXDXEXPXFXGXHABCDEVRULXQDVSIGXQCVTWAXQGHUAWCZGHJX
      QXRQKGHWKXQXRWDSWEXBWFTXBWGTWH $.
      $( [4-Feb-2015] $)
  $}

  ${
    $d k n x y z B $.  $d k x F $.  $d k n x y z M $.  $d x P $.  $d k x ph $.
    $d k n p x y z A $.  $d k n p x y z N $.
    $( The Legendre symbol is either even or odd under negation with respect to
       the second parameter according to the sign of the first. $)
    lgsneg $p |- ( ( A e. ZZ /\ N e. ZZ /\ N =/= 0 ) -> ( A /L -u N ) =
      ( if ( A < 0 , -u 1 , 1 ) x. ( A /L N ) ) ) $=
      ( vn cz wcel cc0 wbr wa c1 cif cfv cmul cn co wceq ax-1cn wn wb syl cc vx
      wne w3a cneg clt cabs cprime clgs cpc cexp cmpt cseq iftrue adantl oveq1d
      vy cv oveq2 negcli mulm1i negnegi eqtri mulid1i ifsb simpr biantrud ifbid
      syl6eq oveq2d syl5eqr cle cr wi simpl2 zre idi ltlen sylancl simp3 adantr
      necomd bitr4d le0neg1 renegcl lenlt sylancr 3bitrd eqtr3d iffalse intnand
      0re ifnot 3eqtrd oveq12d 3eqtr4a pm2.61dan eqcomd cq zq syl12anc mpteq2dv
      pcneg ifeq1da seqeq3d zcn 3ad2ant2 absneg fveq12d a1i cuz nnabscl 3adant1
      keepel nnuz syl6eleq cfz eqid lgsfcl3 elfznn ffvelrn syl2an zmulcl mulass
      seqcl syl3anc eqtrd simp1 znegcl negeq0 necon3bid mpbid lgsval4 3eqtr4d
      wf ) ADEZBDEZBFUBZUCZBUDZFUEGZAFUEGZHZIUDZIJZYSUFKZLCMCUQZUGEZAUUFUHNZUUF
      YSUINZUJNZIJZUKZIULZKZLNZUUAUUCIJZBFUEGZUUAHZUUCIJZBUFKZLCMUUGUUHUUFBUINZ
      UJNZIJZUKZIULZKZLNZLNZAYSUHNZUUPABUHNZLNYRUUOUUPUUSLNZUVFLNZUVHYRUUDUVKUU
      NUVFLYRUVKUUDYRUUAUVKUUDOYRUUAHZUVKUUCUUSLNZYTUUCIJZUUDUVMUUPUUCUUSLUUAUU
      PUUCOYRUUAUUCIUMUNUOUVMUUQIUUCJZUVNUVOUVMUVPUUCUUQUUCIJZLNZUVNUUQUUCIUVRI
      UUCUVQUUCOUVRUUCUUCLNZIUVQUUCUUCLURUVSUUCUDIUUCIPUSZUTIPVAVBVHUVQIOUVRUUC
      ILNUUCUVQIUUCLURUUCUVTVCVHVDUVMUVQUUSUUCLUVMUUQUURUUCIUVMUUAUUQYRUUAVEZVF
      VGVIVJUVMUVPYTQZIUUCJUVOUVMUUQUWBIUUCUVMUUQBFVKGZFYSVKGZUWBUVMUUQUWCFBUBZ
      HZUWCUVMBVLEZFVLEZUUQUWFRUVMUWGVMUVMYPUWGYOYPYQUUAVNBVOSZVPUWHWKVPBFVQVRU
      VMUWEUWCUVMBFYRYQUUAYOYPYQVSZVTWAVFWBUVMUWGUWCUWDRUWIBWCSUVMUWHYSVLEZUWDU
      WBRWKUVMUWGUWKUWIBWDSFYSWEWFWGVGYTIUUCWLVHWHUVMYTUUBUUCIUVMUUAYTUWAVFVGWM
      YRUUAQZHZIILNIUVKUUDIPVCUWMUUPIUUSILUWLUUPIOYRUUAUUCIWIUNUWMUURQUUSIOUWMU
      UAUUQYRUWLVEZWJUURUUCIWISWNUWMUUBQUUDIOUWMUUAYTUWNWJUUBUUCIWISWOWPWQYRUUE
      UUTUUMUVEYRUULUVDLIYRCMUUKUVCYRUUGUUJUVBIYRUUGHZUUIUVAUUHUJUWOUUGBWREZYQU
      UIUVAOYRUUGVEUWOYPUWPYOYPYQUUGVNBWSSYRYQUUGUWJVTBUUFXBWTVIXCXAXDYRBTEZUUE
      UUTOYPYOUWQYQBXEXFZBXGSXHWNYRUUPTEZUUSTEZUVFTEZUVLUVHOUWSYRUUAUUCITUVTPXM
      XIUWTYRUURUUCITUVTPXMXIYRUVFDEUXAYRUAUPLDUVDIUUTYRUUTMIXJKYPYQUUTMEYOBXKX
      LXNXOYRMDUVDYNUAUQZMEUXBUVDKDEUXBIUUTXPNEACUVDBUVDXQZXRUXBUUTXSMDUXBUVDXT
      YAUXBDEUPUQZDEHUXBUXDLNDEYRUXBUXDYBUNYDUVFXESUUPUUSUVFYCYEYFYRYOYSDEZYSFU
      BZUVIUUOOYOYPYQYGYPYOUXEYQBYHXFYRYQUXFUWJYRUWQYQUXFRUWRUWQBFYSFBYIYJSYKAC
      UULYSUULXQYLYEYRUVJUVGUUPLACUVDBUXCYLVIYM $.
      $( [4-Feb-2015] $)

    $( The Legendre symbol for nonnegative first parameter is unchanged by
       negation of the second. $)
    lgsneg1 $p |- ( ( A e. NN0 /\ N e. ZZ ) -> ( A /L -u N ) = ( A /L N ) ) $=
      ( cn0 wcel cz wa cneg clgs co wceq cc0 neg0 simpr negeqd 3eqtr4a wbr cmul
      c1 cr 3ad2ant1 oveq2d wne w3a clt cif lgsneg syl3an1 wn cle nn0ge0 wb 0re
      nn0z nn0re lenlt sylancr mpbid iffalse syl oveq1d simp2 lgscl syl2anc zcn
      cc mulid2 3syl 3eqtrd 3expa pm2.61dane ) ACDZBEDZFZABGZHIZABHIZJZBKVMBKJZ
      FZVNBAHVSKGKVNBLVSBKVMVRMZNVTOUAVKVLBKUBZVQVKVLWAUCZVOAKUDPZRGZRUEZVPQIZR
      VPQIZVPVKAEDZVLWAVOWFJAUMZABUFUGWBWERVPQWBWCUHZWERJVKVLWJWAVKKAUIPZWJAUJV
      KKSDASDWKWJUKULAUNKAUOUPUQTWCWDRURUSUTWBVPEDZVPVEDWGVPJWBWHVLWLVKVLWHWAWI
      TVKVLWAVAABVBVCVPVDVPVFVGVHVIVJ $.
      $( [4-Feb-2015] $)

    $( The Legendre (Jacobi) symbol is preserved under reduction ` mod n ` when
       ` n ` is odd. $)
    lgsmod $p |- ( ( A e. ZZ /\ N e. NN /\ -. 2 || N ) ->
      ( ( A mod N ) /L N ) = ( A /L N ) ) $=
      ( vn cz wcel cn c2 cdivides wbr cmo co clgs cexp c1 wceq cmin syl2anc syl
      syl3anc cc0 wn w3a cmul cv cprime cpc cif cmpt cseq cfv wa cdiv caddc crp
      cn0 simp1 simp2 zmodcl nn0z ad2antrr wne simpr adantr simpl3 breq1 notbid
      cr syl5ibrcom necon2ad imp oddprm nnnn0 zexpcl zre 1re a1i prmnn ad2antlr
      nnrp modabs2 wb moddvds mpbid prmz nnz zsubcl dvdstr mp2and mpbird modexp
      wi syl221anc modadd1 oveq1d lgsval3 3eqtr4d eqidd cc lgscl zcn exp0 pceq0
      biimpar oveq2d pm2.61dan ifeq1da mpteq2dv seqeq3d fveq1d lgsval4a 3adant3
      3syl eqid ) ADEZBFEZGBHIZUAZUBZBUCCFCUDZUEEZABJKZXSLKZXSBUFKZMKZNUGZUHZNU
      IZUJZBUCCFXTAXSLKZYCMKZNUGZUHZNUIZUJZYABLKZABLKZXRBYGYMXRYFYLUCNXRCFYEYKX
      RXTYDYJNXRXTUKZXSBHIZYDYJOYQYRUKZYBYIYCMYSYAXSNPKGULKZMKZNUMKXSJKZNPKZAYT
      MKZNUMKXSJKZNPKZYBYIYSUUBUUENPYSUUAVGEZUUDVGEZNVGEZXSUNEZUUAXSJKUUDXSJKOZ
      UUBUUEOYSUUADEZUUGYSYADEZYTUOEZUULXRUUMXTYRXRYAUOEZUUMXRXNXOUUOXNXOXQUPZX
      NXOXQUQZABURQYAUSRZUTZYSYTFEZUUNYSXTXSGVAZUUTYQXTYRXRXTVBZVCZYQYRUVAYQYRX
      SGYQYRUAZXSGOZXQXNXOXQXTVDUVEYRXPXSGBHVEVFVHVIVJZXSVKQYTVLRZYAYTVMQUUAVNR
      YSUUDDEZUUHYSXNUUNUVHXRXNXTYRUUPUTZUVGAYTVMQUUDVNRUUIYSVOVPYSXSFEZUUJXTUV
      JXRYRXSVQVRZXSVSRZYSUUMXNUUNUUJYAXSJKAXSJKOZUUKUUSUVIUVGUVLYSUVMXSYAAPKZH
      IZYSYRBUVNHIZUVOYQYRVBYSYABJKYAOZUVPYSAVGEZBUNEZUVQYSXNUVRUVIAVNRYSXOUVSY
      QXOYRXRXOXTUUQVCZVCZBVSRABVTQYSXOUUMXNUVQUVPWAUWAUUSUVIYAABWBSWCYSXSDEZBD
      EZUVNDEZYRUVPUKUVOWKYSXTUWBUVCXSWDZRYSXOUWCUWABWERYSUUMXNUWDUUSUVIYAAWFQX
      SBUVNWGSWHYSUVJUUMXNUVMUVOWAUVKUUSUVIYAAXSWBSWIYAAYTXSWJWLUUAUUDNXSWMWLWN
      YSUUMXTUVAYBUUCOUUSUVCUVFYAXSWOSYSXNXTUVAYIUUFOUVIUVCUVFAXSWOSWPWNYQUVDUK
      ZYBTMKZYITMKZYDYJUWFNNUWGUWHUWFNWQUWFYBDEZYBWREUWGNOUWFUUMUWBUWIXRUUMXTUV
      DUURUTXTUWBXRUVDUWEVRZYAXSWSQYBWTYBXAXLUWFYIDEZYIWREUWHNOUWFXNUWBUWKXRXNX
      TUVDUUPUTUWJAXSWSQYIWTYIXAXLWPUWFYCTYBMYQYCTOZUVDYQXTXOUWLUVDWAUVBUVTXSBX
      BQXCZXDUWFYCTYIMUWMXDWPXEXFXGXHXIXRUUMXOYOYHOUURUUQYACYFBYFXMXJQXNXOYPYNO
      XQACYLBYLXMXJXKWP $.
      $( [4-Feb-2015] $)

    $( Lemma for ~ lgsdi and ~ lgsdir : the sign part of the Legendre symbol is
       multiplicative. $)
    lgsdilem $p |- ( ( ( A e. ZZ /\ B e. ZZ /\ N e. ZZ ) /\
                     ( A =/= 0 /\ B =/= 0 ) ) ->
      if ( ( N < 0 /\ ( A x. B ) < 0 ) , -u 1 , 1 ) =
      ( if ( ( N < 0 /\ A < 0 ) , -u 1 , 1 ) x.
        if ( ( N < 0 /\ B < 0 ) , -u 1 , 1 ) ) ) $=
      ( wcel cc0 wa clt wbr cmul co c1 cif wceq wn cr wb 0re syl adantr ifbid
      cz w3a wne cle simpl2 zre ltlen sylancr simplrr biantrud bitr4d cc simpl1
      cneg renegcl recnd mul01 mulneg1 syl2anc breq12d lt0neg1 biimpa syl112anc
      a1i ltmul2 remulcl 3bitr4d lenlt 3bitr3d oveq2 ax-1cn negcli mulm1i eqtri
      negnegi syl6eq mulid1i eqtr4i syl6eqr iftrue adantl oveq1d eqtr4d iffalse
      ifnot keepel mulid2i biimpar simplrl mpbir2and breq2d bitrd syl5eq eqtr2d
      ifsb pm2.61dan simpr biantrurd oveq12d 3eqtr3d eqcomi intnanrd 3eqtr4a )
      AUADZBUADZCUADZUBZAEUCZBEUCZFZFZCEGHZXLABIJZEGHZFZKUNZKLZXLAEGHZFZXPKLZXL
      BEGHZFZXPKLZIJZMXKXLFZXNXPKLZXRXPKLZYAXPKLZIJZXQYDXKYFYIMZXLXKXRYJXKXRFZY
      FXPYHIJZYIYKYFYANZXPKLZYLYKXNYMXPKYKEBGHZEBUDHZXNYMYKYOYPXIFZYPYKEODZBODZ
      YOYQPQXKYSXRXKXEYSXDXEXFXJUEBUFRZSZEBUGUHYKXIYPXGXHXIXRUIUJUKYKAUNZEIJZUU
      BBIJZGHZEXMUNZGHZYOXNYKUUCEUUDUUFGYKUUBULDUUCEMYKUUBYKAODZUUBODZXKUUHXRXK
      XDUUHXDXEXFXJUMAUFRZSZAUORZUPUUBUQRYKAULDZBULDUUDUUFMYKAUUKUPYKBUUAUPABUR
      USUTYKYRYSUUIEUUBGHZYOUUEPYRYKQVDUUAUULXKXRUUNXKUUHXRUUNPUUJAVARVBEBUUBVE
      VCYKXMODZXNUUGPXKUUOXRXKUUHYSUUOUUJYTABVFUSSXMVARVGYKYRYSYPYMPQUUAEBVHUHV
      ITYLYAKXPLYNYAXPKYLKXPYHXPMYLXPXPIJZKYHXPXPIVJUUPXPUNKXPKVKVLZVMKVKVOVNVP
      YHKMYLXPKIJXPYHKXPIVJXPUUQVQVPWOYAXPKWEVRVSYKYGXPYHIXRYGXPMXKXRXPKVTWAWBW
      CXKXRNZFZYIKYHIJZYFUUSYGKYHIUURYGKMXKXRXPKWDWAWBUUSUUTYHYFYHYAXPKULUUQVKW
      FWGUUSYAXNXPKUUSYAXMAEIJZGHZXNUUSYSYRUUHEAGHZYAUVBPXKYSUURYTSYRUUSQVDXKUU
      HUURUUJSZUUSUVCEAUDHZXHXKUVEUURXKYRUUHUVEUURPQUUJEAVHUHWHXGXHXIUURWIUUSYR
      UUHUVCUVEXHFPQUVDEAUGUHWJBEAVEVCUUSUVAEXMGUUSUUMUVAEMUUSAUVDUPAUQRWKWLTWM
      WNWPSYEXNXOXPKYEXLXNXKXLWQZWRTYEYGXTYHYCIYEXRXSXPKYEXLXRUVFWRTYEYAYBXPKYE
      XLYAUVFWRTWSWTXKXLNZFZKKKIJZXQYDUVIKKVKVQXAUVHXONXQKMUVHXLXNXKUVGWQZXBXOX
      PKWDRUVHXTKYCKIUVHXSNXTKMUVHXLXRUVJXBXSXPKWDRUVHYBNYCKMUVHXLYAUVJXBYBXPKW
      DRWSXCWP $.
      $( [4-Feb-2015] $)

    $( Lemma for ~ lgsdir2 . $)
    lgsdir2lem1 $p |- ( ( ( 1 mod 8 ) = 1 /\ ( -u 1 mod 8 ) = 7 ) /\
      ( ( 3 mod 8 ) = 3 /\ ( -u 3 mod 8 ) = 5 ) ) $=
      ( c1 c8 cmo co wceq c7 c3 c5 cr wcel cc0 cle wbr ltleii modid mp4an caddc
      clt 0re ax-1cn cneg crp 1re 8re 8pos elrpii lt01 1lt8 cmul mulid2i oveq2i
      recni negcli addcomi cmin negsubi 7nn nncni eqtr4i subaddrii eqtri 3eqtri
      wa df-8 oveq1i cz renegcli modcyc mp3an 7re 7pos 7lt8 3eqtr3i pm3.2i 3pos
      1z 3re 3lt8 5nn 5p3e8 5re 5pos 5lt8 ) ABCDAEZAUAZBCDZFEZVCGBCDGEZGUAZBCDZ
      HEZVCWDWGAIJBUBJZKALMABRMWDUCBUDUEUFZKASUCUGNUHABOPWEABUIDZQDZBCDZFBCDZWF
      FWOFBCWOWEBQDBWEQDZFWNBWEQBBUDULZUJZUKWEBATUMWSUNWRBAUODFBAWSTUPBAFWSTFUQ
      URZAFQDFAQDBAFTXAUNVDUSUTVAVBVEWEIJWLAVFJZWPWFEAUCVGWMVPWEBAVHVIFIJWLKFLM
      FBRMWQFEVJWMKFSVJVKNVLFBOPVMVNWHWKGIJWLKGLMGBRMWHVQWMKGSVQVONVRGBOPWIWNQD
      ZBCDZHBCDZWJHXCHBCXCWIBQDBWIQDZHWNBWIQWTUKWIBGGVQULZUMWSUNXFBGUODHBGWSXGU
      PBGHWSXGHVSURZGHQDHGQDBGHXGXHUNVTVAUTVAVBVEWIIJWLXBXDWJEGVQVGWMVPWIBAVHVI
      HIJWLKHLMHBRMXEHEWAWMKHSWAWBNWCHBOPVMVNVN $.
      $( [4-Feb-2015] $)

    ${
      lgsdir2lem2.1 $e |- ( K e. ZZ /\ 2 || ( K + 1 ) /\
        ( ( A e. ZZ /\ -. 2 || A ) ->
          ( ( A mod 8 ) e. ( 0 ... K ) -> ( A mod 8 ) e. S ) ) ) $.
      lgsdir2lem2.2 $e |- M = ( K + 1 ) $.
      lgsdir2lem2.3 $e |- N = ( M + 1 ) $.
      lgsdir2lem2.4 $e |- N e. S $.
      $( Lemma for ~ lgsdir2 . $)
      lgsdir2lem2 $p |- ( N e. ZZ /\ 2 || ( N + 1 ) /\
        ( ( A e. ZZ /\ -. 2 || A ) ->
          ( ( A mod 8 ) e. ( 0 ... N ) -> ( A mod 8 ) e. S ) ) ) $=
        ( cz wcel c2 c1 caddc co cdivides wbr cc0 cfz ax-1cn wn wa c8 wi simp1i
        cmo peano2z ax-mp eqeltri simp2i wb 2z dvdsadd mp2an mpbi cc zcn add32i
        addcomi eqtri oveq1i df-2 3eqtr4i 2cn addassi breqtrri cmin wceq wo cuz
        cfv elfzuz2 mpan fzm1 syl ibi idi eqtr4i subaddrii oveq2i eleq2s eqcomi
        eleq2i simp3i syl5bi cn 2nn 8nn w3a c4 cmul nnzi dvdsmul2 4t2e8 breqtri
        4nn dvdsmod mpan2 mp3an12 notbid biimpar id syl5breqr nsyl pm2.21d jaod
        syl5 eleq1 mpbiri a1i 3pm3.2i ) EJKZLEMNOZPQAJKZLAPQZUAZUBZAUCUFOZRESOK
        ZXRBKZUDUDEDMNOZJHDJKZYAJKDCMNOZJGCJKZYCJKZYDLYCPQZXQXRRCSOZKZXTUDUDZFU
        EZCUGUHZUIZDUGUHUIZLLYCNOZXMPYFLYNPQZYDYFYIFUJZLJKZYEYFYOUKULYKLYCUMUNU
        OXMLCNOZMNOYNEYRMNMCNOZMNOZMMNOZCNOEYRMCMTYDCUPKYJCUQUHZTUREYAYTHDYSMND
        YCYSGCMUUBTUSUTZVAUTLUUACNVBVAVCVALCMVDUUBTVEUTVFXSXRREMVGOZSOZKZXREVHZ
        VIZXQXTXSUUHXSERVJVKZKZXSUUHUKXLXSUUJYMJXRREVLVMXRREVNVOVPXQUUFXTUUGUUF
        XRRDMVGOZSOZKZXRDVHZVIZXQXTUUOXRRDSOZUUEXRUUPKZUUOUUQDUUIKZUUQUUOUKYBUU
        QUURYLJXRRDVLVMXRRDVNVOVPUUDDRSEMDXLEUPKXLYMVQEUQUHTYBDUPKYBYLVQDUQUHZM
        DNOYAEMDTUUSUSHVRVSVTWAXQUUMXTUUNUUMYHXQXTUULYGXRUUKCRSDMCUUSTUUBDYSUUC
        WBVSVTWCYDYFYIFWDWEXQUUNXTXQLXRPQZUUNXNUUTUAXPXNUUTXOLWFKZUCWFKZXNUUTXO
        UKZWGWHUVAUVBXNWILUCPQUVCLWJLWKOZUCPWJJKYQLUVDPQWJWPWLYQULVQWJLWMUNWNWO
        LAUCWQWRWSWTXAUUNLDXRPLYCDPYPGVFUUNXBXCXDXEXFXGUUGXTUDXQUUGXTEBKIXREBXH
        XIXJXFXGXK $.
        $( [4-Feb-2015] $)
    $}

    $( Lemma for ~ lgsdir2 . $)
    lgsdir2lem3 $p |- ( ( A e. ZZ /\ -. 2 || A ) ->
      ( A mod 8 ) e. ( { 1 , 7 } u. { 3 , 5 } ) ) $=
      ( cz wcel c2 cdivides wbr c8 co cc0 c7 cfz c1 c3 c5 cn ax-1cn caddc elexi
      wi sselii wn wa cmo cpr cun simpl 8nn zmodfz sylancl nncni cc idi addcomi
      cmin 7nn df-8 eqtr4i subaddrii oveq2i syl6eleq c6 c4 cneg 1z znegcl ax-mp
      2z dvds0 negidi negcli eqtr3i breqtri c0 noel pm2.21i clt wceq lt01 cr wb
      1re lt0neg2 0z fzn mp2an eleq2s a1i 3pm3.2i 0p1e1 ssun1 prid1 lgsdir2lem2
      mpbi df-2 df-3 ssun2 3nn df-4 df-5 5nn prid2 df-6 df-7 simp3i mpd ) ABCZD
      AEFUAZUBZAGUCHZIJKHZCZXILJUDZMNUDZUEZCZXHXIIGLUNHZKHZXJXHXFGOCXIXQCXFXGUF
      UGAGUHUIXPJIKGLJGUGUJLUKCPULZJUOUJZLJQHJLQHZGLJPXSUMUPUQURUSUTJBCDXTEFXHX
      KXOSSAXNNVAJAXNMVBNAXNLDMAXNLVCZILYABCZDYALQHZEFXHXIIYAKHZCXOSZSLBCYBVDLV
      EVFZDIYCEDBCDIEFVGDVHVFLYAQHIYCLPVILYAXRLPVJUMVKZVLYEXHXOXIVMYDXIVMCXOXIV
      NVOYAIVPFZYDVMVQZILVPFZYHVRLVSCYJYHVTWALWBVFWMIBCYBYHYIVTWCYFIYAWDWEWMWFW
      GWHYGWIXLXNLXLXMWJZLJLUKPRWKTWLWNWOXMXNMXMXLWPZMNMOWQRWKTWLWRWSXMXNNYLMNN
      OWTRXATWLXBXCXLXNJYKLJJOUORXATWLXDXE $.
      $( [4-Feb-2015] $)

    $( Lemma for ~ lgsdir2 . $)
    lgsdir2lem4 $p |- ( ( ( A e. ZZ /\ B e. ZZ ) /\ ( A mod 8 ) e. { 1 , 7 } )
    -> ( ( ( A x. B ) mod 8 ) e. { 1 , 7 } <-> ( B mod 8 ) e. { 1 , 7 } ) ) $=
      ( c8 cmo co c1 c7 wcel cz wa wceq wo cmul cr a1i simpr cneg oveq1d eleq1d
      syl vx cpr wb ovex elpr crp zre ad2antrr 1re simplr 8re 8pos elrpii c3 c5
      lgsdir2lem1 simpli syl6eqr modmul1 syl221anc cc zcn mulid2 eqtrd renegcli
      simpri ad2antlr mulm1 wi znegcl cv oveq1 negeq ax-1cn negcli mulcom mpan2
      imbi12d adantr 1z ax-mp eqtr3d mulid2i oveq1i eqtri syl6eq mulm1i negnegi
      ex orim12d orcom bitri 3imtr4g vtoclga negneg sylibd impbid bitrd sylan2b
      jaodan ) ACDEZFGUBZHAIHZBIHZJZXAFKZXAGKZLABMECDEZXBHZBCDEZXBHZUCZXAFGACDU
      DUEXEXFXLXGXEXFJZXHXJXBXMXHFBMEZCDEZXJXMANHZFNHZXDCUFHZXAFCDEZKXHXOKXCXPX
      DXFAUGZUHXQXMUIOXCXDXFUJZXRXMCUKULUMZOXMXAFXSXEXFPXSFKZFQZCDEZGKZYCYFJUNC
      DEUNKUNQCDEUOKJUPUQZUQZURAFBCUSUTXMXNBCDXMBVAHZXNBKXMXDYIYABVBZTBVCTRVDSX
      EXGJZXIBQZCDEZXBHZXKYKXHYMXBYKXHYDBMEZCDEZYMYKXPYDNHZXDXRXAYEKXHYPKXCXPXD
      XGXTUHYQYKFUIVEZOXCXDXGUJXRYKYBOYKXAGYEXEXGPYCYFYGVFZURAYDBCUSUTYKYOYLCDY
      KYIYOYLKXDYIXCXGYJVGBVHTRVDSXDYNXKUCXCXGXDYNXKXDYNYLQZCDEZXBHZXKXDYLIHYNU
      UBVIZBVJUAVKZCDEZXBHZUUDQZCDEZXBHZVIZUUCUAYLIUUDYLKZUUFYNUUIUUBUUKUUEYMXB
      UUDYLCDVLSUUKUUHUUAXBUUKUUGYTCDUUDYLVMRSVRUUDIHZUUEFKZUUEGKZLUUHGKZUUHFKZ
      LZUUFUUIUULUUMUUOUUNUUPUULUUMUUOUULUUMJZUUHFYDMEZCDEZGUURUUDYDMEZCDEZUUHU
      UTUURUVAUUGCDUULUVAUUGKZUUMUULUUDVAHZUVCUUDVBUVDUVAYDUUDMEZUUGUVDYDVAHUVA
      UVEKFVNVOZUUDYDVPVQUUDVHVDTZVSRUURUUDNHZXQYDIHZXRUUEXSKUVBUUTKUULUVHUUMUU
      DUGZVSXQUURUIOUVIUURFIHUVIVTFVJWAZOXRUURYBOUURUUEFXSUULUUMPYHURUUDFYDCUSU
      TWBUUTYEGUUSYDCDYDUVFWCWDYSWEWFWIUULUUNUUPUULUUNJZUUHYDYDMEZCDEZFUVLUVBUU
      HUVNUVLUVAUUGCDUULUVCUUNUVGVSRUVLUVHYQUVIXRUUEYEKUVBUVNKUULUVHUUNUVJVSYQU
      VLYROUVIUVLUVKOXRUVLYBOUVLUUEGYEUULUUNPYSURUUDYDYDCUSUTWBUVNXSFUVMFCDUVMY
      DQFYDUVFWGFVNWHWEWDYHWEWFWIWJUUEFGUUDCDUDUEUUIUUPUUOLUUQUUHFGUUGCDUDUEUUP
      UUOWKWLWMZWNTXDUUAXJXBXDYTBCDXDYIYTBKYJBWOTRSWPUUJXKYNVIUABIUUDBKZUUFXKUU
      IYNUVPUUEXJXBUUDBCDVLSUVPUUHYMXBUVPUUGYLCDUUDBVMRSVRUVOWNWQVGWRWTWS $.
      $( [4-Feb-2015] $)

    $( Lemma for ~ lgsdir2 . $)
    lgsdir2lem5 $p |- ( ( ( A e. ZZ /\ B e. ZZ ) /\
      ( ( A mod 8 ) e. { 3 , 5 } /\ ( B mod 8 ) e. { 3 , 5 } ) ) ->
        ( ( A x. B ) mod 8 ) e. { 1 , 7 } ) $=
      ( cz wcel wa c8 cmo co c3 c5 cmul c1 c7 wceq simpll a1i syl6eqr modmul12d
      oveq1i wtru cpr cneg wo ovex elpr anbi12i 3nn nnzi simplr crp 8pos elrpii
      8re simprl lgsdir2lem1 simpri simpli simprr orcd ex znegcl ax-mp mulneg1i
      nncni syl6eq olcd mulneg2i mul2negi ccased syl5bi sylibr caddc df-9 recni
      imp c9 ax-1cn addcomi eqtri 3t3e9 mulid2i oveq2i 3eqtr4i cr 1re 1z modcyc
      mp3an nnmulcli eqidd trud mulcli mulm1i 3eqtr3i preq12i syl6eleq ) ACDZBC
      DZEZAFGHZIJUAZDZBFGHZXADZEZEZABKHZFGHZIIKHZFGHZXIUBZFGHZUAZLMUAXFXHXJNZXH
      XLNZUCZXHXMDWSXEXPXEWTINZWTJNZUCZXCINZXCJNZUCZEWSXPXBXSXDYBWTIJAFGUDUEXCI
      JBFGUDUEUFWSXQXTXRYAXPWSXQXTEZXPWSYCEZXNXOYDAIBIFWQWRYCOICDZYDIUGUHZPZWQW
      RYCUIYGFUJDZYDFUMUKULZPYDWTIIFGHZWSXQXTUNYJINZIUBZFGHZJNZLFGHZLNZLUBZFGHZ
      MNZEZYKYNEZUOUPZUQZQYDXCIYJWSXQXTURUUCQRUSUTWSXRXTEZXPWSUUDEZXOXNUUEXHYLI
      KHZFGHXLUUEAYLBIFWQWRUUDOYLCDZUUEYEUUGYFIVAVBZPWQWRUUDUIYEUUEYFPYHUUEYIPU
      UEWTJYMWSXRXTUNYKYNUUBUPZQUUEXCIYJWSXRXTURUUCQRUUFXKFGIIIUGVDZUUJVCSVEVFU
      TWSXQYAEZXPWSUUKEZXOXNUULXHIYLKHZFGHXLUULAIBYLFWQWRUUKOYEUULYFPWQWRUUKUIU
      UGUULUUHPYHUULYIPUULWTIYJWSXQYAUNUUCQUULXCJYMWSXQYAURUUIQRUUMXKFGIIUUJUUJ
      VGSVEVFUTWSXRYAEZXPWSUUNEZXNXOUUOXHYLYLKHZFGHXJUUOAYLBYLFWQWRUUNOUUGUUOUU
      HPZWQWRUUNUIUUQYHUUOYIPUUOWTJYMWSXRYAUNUUIQUUOXCJYMWSXRYAURUUIQRUUPXIFGII
      UUJUUJVHSVEUSUTVIVJVOXHXJXLXGFGUDUEVKXJLXLMXJYOLXJLLFKHZVLHZFGHZYOXIUUSFG
      VPLFVLHZXIUUSVPFLVLHUVAVMFLFUMVNZVQVRVSVTUURFLVLFUVBWAWBWCSLWDDYHLCDZUUTY
      ONWEYIWFLFLWGWHVSZYPYSYTUUAUOUQZUQVSXLYRMYQXIKHZFGHZYQLKHZFGHZXLYRUVGUVIN
      TYQYQXILFYQCDZTUVCUVJWFLVAVBPZUVKXICDTXIIIUGUGWIUHPUVCTWFPYHTYIPTYRWJXJYO
      NTUVDPRWKUVFXKFGXIIIUUJUUJWLWMSUVHYQFGLVQWMSWNYPYSUVEUPVSWOWP $.
      $( [4-Feb-2015] $)

    $( The Legendre symbol is completely multiplicative at ` 2 ` . $)
    lgsdir2 $p |- ( ( A e. ZZ /\ B e. ZZ ) ->
      ( ( A x. B ) /L 2 ) = ( ( A /L 2 ) x. ( B /L 2 ) ) ) $=
      ( wcel wa c2 cc0 c8 cmo co c1 cif cmul wceq iftrue adantl 3eqtr4a iffalse
      cc syl wn cz cdivides wbr c7 cneg clgs ax-1cn negcli keepel mul02i oveq1d
      cpr 0cn wi 2z dvdsmultr1 mp3an1 imp mul01i dvdsmultr2 mulid2i lgsdir2lem4
      oveq2d wb adantlr ifbid mulid1i zcn mulcom syl2an ad2antrr eleq1d ancom1s
      bitrd mulm1i negnegi eqtri oveqan12d c3 c5 cun lgsdir2lem3 ad2ant2r sylib
      wo elun ord ad2ant2l anim12dan lgsdir2lem5 syldan pm2.61ddan ioran cprime
      2prm euclemma notbid biimpar sylan2br 3eqtr4d lgs2 zmulcl 3eqtr4rd ) AUAC
      ZBUACZDZEAUBUCZFAGHIZJUDULZCZJJUEZKZKZEBUBUCZFBGHIZXICZJXKKZKZLIZEABLIZUB
      UCZFXTGHIZXICZJXKKZKZAEUFIZBEUFIZLIXTEUFIZXFXGXNXSYEMXFXGDZFXRLIFXSYEXRXN
      FXQRUMXPJXKRUGJUGUHZUIZUIUJYIXMFXRLXGXMFMXFXGFXLNOUKYIYAYEFMZXFXGYAEUACZX
      DXEXGYAUNUOEABUPUQURYAFYDNZSPXFXNDZXMFLIFXSYEXMXGFXLRUMXJJXKRUGYJUIZUIUSY
      OXRFXMLXNXRFMXFXNFXQNOVCYOYAYLXFXNYAYMXDXEXNYAUNUOEABUTUQURYNSPXFXGTZXNTZ
      DZDZXLXQLIZYDXSYEYTXJXPUUAYDMYTXJDZJXQLIXQUUAYDXQYKVAUUBXLJXQLXJXLJMYTXJJ
      XKNOUKUUBYCXPJXKXFXJYCXPVDYSABVBVEVFPYTXPDZXLJLIXLUUAYDXLYPVGUUCXQJXLLXPX
      QJMYTXPJXKNOVCUUCYCXJJXKUUCYCBALIZGHIZXICZXJUUCYBUUEXIUUCXTUUDGHXFXTUUDMZ
      YSXPXDARCBRCUUGXEAVHBVHABVIVJVKUKVLXFXPUUFXJVDZYSXEXDXPUUHBAVBVMVEVNVFPYT
      XJTZXPTZDZDZXKXKLIZJUUAYDUUMXKUEJXKYJVOJUGVPVQUUKUUAUUMMYTUUIUUJXLXKXQXKL
      XJJXKQXPJXKQVROUULYCYDJMYTUUKXHVSVTULZCZXOUUNCZDZYCYTUUIUUOUUJUUPYTUUIUUO
      YTXJUUOYTXHXIUUNWAZCZXJUUOWEXDYQUUSXEYRAWBWCXHXIUUNWFWDWGURYTUUJUUPYTXPUU
      PYTXOUURCZXPUUPWEXEYRUUTXDYQBWBWHXOXIUUNWFWDWGURWIXFUUQYCYSABWJVEWKYCJXKN
      SPWLYSXSUUAMXFYQYRXMXLXRXQLXGFXLQXNFXQQVROYTYATZYEYDMYSXFXGXNWEZTZUVAXGXN
      WMXFUVAUVCXFYAUVBEWNCXDXEYAUVBVDWOEABWPUQWQWRWSYAFYDQSWTWLXDXEYFXMYGXRLAX
      ABXAVRXFXTUACYHYEMABXBXTXASXC $.
      $( [4-Feb-2015] $)

    $( The Legendre symbol is completely multiplicative at the primes. $)
    lgsdirprm $p |- ( ( A e. ZZ /\ B e. ZZ /\ P e. Prime ) ->
      ( ( A x. B ) /L P ) = ( ( A /L P ) x. ( B /L P ) ) ) $=
      ( cz wcel cmul co clgs wceq c2 syl2anc cabs cfv cmo cr cle wbr cc syl c1
      vx cprime w3a simpl1 simpl2 lgsdir2 simpr oveq2d oveq12d 3eqtr4d wne cmin
      wa cc0 crp clt zmulcl simpl3 prmz lgscl zcn subcl abscl prmnn nnrp absge0
      2re a1i nnre caddc readdcl cneg negcl abstri negsub fveq2d absneg 3brtr3d
      cn lgsle1 cv crab lgscl2 lgslem3 fveq2 breq1d elrab simprbi wi 1re le2add
      eqid syl22anc mp2and df-2 syl6breqr letrd cuz prmuz2 eluzle 3syl wb ltlen
      sylancr mpbir2and lelttrd modid cdivides cdiv oddprm nnnn0 mulexp syl3anc
      cexp cn0 zexpcl zre recnd mulcom eqtrd oveq1d lgsvalmod modmul1 syl221anc
      3eqtrd moddvds mpbid zsubcl dvdsabsb nn0abscl nn0z divides3 eqtr3d subeq0
      abs00 pm2.61dane ) ADEZBDEZCUBEZUCZABFGZCHGZACHGZBCHGZFGZIZCJYTCJIZUMZUUA
      JHGZAJHGZBJHGZFGZUUBUUEUUHYQYRUUIUULIYQYRYSUUGUDYQYRYSUUGUEABUFKUUHCJUUAH
      YTUUGUGZUHUUHUUCUUJUUDUUKFUUHCJAHUUMUHUUHCJBHUUMUHUIUJYTCJUKZUMZUUBUUEULG
      ZUNIZUUFUUOUUPLMZUNIZUUQUUOUURCNGZUURUNUUOUUROEZCUOEZUNUURPQZUURCUPQUUTUU
      RIUUOUUPREZUVAUUOUUBREZUUEREZUVDUUOUUBDEZUVEUUOUUADEZCDEZUVGUUOYQYRUVHYQY
      RYSUUNUDZYQYRYSUUNUEZABUQKZUUOYSUVIYQYRYSUUNURZCUSSZUUACUTKZUUBVASZUUOUUE
      DEZUVFUUOUUCDEZUUDDEZUVQUUOYQUVIUVRUVJUVNACUTKZUUOYRUVIUVSUVKUVNBCUTKZUUC
      UUDUQKZUUEVASZUUBUUEVBKZUUPVCSZUUOCVSEZUVBUUOYSUWFUVMCVDSZCVESZUUOUVDUVCU
      WDUUPVFSUUOUURJCUWEJOEZUUOVGVHZUUOUWFCOEZUWGCVISZUUOUURUUBLMZUUELMZVJGZJU
      WEUUOUWMOEZUWNOEZUWOOEUUOUVEUWPUVPUUBVCSZUUOUVFUWQUWCUUEVCSZUWMUWNVKKUWJU
      UOUUBUUEVLZVJGZLMZUWMUWTLMZVJGZUURUWOPUUOUVEUWTREZUXBUXDPQUVPUUOUVFUXEUWC
      UUEVMSUUBUWTVNKUUOUXAUUPLUUOUVEUVFUXAUUPIUVPUWCUUBUUEVOKVPUUOUXCUWNUWMVJU
      UOUVFUXCUWNIUWCUUEVQSUHVRUUOUWOTTVJGZJPUUOUWMTPQZUWNTPQZUWOUXFPQZUUOUVHUV
      IUXGUVLUVNUUACVTKUUOUUEUAWAZLMZTPQZUADWBZEZUXHUUOUUCUXMEZUUDUXMEZUXNUUOYQ
      UVIUXOUVJUVNUAACUXMUXMWLZWCKUUOYRUVIUXPUVKUVNUABCUXMUXQWCKUAUUCUUDUXMUXQW
      DKUXNUVQUXHUXLUXHUAUUEDUXJUUEIUXKUWNTPUXJUUELWEWFWGWHSUUOUWPUWQTOEZUXRUXG
      UXHUMUXIWIUWRUWSUXRUUOWJVHZUXSUWMUWNTTWKWMWNWOWPWQUUOJCUPQZJCPQZUUNUUOYSC
      JWRMEUYAUVMCWSJCWTXAYTUUNUGZUUOUWIUWKUXTUYAUUNUMXBVGUWLJCXCXDXEXFUURCXGWM
      UUOCUURXHQZUUTUNIZUUOCUUPXHQZUYCUUOUUBCNGZUUECNGZIZUYEUUOUUACTULGJXIGZXNG
      ZCNGZBUYIXNGZAUYIXNGZFGZCNGZUYFUYGUUOUYJUYNCNUUOUYJUYMUYLFGZUYNUUOAREZBRE
      ZUYIXOEZUYJUYPIUUOYQUYQUVJAVASUUOYRUYRUVKBVASUUOUYIVSEZUYSUUOYSUUNUYTUVMU
      YBCXJKUYIXKSZABUYIXLXMUUOUYMREZUYLREUYPUYNIUUOUYMUUOUYMDEZUYMOEZUUOYQUYSV
      UCUVJVUAAUYIXPKZUYMXQSZXRZUUOUYLUUOUYLDEZUYLOEZUUOYRUYSVUHUVKVUABUYIXPKUY
      LXQSZXRUYMUYLXSKXTYAUUOUVHYSUUNUYFUYKIUVLUVMUYBUUACYBXMUUOUYGUYMUUDFGZCNG
      ZUUDUYMFGZCNGZUYOUUOUUCOEZVUDUVSUVBUUCCNGUYMCNGIZUYGVULIUUOUVRVUOUVTUUCXQ
      SVUFUWAUWHUUOYQYSUUNVUPUVJUVMUYBACYBXMUUCUYMUUDCYCYDUUOVUKVUMCNUUOVUBUUDR
      EVUKVUMIVUGUUOUUDUUOUVSUUDOEZUWAUUDXQSZXRUYMUUDXSKYAUUOVUQVUIVUCUVBUUDCNG
      UYLCNGIZVUNUYOIVURVUJVUEUWHUUOYRYSUUNVUSUVKUVMUYBBCYBXMUUDUYLUYMCYCYDYEUJ
      UUOUWFUVGUVQUYHUYEXBUWGUVOUWBUUBUUECYFXMYGUUOUVIUUPDEZUYEUYCXBUVNUUOUVGUV
      QVUTUVOUWBUUBUUEYHKZCUUPYIKYGUUOUWFUURDEZUYCUYDXBUWGUUOUURXOEZVVBUUOVUTVV
      CVVAUUPYJSUURYKSCUURYLKYGYMUUOUVDUUSUUQXBUWDUUPYOSYGUUOUVEUVFUUQUUFXBUVPU
      WCUUBUUEYNKYGYP $.
      $( [4-Feb-2015] $)

    $( The Legendre symbol is completely multiplicative in its left
       argument. $)
    lgsdir $p |- ( ( ( A e. ZZ /\ B e. ZZ /\ N e. ZZ ) /\
                     ( A =/= 0 /\ B =/= 0 ) ) ->
      ( ( A x. B ) /L N ) = ( ( A /L N ) x. ( B /L N ) ) ) $=
      ( vn cz wcel cc0 wa cmul co clgs wceq cexp c1 cif cc wi idi syl cn vx w3a
      vy vz vk wne c2 ax-1cn 0cn keepel mulid2i iftrue adantl oveq1d cn0 simpl1
      zcn ad2antrr simpl2 2nn0 a1i mulexp simpr sqcl mulid2 3eqtrd eqeq1d ifbid
      syl3anc 3eqtr4a wn mul02i iffalse cdivides wbr dvdsmul1 syl2anc wb zmulcl
      dvdssq mpbid adantr breq2 syl5ibcom simprl df-ne sylib sqeq0 mtbird elnn0
      cle wo zsqcl2 ord mt3d nnz 1nn dvdsle sylancl nnge1 jctird cr nnre letri3
      1re sylibrd syld con3d imp pm2.61dan oveq2 lgs0 sylan9eqr oveq12d 3eqtr4d
      eqcomd clt cneg cabs cfv cprime cpc cmpt cseq lgsdilem mulcl eqid lgsfcl3
      cv wf ffvelrn syl2an lgscl eqtrd ifbieq12d ovex ifex fvmpt lgsval4 seqcl
      mulcom mulass cuz simpl3 nnabscl nnuz syl6eleq cfz simpll1 simpll3 elfznn
      sylan simpll2 lgsdirprm prmz pczcl mulid1i eqcomi eleq1 oveq1 eqidd elexi
      syl12anc seqcaopr negcli mul4 syl22anc pm2.61dane ) AEFZBEFZCEFZUBZAGUFZB
      GUFZHZHZABIJZCKJZACKJZBCKJZIJZLCGUVPCGLZHZUVQUGMJZNLZNGOZAUGMJZNLZNGOZBUG
      MJZNLZNGOZIJZUVRUWAUWCUWMUWFUWCUWHUWMUWFLUWCUWHHZNUWLIJUWLUWMUWFUWLUWKNGP
      UHUIUJZUKUWNUWINUWLIUWHUWINLUWCUWHNGULUMUNUWNUWEUWKNGUWNUWDUWJNUWNUWDUWGU
      WJIJZNUWJIJZUWJUWNAPFZBPFZUGUOFZUWDUWPLUVPUWRUWBUWHUVPUVIUWRUVPUVIQUVIUVJ
      UVKUVOUPZRZAUQSZURUVPUWSUWBUWHUVPUVJUWSUVPUVJQUVIUVJUVKUVOUSZRZBUQSZURUWT
      UWNUTVAABUGVBVIUWNUWGNUWJIUWCUWHVCUNUWNUWJPFZUWQUWJLUVPUXGUWBUWHUVPUWSUXG
      UVPUWSQUXFRBVDSURUWJVESVFVGVHVJUWCUWHVKZHZGUWLIJGUWMUWFUWLUWOVLUXIUWIGUWL
      IUXHUWIGLUWCUWHNGVMUMUNUXIUWEVKZUWFGLUWCUXHUXJUWCUWEUWHUWCUWEUWGNVNVOZUWH
      UWCUWGUWDVNVOZUWEUXKUVPUXLUWBUVPAUVQVNVOZUXLUVPUVIUVJUXMUXBUXEABVPVQUVPUV
      IUVQEFZUXMUXLVRUXAUVPUVIUVJUXNUXAUXDABVSVQZAUVQVTVQWAWBUWDNUWGVNWCWDUWCUX
      KUWGNWKVOZNUWGWKVOZHZUWHUWCUXKUXPUXQUWCUWGEFZNTFUXKUXPQUWCUWGTFZUXSUVPUXT
      UWBUVPUXTUWGGLZUVPUYAAGLZUVPUVMUYBVKUVLUVMUVNWEAGWFWGUVPUWRUYAUYBVRUXCAWH
      SWIUVPUXTUYAUVPUWGUOFZUXTUYAWLUVPUVIUYCUXBAWMSUWGWJWGWNWOWBZUWGWPSWQUWGNW
      RWSUWCUXTUXQUYDUWGWTSXAUWCUWGXBFZNXBFUWHUXRVRUWCUXTUYEUYDUWGXCSXEUWGNXDWS
      XFXGXHXIUWENGVMSVJXJXPUWBUVPUVRUVQGKJZUWFCGUVQKXKUVPUXNUYFUWFLUVPUXNQUXOR
      UVQXLSXMUWCUVSUWIUVTUWLIUWBUVPUVSAGKJZUWICGAKXKUVPUVIUYGUWILUXBAXLSXMUWBU
      VPUVTBGKJZUWLCGBKXKUVPUVJUYHUWLLUXEBXLSXMXNXOUVPCGUFZHZCGXQVOZUVQGXQVOHNX
      RZNOZCXSXTZIDTDYIZYAFZUVQUYOKJZUYOCYBJZMJZNOZYCZNYDXTZIJZUYKAGXQVOHZUYLNO
      ZUYKBGXQVOHZUYLNOZIJZUYNIDTUYPAUYOKJZUYRMJZNOZYCZNYDXTZUYNIDTUYPBUYOKJZUY
      RMJZNOZYCZNYDXTZIJZIJZUVRUWAUYJUYMVUHVUBVUSIUVPUYMVUHLUYIABCYEWBUYJUAUCUD
      IPUEVULVUQVUANUYNUAYIZPFZUCYIZPFZHZVVAVVCIJZPFUYJVVAVVCYFUMVVEVVFVVCVVAIJ
      LUYJVVAVVCUUAUMVVBVVDUDYIZPFUBVVFVVGIJVVAVVCVVGIJIJLUYJVVAVVCVVGUUBUMUYJU
      YNTNUUCXTUVPUVKUYIUYNTFUVIUVJUVKUVOUUDCUUEUULUUFUUGZUYJUEYIZNUYNUUHJFZHZV
      VIVULXTZEFZVVLPFUYJTEVULYJZVVITFZVVMVVJUYJUVIUVKUYIVVNUYJUVIQUVIUVJUVKUVO
      UYIUUIZRZUYJUVKQUVIUVJUVKUVOUYIUUJZRZUYJUYIQUVPUYIVCZRZADVULCVULYGZYHVIVV
      IUYNUUKZTEVVIVULYKYLVVLUQSZVVKVVIVUQXTZEFZVWEPFUYJTEVUQYJZVVOVWFVVJUYJUVJ
      UVKUYIVWGUYJUVJQUVIUVJUVKUVOUYIUUMZRVVSVWABDVUQCVUQYGZYHVIVVJVVOQVWCRTEVV
      IVUQYKYLVWEUQSZVVKVVIYAFZUVQVVIKJZVVICYBJZMJZNOZVWKAVVIKJZVWMMJZNOZVWKBVV
      IKJZVWMMJZNOZIJZVVIVUAXTZVVLVWEIJUYJVWOVXBLZVVJUYJVWKVXDUYJVWKHZVWNVWQVWT
      IJZVWOVXBVXEVWNVWPVWSIJZVWMMJZVXFVXEVWLVXGVWMMVXEUVIUVJVWKVWLVXGLVXEUVIQU
      YJUVIVWKVVPWBRVXEUVJQUYJUVJVWKVWHWBRVXEVWKQUYJVWKVCZRABVVIUUNVIUNVXEVWPPF
      ZVWSPFZVWMUOFZVXHVXFLVXEVWPEFZVXJUYJUVIVVIEFZVXMVWKVVQVVIUUOZAVVIYMYLVWPU
      QSVXEVWSEFZVXKUYJUVJVXNVXPVWKVWHVXOBVVIYMYLVWSUQSVXEVWKUVKUYIVXLVXIUYJUVK
      VWKVVRWBUYJUYIVWKVVTWBVVICUUPUVCVWPVWSVWMVBVIYNVWKVWOVWNLUYJVWKVWNNULUMVW
      KVXBVXFLUYJVWKVWRVWQVXAVWTIVWKVWQNULVWKVWTNULXNUMXOVWKVKZVXDUYJVXQNNNIJZV
      WOVXBNVXRLVXRNNUHUUQUURRVWKVWNNVMVXQVWRNVXANIVWKVWQNVMVWKVWTNVMXNVJUMXJWB
      VVKVVOVXCVWOLVVJVVOUYJVWCUMZDVVIUYTVWOTVUAUYOVVILZUYPVWKUYSNVWNNUYOVVIYAU
      USZVXTUYQVWLUYRVWMMUYOVVIUVQKXKUYOVVICYBUUTZXNVXTNUVAZYOVUAYGZVWKVWNNVWLV
      WMMYPNPUHUVBZYQYRSVVKVVLVWRVWEVXAIVVKVVOVVLVWRLVVKVVOQVXSRZDVVIVUKVWRTVUL
      VXTUYPVWKVUJNVWQNVYAVXTVUIVWPUYRVWMMUYOVVIAKXKVYBXNVYCYOVWBVWKVWQNVWPVWMM
      YPVYEYQYRSVVKVVOVWEVXALVYFDVVIVUPVXATVUQVXTUYPVWKVUONVWTNVYAVXTVUNVWSUYRV
      WMMUYOVVIBKXKVYBXNVYCYOVWIVWKVWTNVWSVWMMYPVYEYQYRSXNXOUVDXNUYJUXNUVKUYIUV
      RVUCLUVPUXNUYIUXOWBVVRVVTUVQDVUACVYDYSVIUYJUWAVUEVUMIJZVUGVURIJZIJZVUTUYJ
      UVSVYGUVTVYHIUYJUVIUVKUYIUVSVYGLVVPVVSVWAADVULCVWBYSVIUYJUVJUVKUYIUVTVYHL
      VWHVVSVWABDVUQCVWIYSVIXNUYJVUEPFZVUMPFVUGPFZVURPFVYIVUTLVYJUYJVUDUYLNPNUH
      UVEZUHUJVAUYJUEUAIPVULNUYNVVHVWDVVIPFVVBHVVIVVAIJPFUYJVVIVVAYFUMZYTVYKUYJ
      VUFUYLNPVYLUHUJVAUYJUEUAIPVUQNUYNVVHVWJVYMYTVUEVUMVUGVURUVFUVGYNXOUVH $.
      $( [4-Feb-2015] $)

    ${
      lgsdilem2.1 $e |- ( ph -> A e. ZZ ) $.
      lgsdilem2.2 $e |- ( ph -> M e. ZZ ) $.
      lgsdilem2.3 $e |- ( ph -> N e. ZZ ) $.
      lgsdilem2.4 $e |- ( ph -> M =/= 0 ) $.
      lgsdilem2.5 $e |- ( ph -> N =/= 0 ) $.
      lgsdilem2.6 $e |- F = ( n e. NN |-> if ( n e. Prime ,
        ( ( A /L n ) ^ ( n pCnt M ) ) , 1 ) ) $.
      $( Lemma for ~ lgsdi . $)
      lgsdilem2 $p |- ( ph -> ( seq 1 ( x. , F ) ` ( abs ` M ) ) =
        ( seq 1 ( x. , F ) ` ( abs ` ( M x. N ) ) ) ) $=
        ( cc c1 co wcel cn cz syl2anc syl vk vx cmul cabs cv wceq mulid1 adantl
        cfv cuz cc0 wne nnabscl syl6eleq cle wbr nnz zmulcl zcn mulne0 syl22anc
        nnuz cr abscl absge0 nnge1 lemulge11 absmul breqtrrd eluz2 syl3anbrc wa
        cfz lgsfcl3 syl3anc elfznn ffvelrn syl2an mulcl seqcl caddc cprime clgs
        cpc cexp cif peano2nn elfzuz uztrn2 eleq1 oveq2 oveq1 oveq12d ifbieq12d
        wf eqidd cvv ax-1cn elexi keepel fvmpt cq simpr ad2antrr pcabs syl12anc
        ovex zq cdivides wn clt elfzle1 adantr elfzelz zltp1le mpbird zre ltnle
        wb mpbid wi prmz dvdsle mtod pceq0 eqtr3d lgscl exp0 eqtrd ifeq1da ifid
        oveq2d syl6eq seqid2 ) AUAUCMDEUDUIZNEFUCOZUDUIZNUAUEZMPZYRNUCOYRUFAYRU
        GUHAYOQNUJUIAERPZEUKULZYOQPZHJEUMZSZVBUNZAYORPZYQRPZYOYQUOUPYQYOUJUIPAU
        UBUUFUUDYOUQTZAYQQPZUUGAYPRPZYPUKULZUUIAYTFRPZUUJHIEFURSAEMPZUUAFMPZFUK
        ULZUUKAYTUUMHEUSTZJAUULUUNIFUSTZKEFUTVAYPUMSYQUQTAYOYOFUDUIZUCOZYQUOAYO
        VCPZUURVCPZUKYOUOUPZNUURUOUPZYOUUSUOUPAUUMUUTUUPEVDTZAUUNUVAUUQFVDTAUUM
        UVBUUPEVETAUURQPZUVCAUULUUOUVEIKFUMSUURVFTYOUURVGVAAUUMUUNYQUUSUFUUPUUQ
        EFVHSVIYOYQVJVKAUAUBUCMDNYOUUEAYRNYOVMOPZVLYRDUIZRPZUVGMPAQRDWOZYRQPZUV
        HUVFABRPZYTUUAUVIGHJBCDELVNVOYRYOVPQRYRDVQVRUVGUSTYSUBUEZMPVLYRUVLUCOMP
        AYRUVLVSUHVTAYRYONWAOZYQVMOPZVLZUVGYRWBPZBYRWCOZYREWDOZWEOZNWFZNUVOUVJU
        VGUVTUFAUVMQPZYRUVMUJUIPUVJUVNAUUBUWAUUDYOWGTYRUVMYQWHNYRUVMQVBWIVRCYRC
        UEZWBPZBUWBWCOZUWBEWDOZWEOZNWFUVTQDUWBYRUFZUWCUVPUWFNUVSNUWBYRWBWJUWGUW
        DUVQUWEUVRWEUWBYRBWCWKUWBYREWDWLWMUWGNWPWNLUVPUVSNWQUVQUVRWEXGNMWRWSWTX
        ATUVOUVTUVPNNWFNUVOUVPUVSNNUVOUVPVLZUVSUVQUKWEOZNUWHUVRUKUVQWEUWHYRYOWD
        OZUVRUKUWHUVPEXBPZUUAUWJUVRUFUVOUVPXCZUWHYTUWKAYTUVNUVPHXDZEXHTAUUAUVNU
        VPJXDZEYRXEXFUWHUWJUKUFZYRYOXIUPZXJZUWHUWPYRYOUOUPZUVOUWRXJZUVPUVOYOYRX
        KUPZUWSUVOUWTUVMYRUOUPZUVNUXAAYRUVMYQXLUHUVOUUFYRRPZUWTUXAXSAUUFUVNUUHX
        MUVNUXBAYRUVMYQXNUHZYOYRXOSXPUVOUUTYRVCPZUWTUWSXSAUUTUVNUVDXMUVOUXBUXDU
        XCYRXQTYOYRXRSXTXMUWHUXBUUBUWPUWRYAUWHUVPUXBUWLYRYBZTUWHYTUUAUUBUWMUWNU
        UCSZYRYOYCSYDUWHUVPUUBUWOUWQXSUWLUXFYRYOYESXPYFYLUWHUVQMPZUWINUFUWHUVQR
        PZUXGUWHUVKUXBUXHAUVKUVNUVPGXDUVPUXBUVOUXEUHBYRYGSUVQUSTUVQYHTYIYJUVPNY
        KYMYIYN $.
        $( [4-Feb-2015] $)
    $}

    $( The Legendre symbol is completely multiplicative in its right
       argument. $)
    lgsdi $p |- ( ( ( A e. ZZ /\ M e. ZZ /\ N e. ZZ ) /\
                    ( M =/= 0 /\ N =/= 0 ) ) ->
      ( A /L ( M x. N ) ) = ( ( A /L M ) x. ( A /L N ) ) ) $=
      ( vn cz wcel wa cmul co c1 cif cfv cn cpc cexp wceq cc adantl syl oveq12d
      vx vy vz vk w3a cc0 wne clt wbr cneg cabs cv cprime clgs cmpt cseq 3anrot
      lgsdilem sylanb wb ancom ax-mp oveq12i 3eqtr4g mulcl mulcom mulass simpl2
      ifbi cuz simpl3 zmulcl syl2anc simprl simprr mulne0 syl22anc nnabscl nnuz
      zcn syl6eleq cfz wf simpl1 eqid lgsfcl3 syl3anc elfznn syl2an caddc simpr
      ffvelrn ad2antrr pcmul syl122anc oveq2d cn0 prmz lgscl pczcl expadd eqtrd
      syl12anc iftrue 3eqtr4rd wn mulid1i iffalse 3eqtr4a pm2.61dan eleq1 oveq2
      ax-1cn oveq1 eqidd ifbieq12d ovex elexi fvmpt seqcaopr lgsdilem2 caovcomd
      ifex fveq2d eqtr4d lgsval4 negcli keepel a1i seqcl mul4 3eqtr4d ) AEFZBEF
      ZCEFZUEZBUFUGZCUFUGZGZGZBCHIZUFUHUIZAUFUHUIZGZJUJZJKZUUAUKLZHDMDULZUMFZAU
      UHUNIZUUHUUANIZOIZJKZUOZJUPLZHIZBUFUHUIZUUCGZUUEJKZCUFUHUIZUUCGZUUEJKZHIZ
      BUKLZHDMUUIUUJUUHBNIZOIZJKZUOZJUPZLZCUKLZHDMUUIUUJUUHCNIZOIZJKZUOZJUPZLZH
      IZHIZAUUAUNIZABUNIZACUNIZHIZYTUUFUVCUUOUVRHYTUUCUUBGZUUEJKZUUCUUQGZUUEJKZ
      UUCUUTGZUUEJKZHIZUUFUVCYPYNYOYMUEYSUWEUWJPYMYNYOUQBCAURUSUUDUWDUTUUFUWEPU
      UBUUCVAUUDUWDUUEJVIVBUUSUWGUVBUWIHUURUWFUTUUSUWGPUUQUUCVAUURUWFUUEJVIVBUV
      AUWHUTUVBUWIPUUTUUCVAUVAUWHUUEJVIVBVCVDYTUUOUUGUVILZUUGUVPLZHIUVRYTUAUBUC
      HQUDUVHUVOUUNJUUGUAULZQFZUBULZQFZGZUWMUWOHIZQFYTUWMUWOVERUWQUWRUWOUWMHIPY
      TUWMUWOVFRZUWNUWPUCULZQFUEUWRUWTHIUWMUWOUWTHIHIPYTUWMUWOUWTVGRYTUUGMJVJLZ
      YTUUAEFZUUAUFUGZUUGMFYTYNYOUXBYMYNYOYSVHZYMYNYOYSVKZBCVLVMZYTBQFZYQCQFZYR
      UXCYTYNUXGUXDBVTSZYPYQYRVNZYTYOUXHUXECVTSZYPYQYRVOZBCVPVQZUUAVRVMVSWAYTUD
      ULZJUUGWBIFZGZUXNUVHLZEFZUXQQFZYTMEUVHWCZUXNMFZUXRUXOYTYMYNYQUXTYMYNYOYSW
      DZUXDUXJADUVHBUVHWEZWFWGZUXNUUGWHZMEUXNUVHWLZWIUXQVTZSUXPUXNUVOLZEFZUYHQF
      ZYTMEUVOWCZUYAUYIUXOYTYMYOYRUYKUYBUXEUXLADUVOCUVOWEZWFWGZUYEMEUXNUVOWLZWI
      UYHVTZSUXPUXNUMFZAUXNUNIZUXNBNIZOIZJKZUYPUYQUXNCNIZOIZJKZHIZUYPUYQUXNUUAN
      IZOIZJKZUXQUYHHIZUXNUUNLZUXPUYPVUDVUGPZUXPUYPGZVUFUYSVUBHIZVUGVUDVUKVUFUY
      QUYRVUAWJIZOIZVULVUKVUEVUMUYQOVUKUYPYNYQYOYRVUEVUMPUXPUYPWKZYTYNUXOUYPUXD
      WMZYTYQUXOUYPUXJWMZYTYOUXOUYPUXEWMZYTYRUXOUYPUXLWMZBCUXNWNWOWPVUKUYQQFZUY
      RWQFZVUAWQFZVUNVULPVUKUYQEFZVUTVUKYMUXNEFZVVCYTYMUXOUYPUYBWMUYPVVDUXPUXNW
      RRAUXNWSVMUYQVTSVUKUYPYNYQVVAVUOVUPVUQUXNBWTXCVUKUYPYOYRVVBVUOVURVUSUXNCW
      TXCUYQUYRVUAXAWGXBUYPVUGVUFPUXPUYPVUFJXDRUYPVUDVULPUXPUYPUYTUYSVUCVUBHUYP
      UYSJXDUYPVUBJXDTRXEUYPXFZVUJUXPVVEJJHIJVUDVUGJXMXGVVEUYTJVUCJHUYPUYSJXHUY
      PVUBJXHTUYPVUFJXHXIRXJUXPUYAVUHVUDPUXOUYAYTUYERZUYAUXQUYTUYHVUCHDUXNUVGUY
      TMUVHUUHUXNPZUUIUYPUVFJUYSJUUHUXNUMXKZVVGUUJUYQUVEUYROUUHUXNAUNXLZUUHUXNB
      NXNTVVGJXOZXPUYCUYPUYSJUYQUYROXQJQXMXRZYCXSDUXNUVNVUCMUVOVVGUUIUYPUVMJVUB
      JVVHVVGUUJUYQUVLVUAOVVIUUHUXNCNXNTVVJXPUYLUYPVUBJUYQVUAOXQVVKYCXSTSUXPUYA
      VUIVUGPVVFDUXNUUMVUGMUUNVVGUUIUYPUULJVUFJVVHVVGUUJUYQUUKVUEOVVIUUHUXNUUAN
      XNTVVJXPUUNWEZUYPVUFJUYQVUEOXQVVKYCXSSXEXTYTUVJUWKUVQUWLHYTADUVHBCUYBUXDU
      XEUXJUXLUYCYAYTUVQCBHIZUKLZUVPLUWLYTADUVOCBUYBUXEUXDUXLUXJUYLYAYTUUGVVNUV
      PYTUUAVVMUKYTUAUBBCQHUWSUXIUXKYBYDYDYETYETYTYMUXBUXCUVTUUPPUYBUXFUXMADUUN
      UUAVVLYFWGYTUWCUUSUVJHIZUVBUVQHIZHIZUVSYTUWAVVOUWBVVPHYTYMYNYQUWAVVOPUYBU
      XDUXJADUVHBUYCYFWGYTYMYOYRUWBVVPPUYBUXEUXLADUVOCUYLYFWGTYTUUSQFZUVJQFUVBQ
      FZUVQQFVVQUVSPVVRYTUURUUEJQJXMYGZXMYHYIYTUDUAHQUVHJUVDYTUVDMUXAYTYNYQUVDM
      FUXDUXJBVRVMVSWAYTUXNJUVDWBIFZGUXRUXSYTUXTUYAUXRVWAUYDUXNUVDWHUYFWIUYGSUX
      NQFUWNGUXNUWMHIQFYTUXNUWMVERZYJVVSYTUVAUUEJQVVTXMYHYIYTUDUAHQUVOJUVKYTUVK
      MUXAYTYOYRUVKMFUXEUXLCVRVMVSWAYTUXNJUVKWBIFZGUYIUYJYTUYKUYAUYIVWCUYMUXNUV
      KWHUYNWIUYOSVWBYJUUSUVJUVBUVQYKVQXBYL $.
      $( [5-Feb-2015] $)

    $( The Legendre symbol is nonzero (and hence equal to ` 1 ` or ` -u 1 ` )
       precisely when the arguments are coprime.  (Contributed by Mario
       Carneiro, 5-Feb-2015.) $)
    lgsne0 $p |- ( ( A e. ZZ /\ N e. ZZ ) ->
      ( ( A /L N ) =/= 0 <-> ( A gcd N ) = 1 ) ) $=
      ( cz wcel wa co cc0 wne c1 wceq c2 cexp syl cc syl2anc adantr cn cdivides
      wbr cmo vn vk vx vp vy clgs cgcd wb cif cabs cfv iffalse necon1ai ax-1ne0
      iftrue a1i eqnetrd impbii cr zre ad2antrr absresq sq1 eqeq12d recnd abscl
      cle absge0 1re 0re lt01 oveq2 sylan9eqr neeq1d eqeq1d w3a clt cmul cprime
      cv cpc ax-1cn neeq1 ifboth mp2an nnabscl nnuz syl6eleq mulcl adantl seqcl
      cuz zcn simpr prmz ad2antrl dvdsgcdb syl3anc mpbird simprd dvdsabsb mpbid
      wn wi mpd prmnn eleq1 oveq1 oveq12d eqidd ifbieq12d ovex ifex fvmpt eqtrd
      cmin cdiv caddc crp cn0 oddprm sylan nnnn0 zexpcl nnrp divides3 syl221anc
      0mod 0exp oveq1d syl6eq pm2.61dane pcabs syl12anc simplr breq2d imp elrab
      notbid gcdabs ltleii sq11 mpanr12 bitr3d lgs0 3bitr4d cneg cmpt cseq eqid
      syl5bb gcdid0 lgsval4 negne0i negcli keepel 3adant1 cfz wf lgsfcl3 elfznn
      biantrur ffvelrn syl2an mulne0b syl5rbb gcdn0cl sylan2 3impa wrex eluz2b3
      necon3ai sylbir adantlr mul02 mul01 simprr simpl1 simpl2 dvdsle nnz elfz5
      exprmfct elexi c8 c7 lgs2 simpld eqbrtrrd simprl lgsval3 0z eqtr4d modexp
      modadd1 addid2i oveq1i nnre prmuz2 eluz2b2 sylib 1mod subidi cq zq simpl3
      pcelnn eqeltrrd 3eqtrd seqz expr rexlimdva syl5 mpand necon1d simp1 lgscl
      cpr crab nprmdvds1 simp2 bitrd mtbird imnan con2d breq1 syl5ibcom dvdsgcd
      sylibr mpan2d absexp dvds0 breq2 syl5ibrcom necon3bd simp3 3eqtr3d sylibd
      rprimelpwr mtod necon3bbid lgsvalmod 3netr4d necon3i pczcl expclz expne0i
      nn0z sylanbrc pceq0 3bitr2rd biimpar oveq2d exp0 mpbir2an syl6eqel ifclda
      pm2.61dan eqeltrd ad2ant2r mulne0 anbi12i 3imtr4i simprbi ex impbid 3expa
      jca 3bitrd ) ACDZBCDZEZABUFFZGHZABUGFZIJZUHZBGVVLBGJZEZAKLFZIJZIGUIZGHZAU
      JUKZIJZVVNVVPVWCVWAVVSVWEVWCVWAVWAVWBGVWAIGULUMVWAVWBIGVWAIGUOIGHZVWAUNUP
      UQURVVSVWDKLFZIKLFZJZVWAVWEVVSVWGVVTVWHIVVSAUSDZVWGVVTJVVJVWJVVKVVRAUTVAZ
      AVBMVWHIJVVSVCUPVDVVSVWDUSDZGVWDVGSZVWIVWEUHZVVSANDZVWLVVSAVWKVEZAVFMVVSV
      WOVWMVWPAVHMVWLVWMEIUSDZGIVGSVWNVIGIVJVIVKUUAVWDIUUBUUCOUUDUUKVVSVVMVWBGV
      VRVVLVVMAGUFFZVWBBGAUFVLVVJVWRVWBJVVKAUUEPVMVNVVSVVOVWDIVVRVVLVVOAGUGFZVW
      DBGAUGVLVVJVWSVWDJVVKAUULPVMVOUUFVVJVVKBGHZVVQVVJVVKVWTVPZVVNBGVQSAGVQSEZ
      IUUGZIUIZBUJUKZVRUAQUAVTZVSDZAVXFUFFZVXFBWAFZLFZIUIZUUHZIUUIUKZVRFZGHZVXM
      GHZVVPVXAVVMVXNGAUAVXLBVXLUUJZUUMVNVXPVXDGHZVXPEZVXAVXOVXRVXPVXCGHZVWFVXR
      IWBUNUUNZUNVXBVXTVWFVXRVXCIVXCVXDGWCIVXDGWCWDWEUVBVXAVXDNDZVXMNDZVXSVXOUH
      VYBVXAVXBVXCINIWBUUOWBUUPUPVXAUBUCVRNVXLIVXEVXAVXEQIWLUKZVVKVWTVXEQDZVVJB
      WFZUUQZWGWHZVXAUBVTZIVXEUURFZDZEVYIVXLUKZCDZVYLNDZVXAQCVXLUUSVYIQDZVYMVYK
      AUAVXLBVXQUUTVYIVXEUVAZQCVYIVXLUVCUVDVYLWMMZVYINDZUCVTZNDEZVYIVYSVRFNDZVX
      AVYIVYSWIZWJWKVXDVXMUVEOUVFVXAVXPVVPVXAVVOIVXMGVXAVVOQDZVVOIHZVXMGJZVVJVV
      KVWTWUCVWTVVLAGJZVVREZXCWUCWUGBGWUFVVRWNUVLABUVGUVHUVIWUCWUDEZUDVTZVVORSZ
      UDVSUVJZVXAWUEWUHVVOKWLUKZDWUKVVOUVKVVOUDUWCUVMVXAWUJWUEUDVSVXAWUIVSDZWUJ
      WUEVXAWUMWUJEZEZUBUCVRNVXLWUIIVXEQGVYTWUAWUOWUBWJVXAVYKVYNWUNVYQUVNVYRGVY
      IVRFGJWUOVYIUVOWJVYRVYIGVRFGJWUOVYIUVPWJWUOWUIVYJDZWUIVXEVGSZWUOWUIVXERSZ
      WUQWUOWUIBRSZWURWUOWUIARSZWUSWUOWUTWUSEZWUJVXAWUMWUJUVQWUOWUICDZVVJVVKWVA
      WUJUHWUMWVBVXAWUJWUIWOWPZVVJVVKVWTWUNUVRZVVJVVKVWTWUNUVSZWUIABWQWRWSZWTWU
      OWVBVVKWUSWURUHWVCWVEWUIBXAOXBZWUOWVBVYEWURWUQXDWVCVXAVYEWUNVYGPZWUIVXEUV
      TOXEWUOWUIVYDDVXECDZWUPWUQUHWUOWUIQVYDWUMWUIQDZVXAWUJWUIXFZWPZWGWHWUOVYEW
      VIWVHVXEUWAMWUIIVXEUWBOWSWVHWUOWUIVXLUKZWUMAWUIUFFZWUIBWAFZLFZIUIZWVPGWUO
      WVJWVMWVQJWVLUAWUIVXKWVQQVXLVXFWUIJZVXGWUMVXJIWVPIVXFWUIVSXGWVRVXHWVNVXIW
      VOLVXFWUIAUFVLVXFWUIBWAXHXIWVRIXJXKVXQWUMWVPIWVNWVOLXLIUSVIUWDZXMXNMWUMWV
      QWVPJVXAWUJWUMWVPIUOWPWUOWVPGWVOLFZGWUOWVNGWVOLWUOWVNGJWUIKWUOWUIKJZEZWVN
      KARSZGAUWETFIUWFUXRDZIVXCUIZUIZGWWAWUOWVNAKUFFZWWFWUIKAUFVLWUOVVJWWGWWFJZ
      WVDAUWGZMVMWWBWWCWWFGJWWBWUIKARWUOWWAWNWUOWUTWWAWUOWUTWUSWVFUWHZPUWIWWCGW
      WEUOMXOWUOWUIKHZEZWVNAWUIIXPFKXQFZLFZIXRFWUITFZIXPFZGWWLVVJWUMWWKWVNWWPJW
      UOVVJWWKWVDPZWUOWUMWWKVXAWUMWUJUWJZPZWUOWWKWNAWUIUWKWRWWLWWPIIXPFGWWLWWOI
      IXPWWLWWOIWUITFZIWWLWWOGIXRFZWUITFZWWTWWLWWNUSDZGUSDZVWQWUIXSDZWWNWUITFZG
      WUITFZJWWOWXBJWWLWWNCDZWXCWWLVVJWWMXTDZWXHWWQWWLWWMQDZWXIWUOWUMWWKWXJWWRW
      UIYAYBZWWMYCMZAWWMYDOWWNUTMWXDWWLVJUPVWQWWLVIUPWWLWVJWXEWWLWUMWVJWWSWVKMZ
      WUIYEMZWWLWXFGWWMLFZWUITFZWXGWWLVVJGCDZWXIWXEAWUITFZWXGJWXFWXPJWWQWXQWWLU
      WLUPWXLWXNWWLWXRGWXGWWLWUTWXRGJZWUOWUTWWKWWJPWWLWVJVVJWUTWXSUHWXMWWQWUIAY
      FOXBWWLWXEWXGGJWXNWUIYHMUWMAGWWMWUIUWNYGWWLWXOGWUITWWLWXJWXOGJWXKWWMYIMYJ
      XOWWNGIWUIUWOYGWXAIWUITIWBUWPUWQYKWWLWUIUSDZIWUIVQSZWWTIJWWLWVJWXTWXMWUIU
      WRMWWLWVJWYAWWLWUIWULDZWVJWYAEWWLWUMWYBWWSWUIUWSMWUIUWTUXAWTWUIUXBOXOYJIW
      BUXCYKXOYLYJWUOWVOQDWVTGJWUOWUIVXEWAFZWVOQWUOWUMBUXDDZVWTWYCWVOJWWRWUOVVK
      WYDWVEBUXEZMVVJVVKVWTWUNUXFBWUIYMYNWUOWYCQDZWURWVGWUOWUMVYEWYFWURUHWWRWVH
      WUIVXEUXGOWSUXHWVOYIMXOUXIUXJUXKUXLUXMUXNUXOVXAVVPVXPVXAVVPEZVXMVYSGHZUCN
      UXSZDZVXPWYGUBUEVRWYIVXLIVXEVXAVXEVYDDVVPVYHPWYGVYKEZVYLVYIVSDZAVYIUFFZVY
      IBWAFZLFZIUIZWYIWYKVYOVYLWYPJVYKVYOWYGVYPWJUAVYIVXKWYPQVXLVXFVYIJZVXGWYLV
      XJIWYOIVXFVYIVSXGWYQVXHWYMVXIWYNLVXFVYIAUFVLVXFVYIBWAXHXIWYQIXJXKVXQWYLWY
      OIWYMWYNLXLWVSXMXNMWYGWYPWYIDVYKWYGWYLWYOIWYIWYGWYLEZVYIBRSZWYOWYIDZWYRWY
      SEZWYMNDZWYMGHZWYNCDZWYTWYRXUBWYSWYRWYMCDZXUBWYRVVJVYICDZXUEVXAVVJVVPWYLV
      VJVVKVWTUXPVAZWYLXUFWYGVYIWOZWJZAVYIUXQOWYMWMMZPXUAXUCVYIKXUAVYIKJZEZWYMW
      WEGXULWYMWWFWWEXUKXUAWYMWWGWWFVYIKAUFVLXUAVVJWWHWYRVVJWYSXUGPZWWIMVMXULWW
      CXCZWWFWWEJXUAXUKXUNXUAVYIARSZXCZXUKXUNWYRWYSXUPWYRXUOWYSWYRXUOWYSEZXCXUO
      WYSXCZXDWYRXUQVYIIRSZWYLXUSXCZWYGVYIUXTZWJWYRXUQVYIVVORSZXUSWYRXUFVVJVVKX
      UQXVBUHXUIXUGVXAVVKVVPWYLVVJVVKVWTUYAVAZVYIABWQWRWYRVVOIVYIRVXAVVPWYLYOZY
      PUYBUYCXUOWYSUYDUYIUYEYQZXUKXUOWWCVYIKARUYFYSUYGYQWWCGWWEULMXOWWEGHZXULVW
      FVXTXVFUNVYAWWDVWFVXTXVFIVXCIWWEGWCVXCWWEGWCWDWEUPUQXUAVYIKHZEZWYMVYITFZG
      VYITFZHXUCXVHAVYIIXPFKXQFZLFZVYITFZGXVIXVJXVHVYIXVLRSZXCXVMGHXVHXVNXUSXVH
      WYLXUTWYRWYLWYSXVGWYGWYLWNZVAZXVAMXVHXVNVYIXVLBUGFZRSZXUSXVHXVNWYSXVRWYRW
      YSXVGYOXVHXUFXVLCDZVVKXVNWYSEXVRXDXVHWYLXUFXVPXUHMZXVHVVJXVKXTDZXVSXUAVVJ
      XVGXUMPZXVHXVKQDZXWAXUAWYLXVGXWCWYRWYLWYSXVOPVYIYAYBZXVKYCMZAXVKYDOZWYRVV
      KWYSXVGXVCVAZVYIXVLBUYHWRUYJXVHXVQIVYIRXVHXVLUJUKZVXEUGFZVWDXVKLFZVXEUGFZ
      XVQIXVHXWHXWJVXEUGXVHVWOXWAXWHXWJJXVHVVJVWOXWBAWMMXWEAXVKUYKOYJXVHXVSVVKX
      WIXVQJXWFXWGXVLBYTOXVHVWDVXEUGFZIJZXWKIJZXVHXWLVVOIXVHVVJVVKXWLVVOJXWBXWG
      ABYTOWYRVVPWYSXVGXVDVAXOXVHVWDQDZVYEXWCXWMXWNXDXVHVVJAGHZXWOXWBXVHXUPXWPX
      UAXUPXVGXVEPXVHXUOAGXVHXUOWUFVYIGRSZXVHXUFXWQXVTVYIUYLMAGVYIRUYMUYNUYOXEA
      WFOWYRVYEWYSXVGWYRVVKVWTVYEXVCVXAVWTVVPWYLVVJVVKVWTUYPVAZVYFOZVAXWDVWDVXE
      XVKUYSWRXEUYQYPUYRUYTXVHXVNXVMGXVHVYOXVSXVNXVMGJUHWYRVYOWYSXVGWYLVYOWYGVY
      IXFWJVAZXWFVYIXVLYFOVUAXBXVHVVJWYLXVGXVIXVMJXWBXVPXUAXVGWNAVYIVUBWRXVHVYI
      XSDZXVJGJXVHVYOXXAXWTVYIYEMVYIYHMVUCWYMGXVIXVJWYMGVYITXHVUDMYLWYRXUDWYSWY
      RWYNXTDZXUDWYRWYLVVKVWTXXBXVOXVCXWRVYIBVUEYNWYNVUHMPXUBXUCXUDVPWYONDWYOGH
      ZWYTWYMWYNVUFWYMWYNVUGWYHXXCUCWYONVYSWYOGWCYRVUIWRWYRXUREZWYOIWYIXXDWYOWY
      MGLFZIXXDWYNGWYMLWYRWYNGJZXURWYRXURVYIVXERSZXCZVYIVXEWAFZGJZXXFWYRWYSXXGW
      YRXUFVVKWYSXXGUHXUIXVCVYIBXAOYSWYRWYLVYEXXJXXHUHXVOXWSVYIVXEVUJOWYRXXIWYN
      GWYRWYLWYDVWTXXIWYNJXVOWYRVVKWYDXVCWYEMXWRBVYIYMYNVOVUKVULVUMXXDXUBXXEIJW
      YRXUBXURXUJPWYMVUNMXOIWYIDZINDVWFWBUNWYHVWFUCINVYSIGWCYRVUOZVUPVURXXKWYGW
      YLXCEXXLUPVUQPVUSVYIWYIDZUEVTZWYIDZEZVYIXXNVRFZWYIDZWYGVYRVYIGHZEZXXNNDZX
      XNGHZEZEZXXQNDZXXQGHZEXXPXXRXYDXYEXYFVYRXYAXYEXXSXYBVYIXXNWIVUTVYIXXNVVAV
      VHXXMXXTXXOXYCWYHXXSUCVYINVYSVYIGWCYRWYHXYBUCXXNNVYSXXNGWCYRVVBWYHXYFUCXX
      QNVYSXXQGWCYRVVCWJWKWYJVYCVXPWYHVXPUCVXMNVYSVXMGWCYRVVDMVVEVVFVVIVVGYL $.
      $( [5-Feb-2015] $)

    $( The Legendre symbol is nonzero (and hence equal to ` 1 ` or ` -u 1 ` )
       precisely when the arguments are coprime.  (Contributed by Mario
       Carneiro, 5-Feb-2015.) $)
    lgsabs1 $p |- ( ( A e. ZZ /\ N e. ZZ ) ->
      ( ( abs ` ( A /L N ) ) = 1 <-> ( A gcd N ) = 1 ) ) $=
      ( cz wcel wa clgs co cabs cfv c1 wceq cle wbr cgcd cr wb cc syl cc0 wne
      lgscl zcn abscl 1re letri3 sylancl lgsle1 biantrurd cn nnne0 cn0 nn0abscl
      wo elnn0 sylib ord necon1ad impbid2 elnnnn0c abs00 necon3bid lgsne0 bitrd
      baib 3bitr3d 3bitr2d ) ACDBCDEZABFGZHIZJKZVIJLMZJVILMZEZVLABNGJKZVGVIODZJ
      ODVJVMPVGVHQDZVOVGVHCDZVPABUAZVHUBRZVHUCRUDVIJUEUFVGVKVLABUGUHVGVIUIDZVIS
      TZVLVNVGVTWAVIUJVGVTVISVGVTVISKZVGVIUKDZVTWBUMVGVQWCVRVHULRZVIUNUOUPUQURV
      GWCVTVLPWDVTWCVLVIUSVDRVGWAVHSTZVNVGVPWAWEPVSVPVISVHSVHUTVARABVBVCVEVF $.
      $( [5-Feb-2015] $)

    $( The Legendre symbol at a square is equal to ` 1 ` .  Together with
       ~ lgsmod this implies that the Legendre symbol takes value ` 1 ` at
       every quadratic residue.  (Contributed by Mario Carneiro,
       5-Feb-2015.) $)
    lgssq $p |- ( ( A e. NN /\ N e. ZZ /\ ( A gcd N ) = 1 ) ->
                  ( ( A ^ 2 ) /L N ) = 1 ) $=
      ( cn wcel cz cgcd co c1 wceq cmul clgs c2 3ad2ant1 wi idi cc sqval oveq1d
      cexp syl w3a cc0 wne nnz simp2 nnne0 lgsdir syl32anc nncn cabs cr syl2anc
      cfv lgscl zre absresq wb lgsabs1 sylan biimp3ar sq1 recnd 3eqtr3d 3eqtr4d
      syl6eq ) ACDZBEDZABFGHIZUAZAAJGZBKGZABKGZVLJGZALSGZBKGHVIAEDZVOVGAUBUCZVP
      VKVMIVFVGVOVHAUDZMZVIVONVROZVFVGVHUEZVFVGVPVHAUFMZVIVPNWAOAABUGUHVIVNVJBK
      VIAPDZVNVJIVFVGWBVHAUIMAQTRVIVLUJUMZLSGZVLLSGZHVMVIVLUKDZWDWEIVIVLEDZWFVI
      VOVGWGVSVIVGNVTOABUNULVLUOTZVLUPTVIWDHLSGHVIWCHLSVFVGWCHIZVHVFVOVGWIVHUQV
      QABURUSUTRVAVEVIVLPDWEVMIVIVLWHVBVLQTVCVD $.
      $( [5-Feb-2015] $)

    $( The Legendre symbol at a square is equal to ` 1 ` .  (Contributed by
       Mario Carneiro, 5-Feb-2015.) $)
    lgssq2 $p |- ( ( A e. ZZ /\ N e. NN /\ ( A gcd N ) = 1 ) ->
                   ( A /L ( N ^ 2 ) ) = 1 ) $=
      ( cz wcel cn cgcd co c1 wceq w3a cmul clgs c2 cexp 3ad2ant2 wi idi cc syl
      sqval cc0 wne simp1 nnz nnne0 lgsdi syl32anc nncn oveq2d cabs cfv syl2anc
      cr lgscl zre absresq wb lgsabs1 sylan2 biimp3ar oveq1d sq1 syl6eq 3eqtr3d
      recnd 3eqtr4d ) ACDZBEDZABFGHIZJZABBKGZLGZABLGZVMKGZABMNGZLGHVJVGBCDZVPBU
      AUBZVQVLVNIVGVHVIUCZVHVGVPVIBUDZOZVJVPPVTQZVHVGVQVIBUEOZVJVQPWBQABBUFUGVJ
      VOVKALVJBRDZVOVKIVHVGWCVIBUHOBTSUIVJVMUJUKZMNGZVMMNGZHVNVJVMUMDZWEWFIVJVM
      CDZWGVJVGVPWHVJVGPVRQWAABUNULVMUOSZVMUPSVJWEHMNGHVJWDHMNVGVHWDHIZVIVHVGVP
      WJVIUQVSABURUSUTVAVBVCVJVMRDWFVNIVJVMWIVEVMTSVDVF $.
      $( [5-Feb-2015] $)

    $(
    @( Lemma for ~ lgsqr . @)
    lgsqrlem @p |- ( ( ( A e. ZZ /\ P e. Prime /\ P =/= 2 ) /\
      ( A /L P ) = 1 ) -> E. x e. ZZ P || ( ( x ^ 2 ) - A ) ) @=
      ? @.

    @( The Legendre symbol for odd primes is ` 1 ` iff the number is not a
       multiple of the prime (in which case it is ` 0 ` ) and the number is a
       quadratic residue ` mod P ` (it is ` -u 1 ` for nonresidues).  Given our
       definition of the Legendre symbol, this theorem is equivalent to Euler's
       criterion. @)
    lgsqr @p |- ( ( A e. ZZ /\ P e. Prime /\ P =/= 2 ) -> ( ( A /L P ) = 1 <->
      ( -. P || A /\ E. x e. ZZ P || ( ( x ^ 2 ) - A ) ) ) ) @=
      ( cz wcel c2 wne clgs co c1 wceq cdivides wbr wa cc0 wi idi syl2anc syl
      wb cprime w3a wn cv cexp cmin wrex cgcd prmz 3ad2ant2 simp1 gcdcom eqeq1d
      simp2 coprm lgsne0 3bitr4d necon4bbid necomi neeq1 mpbiri syl6bi necon2bd
      ax-1ne0 lgsqrlem ex jcad cfv cr simprl zre absresq oveq1d simplr ad2antrr
      cn zsqcl simprr dvdssub2 syl31anc mtbird 2nn a1i prmdvdsexp syl3anc mtbid
      cabs dvds0 breq2 syl5ibrcom necon3bd mpd nnabscl nnz dvdsabsb mpbid eqtrd
      lgssq cmo prmnn moddvds mpbird simpll3 necomd cuz uzid dvdsprm necon3bbid
      2z ax-mp sylancr lgsmod 3eqtr3d 3eqtr3rd expr rexlimdva expimpd impbid )
      BDEZCUAEZCFGZUBZBCHIZJKZCBLMZUCZCAUDZFUEIZBUFILMZADUGZNYBYDYFYJYBYEYCJYBY
      EYCOKZYCJGZYBYEYCOYBCBUHIZJKZBCUHIZJKZYFYCOGZYBYMYOJYBCDEZXSYMYOKYBYRPXTX
      SYRYACUIZUJZQYBXSPXSXTYAUKZQCBULRUMYBXTXSYFYNTXSXTYAUNZUUACBUORYBXSYRYQYP
      TUUAYTBCUPRUQURYKYLOJGJOVDUSYCOJUTVAVBVCYBYDYJABCVEVFVGYBYFYJYDYBYFNZYIYD
      ADUUCYGDEZYIYDUUCUUDYINZNZYGWGVHZFUEIZCHIZYHCHIZJYCUUFUUHYHCHUUFYGVIEZUUH
      YHKUUFUUDUUKUUFUUDPUUCUUDYIVJZQZYGVKSYGVLSVMUUFUUGVPEZYRUUGCUHIZJKUUIJKUU
      FUUDYGOGZUUNUUMUUFCYGLMZUCUUPUUFCYHLMZUUQUUFUURYEYBYFUUEVNUUFYRYHDEZXSYIU
      URYETUUFYRPUUFXTYRYBXTYFUUEUUBVOZYSSZQZUUFUUSPUUFUUDUUSUULYGVQSZQZUUFXSPY
      BXSYFUUEUUAVOZQUUCUUDYIVRZCYHBVSVTWAUUFXTUUDFVPEZUURUUQTUUTUULUVGUUFWBWCY
      GCFWDWEWFZUUFUUQYGOUUFUUQYGOKCOLMZUUFYRUVIUVBCWHSYGOCLWIWJWKWLZYGWMZRUVAU
      UFUUOCUUGUHIZJUUFUUGDEZYRUUOUVLKUUFUUNUVMUUFUUDUUPUUNUULUVJUVKRUUGWNSZUVB
      UUGCULRUUFCUUGLMZUCZUVLJKZUUFUUQUVOUVHUUFYRUUDUUQUVOTUVAUULCYGWORWFUUFXTU
      VMUVPUVQTUUFXTPUUTQUUFUVMPUVNQCUUGUORWPWQUUGCWRWEUUFYHCWSIZCHIZBCWSIZCHIZ
      UUJYCUUFUVRUVTCHUUFUVRUVTKZYIUVFUUFCVPEZUUSXSUWBYITUUFXTUWCUUTCWTSZUVCUVE
      YHBCXAWEXBVMUUFUUSUWCFCLMZUCZUVSUUJKUVDUUFUWCPUWDQUUFUWFPUUFUWFFCGZUUFCFX
      SXTYAYFUUEXCXDUUFFFXEVHEZXTUWFUWGTFDEUWHXIFXFXJUUTUWHXTNUWEFCCFXGXHXKXBZQ
      YHCXLWEUUFXSUWCUWFUWAYCKUVEUWDUWIBCXLWEXMXNXOXPXQXR @.
      @( [5-Feb-2015] @)
    $)
  $}

