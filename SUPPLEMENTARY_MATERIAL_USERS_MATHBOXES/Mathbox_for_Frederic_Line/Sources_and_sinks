$(
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
              Sources and sinks
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
$)

  $c Source $.

  $( Extend class notation with the class of all sources. $)
  csrce $a class Source $.

  ${
    $d c i s x y $.
    $( A source is a family ` s ` of morphims indexed by a set ` i ` which all
       have the same domain ` d ` .  Joy of Cats, def. 10.1, p. 169.
       Experimental. $)
    df-source $a |- Source = ( c e. Cat , i e. _V |->
     { s e. ( dom ( dom_ ` c ) ^m i ) |
        A. x e. i A. y e. i ( ( dom_ ` c ) ` ( s ` x )
      ) = ( ( dom_ ` c ) ` ( s ` y ) ) } ) $.
  $}

  ${
    $d c i s x y I $.  $d c i s x y T $.  $d s x y S $.
    issrc.1 $e |- D = ( dom_ ` T ) $.
    issrc.2 $e |- M = dom ( dom_ ` T ) $.
    $( Properties of a source. $)
    issrc $p |- ( ( T e. Cat /\ I e. A ) -> ( S e. ( T Source I ) <-> (
       S e. ( M ^m I ) /\
       A. x e. I A. y e. I ( D ` ( S ` x ) ) = ( D ` ( S ` y ) ) ) ) ) $=
      ( vs vi wcel wa cv cfv wceq wral cmap cvv vc ccat csrce co cdom_ cdm crab
      elex wi rabexg fveq2 adantr dmeqd simpr oveq12d wel eleq2d fveq1d eqeq12d
      ovex imbi12d ralbidv2 rabeqbidv eqidd df-source ovmpt2x 3expia com12 mp2b
      sylan2 fveq1 fveq2d 2ralbidv eqcomi a1i oveq1d wb eqeq12i 2ralbii anbi12d
      elrab fveq1i syl5bb bitrd ) FUBMZGCMZNZEFGUCUDZMEAOZKOZPZFUEPZPZBOZWJPZWL
      PZQZBGRZAGRZKWLUFZGSUDZUGZMZEHGSUDZMZWIEPZDPZWNEPZDPZQZBGRAGRZNZWGWHXBEWF
      WEGTMZWHXBQZGCUHXATMXBTMZWEXMNZXNUIWTGSUTWSKXATUJXPXOXNWEXMXOXNUALFGUBTWK
      UAOZUEPZPZWOXRPZQZBLOZRZAYBRZKXRUFZYBSUDZUGXBUCTTXQFQZYBGQZNZYDWSKYFXAYIY
      EWTYBGSYIXRWLYGXRWLQYHXQFUEUKULZUMYGYHUNZUOYIYCWRAYBGYIALUPWIGMYCWRYIYBGW
      IYKUQYIYAWQBYBGYIBLUPWNGMYAWQYIYBGWNYKUQYIXSWMXTWPYIWKXRWLYJURYIWOXRWLYJU
      RUSVAVBVAVBVCYGTVDABLKUAVEVFVGVHVIVJUQXCEXAMZXFWLPZXHWLPZQZBGRAGRZNWGXLWS
      YPKEXAWJEQZWQYOABGGYQWMYMWPYNYQWKXFWLWIWJEVKVLYQWOXHWLWNWJEVKVLUSVMWAWGYL
      XEYPXKWGXAXDEWGWTHGSWTHQWGHWTJVNVOVPUQYPXKVQWGYOXJABGGYMXGYNXIXFWLDDWLIVN
      ZWBXHWLDYRWBVRVSVOVTWCWD $.
      $( [27-Jun-2014] $)
  $}

  ${
    $d c i s x y I $.  $d c i s x y T $.  $d s x y F $.
    propsrc.1 $e |- M = dom ( dom_ ` T ) $.
    propsrc.2 $e |- D = ( dom_ ` T ) $.
    propsrc.4 $e |- S = ( T Source I ) $.
    $( Properties of a source.  (Contributed by FL, 30-May-2014.) $)
    propsrc $p |- ( ( T e. Cat /\ I e. A /\ F e. S )
      -> ( F : I --> M /\ A. x e. I A. y e. I
     ( D ` ( F ` x ) ) = ( D ` ( F ` y ) ) ) ) $=
      ( vs wcel cfv wceq wral wa cvv wi vc vi ccat wf cv csrce eleq2i cdom_ cdm
      co elex cmap simpl fveq2d dmeqd simpr oveq12d eqeq12d raleqbidv rabeqbidv
      crab fveq1d df-source ovex rabex eleq2d fveq1 2ralbidv elrab oveq1 eqcoms
      ovmpt2a biimpd fvex dmex jctil eleq1 anbi1d syl5ibr ax-mp elmapg syl syl9
      wb eqcomi fveq1i eqeq12i 2ralbii biimpi a1i anim12d com12 sylbi syl6bi ex
      pm2.43a syl5 syl7bi 3imp ) FUCNZHCNZGENZHIGUDZAUEZGOZDOZBUEZGOZDOZPZBHQAH
      QZRZXBGFHUFUJZNZWTXAXLEXMGLUGXAHSNZWTXNXLTZHCUKWTXOXPXNWTXORZXLXQXNGXDMUE
      ZOZFUHOZOZXGXROZXTOZPZBHQZAHQZMXTUIZHULUJZVAZNZXQXLTZXQXMYIGUAUBFHUCSXSUA
      UEZUHOZOZYBYMOZPZBUBUEZQZAYQQZMYMUIZYQULUJZVAYIUFYLFPZYQHPZRZYSYFMUUAYHUU
      DYTYGYQHULUUDYMXTUUDYLFUHUUBUUCUMUNZUOUUBUUCUPZUQUUDYRYEAYQHUUFUUDYPYDBYQ
      HUUFUUDYNYAYOYCUUDXSYMXTUUEVBUUDYBYMXTUUEVBURUSUSUTABUBMUAVCYFMYHYGHULVDV
      EVLVFYJGYHNZXEXTOZXHXTOZPZBHQAHQZRZYKYFUUKMGYHXRGPZYDUUJABHHUUMYAUUHYCUUI
      UUMXSXEXTXDXRGVGUNUUMYBXHXTXGXRGVGUNURVHVIXQUULXLXQUUGXCUUKXKIYGPZXQUUGXC
      TTJUUNUUGGIHULUJZNZXQXCUUNUUGUUPUUNYHUUOGYHUUOPYGIYGIHULVJVKVFVMXQUUPXCXQ
      ISNZXORZUUPXCWDUUNXQUURTJXQUURUUNYGSNZXORXQXOUUSWTXOUPXTFUHVNVOVPUUNUUQUU
      SXOIYGSVQVRVSVTIHGSSWAWBVMWCVTUUKXKTXQUUKXKUUJXJABHHUUHXFUUIXIXEXTDDXTKWE
      ZWFXHXTDUUTWFWGWHWIWJWKWLWMWNWPWOWQWRWS $.
      $( [30-May-2014] $)
  $}

  $c Sink $.

  $( Extend class notation with the class of all sinks. $)
  csnk $a class Sink $.

  ${
    $d c i s x y $.
    $( A sink is a family of morphims indexed by a set ` i ` which all have the
       same codomain.  Joy of Cats, def. 10.62, p. 184.  Experimental. $)
    df-sink $a |- Sink = ( c e. Cat , i e. _V |-> {
      s e. ( dom ( dom_ ` c ) ^m i ) | A. x e. i A. y e. i
      ( ( cod_ ` c ) ` ( s ` x ) ) =
         ( ( cod_ ` c ) ` ( s ` y ) ) } ) $.
  $}

  $c Natural $.

  $( Extend class notation with the class of all natural sources. $)
  cntrl $a class Natural $.

  ${
    $d i t d s m $.
    $( A diagram is an indexed family of objects and morphisms in a category C.
       Maybe more than one morphism between two given objects, maybe none.  One
       might choose a simple set with no structure for the set of indices as
       usual but we can also use a category.  Let's call I this category.
       Morphisms of I are used as indices of morphisms of C and objects of I
       are used as indices of objects of C. With this convention a diagram is
       now a functor ` e. ( Func `` <. I , C >. ) ` .

       Using a category for the indices is even a better solution than using a
       simple set because with the functions dom_ and cod_ it is easy to
       express the relationship between a morphism in C and its attached
       objects simply by naming the relationship between the morphism in I and
       its attached objects (let's recall a functor preserves the domain and
       codomain).

       So ...

       Let ` d e. ( Func `` <. i , c >. ) ` be a diagram, a source indexed by
       the objects of ` i ` is said to be natural for the diagram provided that
       each morphism ` m ` of ` d ` and the morphisms of the source connected
       to its domain and codomain commute.  Joy of Cats, def. 11.3, (1)
       p. 193.  Goldblatt calls "cone" what Adamek, Herrlich and Strecker call
       "natural source".  Experimental. $)
    df-natur $a |- Natural = ( i e. Cat , t e. Cat |-> ( d e. ( Func `
      <. i , t >. ) |-> { s e. ( t Source dom ( id_ ` i ) ) |
      A. m e. dom ( dom_ ` i ) (
           ( ( dom_ ` t ) ` ( d ` m ) ) =
               ( ( cod_ ` t ) ` ( s ` ( ( dom_ ` i ) ` m ) ) )
        /\ ( ( cod_ ` t ) ` ( d ` m ) ) =
               ( ( cod_ ` t ) ` ( s ` ( ( cod_ ` i ) ` m ) ) )
        /\ ( ( d ` m ) ( o_ ` t ) ( s ` ( ( dom_ ` i ) ` m ) ) ) =
          ( s ` ( ( cod_ ` i ) ` m ) ) ) } ) ) $.
  $}

  ${
    $d d i m s t I $.  $d d m s D $.  $d d i m s t T $.  $d m s S $.
    isntr.1 $e |- O1 = dom ( id_ ` I ) $.
    isntr.2 $e |- M1 = dom ( dom_ ` I ) $.
    isntr.3 $e |- D1 = ( dom_ ` I ) $.
    isntr.4 $e |- C1 = ( cod_ ` I ) $.
    isntr.5 $e |- D2 = ( dom_ ` T ) $.
    isntr.6 $e |- C2 = ( cod_ ` T ) $.
    isntr.7 $e |- Ro2 = ( o_ ` T ) $.
    $( The predicate "is a natural source". $)
    isntr $p |- ( ( I e. Cat /\ T e. Cat /\ D e. ( Func ` <. I , T >. ) ) ->
     ( S e. ( ( I Natural T ) ` D ) <-> ( S e. ( T Source O1 ) /\ A. m e. M1
       ( ( D2 ` ( D ` m ) ) = ( C2 ` ( S ` ( D1 ` m ) ) )
       /\ ( C2 ` ( D ` m ) ) = ( C2 ` ( S ` ( C1 ` m ) ) )
       /\ ( ( D ` m ) Ro2 ( S ` ( D1 ` m ) ) ) = ( S ` ( C1 ` m ) ) ) ) ) ) $=
      ( cfv vd vs vi vt ccat wcel cop cfunc w3a cntrl co cv cdom_ ccod_ co_ cdm
      wceq wral cid_ csrce crab cmpt wa cvv fvex mptexg ax-mp a1i opeq12 fveq2d
      simpr fveq2 adantr oveq12d eleq2d adantl fveq1d fveq12d eqeq12d 3anbi123d
      dmeqd oveq123d ralbidv2 rabeqbidv mpteq12dv df-natur ovmpt2ga syld3an3 wb
      eqidd imbi12d simp3 rabexg syl fveq1 eqeq1d oveq1d ralbidv fvmptg syl2anc
      ovex eqid eqeq2d oveq2d elrab eqcomi oveq2i eleq2i fveq1i fveq12i eqeq12i
      fveq2i oveq123i 3anbi123i imbi12i ralbii2 anbi12i bitri syl6bb bitrd ) EU
      EUFZCUEUFZAECUGZUHTZUFZUIZBAECUJUKZTZUFBAUAYDDULZUAULZTZCUMTZTZYIEUMTZTZU
      BULZTZCUNTZTZUQZYKYRTZYIEUNTZTZYPTZYRTZUQZYKYQCUOTZUKZUUDUQZUIZDYNUPZURZU
      BCEUSTZUPZUTUKZVAZVBZTZUFZBCFUTUKZUFZYIATZJTZYIHTZBTZKTZUQZUVBKTZYIITZBTZ
      KTZUQZUVBUVELUKZUVJUQZUIZDGURZVCZYFYHUURBYFAYGUUQYAYBYEUUQVDUFZYGUUQUQUVR
      YFYDVDUFUVRYCUHVEUAYDUUPVDVFVGVHUCUDECUEUEUAUCULZUDULZUGZUHTZYKUVTUMTZTZY
      IUVSUMTZTZYPTZUVTUNTZTZUQZYKUWHTZYIUVSUNTZTZYPTZUWHTZUQZYKUWGUVTUOTZUKZUW
      NUQZUIZDUWEUPZURZUBUVTUVSUSTZUPZUTUKZVAZVBUUQUJVDUVSEUQZUVTCUQZVCZUAUWBUX
      FYDUUPUXIUWAYCUHUVSUVTECVIVJUXIUXBUULUBUXEUUOUXIUVTCUXDUUNUTUXGUXHVKUXIUX
      CUUMUXGUXCUUMUQUXHUVSEUSVLVMWAVNUXIUWTUUJDUXAUUKUXIYIUXAUFYIUUKUFZUWTUUJU
      XIUXAUUKYIUXIUWEYNUXGUWEYNUQUXHUVSEUMVLVMZWAVOUXIUWJYTUWPUUFUWSUUIUXIUWDY
      MUWIYSUXIYKUWCYLUXHUWCYLUQUXGUVTCUMVLVPVQUXIUWGYQUWHYRUXHUWHYRUQUXGUVTCUN
      VLVPZUXIUWFYOYPUXIYIUWEYNUXKVQVJZVRVSUXIUWKUUAUWOUUEUXIYKUWHYRUXLVQUXIUWN
      UUDUWHYRUXLUXIUWMUUCYPUXIYIUWLUUBUXGUWLUUBUQUXHUVSEUNVLVMVQVJZVRVSUXIUWRU
      UHUWNUUDUXIYKYKUWGYQUWQUUGUXHUWQUUGUQUXGUVTCUOVLVPUXIYKWJUXMWBUXNVSVTWKWC
      WDWEUDUCDUBUAWFWGWHVQVOYFUUSBUVBYLTZYSUQZUVBYRTZUUEUQZUVBYQUUGUKZUUDUQZUI
      ZDUUKURZUBUUOVAZUFZUVQYFYEUYCVDUFZUUSUYDWIYAYBYEWLYFUUOVDUFZUYEUYFYFCUUNU
      TXAVHUYBUBUUOVDWMWNYEUYEVCUURUYCBUAAUUPUYCYDVDUUQYJAUQZUULUYBUBUUOUUOUYGU
      UOWJUYGUUJUYADUUKUYGYTUXPUUFUXRUUIUXTUYGYMUXOYSUYGYKUVBYLYIYJAWOZVJWPUYGU
      UAUXQUUEUYGYKUVBYRUYHVJWPUYGUUHUXSUUDUYGYKUVBYQUUGUYHWQWPVTWRWDUUQXBWSVOW
      TUYDBUUOUFZUXOYOBTZYRTZUQZUXQUUCBTZYRTZUQZUVBUYJUUGUKZUYMUQZUIZDUUKURZVCU
      VQUYBUYSUBBUUOYPBUQZUYAUYRDUUKUYTUXPUYLUXRUYOUXTUYQUYTYSUYKUXOUYTYQUYJYRY
      OYPBWOZVJXCUYTUUEUYNUXQUYTUUDUYMYRUUCYPBWOZVJXCUYTUXSUYPUUDUYMUYTYQUYJUVB
      UUGVUAXDVUBVSVTWRXEUYIUVAUYSUVPUUOUUTBUUNFCUTFUUNMXFXGXHUYRUVODUUKGUXJYIG
      UFUYRUVOUUKGYIGUUKNXFXHUYLUVGUYOUVLUYQUVNUXOUVCUYKUVFUVBYLJJYLQXFXIUYJUVE
      YRKKYRRXFZYOUVDBYIYNHHYNOXFXIXLZXJXKUXQUVHUYNUVKUVBYRKVUCXIUYMUVJYRKVUCUU
      CUVIBYIUUBIIUUBPXFXIXLZXJXKUYPUVMUYMUVJUVBUYJUVBUVEUUGLUVBXBVUDLUUGSXFXMV
      UEXKXNXOXPXQXRXSXT $.
      $( [27-Jun-2014] $)
  $}

