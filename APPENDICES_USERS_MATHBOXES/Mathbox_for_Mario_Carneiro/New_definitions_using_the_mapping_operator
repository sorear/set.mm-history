$(
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
        New definitions using the mapping operator
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
$)

$( ==== df-plpq, etc. & df-plpr, etc. (incomplete) ========================= $)

  $(
  @{
    @d x y z A @.  @d x y z B @.  @d x y z C @.  @d x y D @.  @d x y z F @.
    @d x y z S @.  @d u v w z R @.  @d u v w x y z @.
    ecopoprNEW.1 @e |- R = { <. x , y >. |
      ( ( x e. ( S X. S ) /\ y e. ( S X. S ) ) /\
        ( ( 1st ` x ) F ( 2nd ` y ) ) = ( ( 1st ` y ) F ( 2nd ` x ) ) ) } @.
    @( This is the first of several theorems about equivalence relations of the
       kind used in construction of fractions and signed reals, involving
       operations on equivalent classes of ordered pairs.  This theorem
       expresses the relation ` R ` (specified by the hypothesis) in terms of
       its operation ` F ` . @)
    ecopopreq2 @p |- ( ( A e. ( S X. S ) /\ B e. ( S X. S ) ) ->
        ( A R B <-> ( ( 1st ` A ) F ( 2nd ` B ) ) =
                    ( ( 1st ` B ) F ( 2nd ` A ) ) ) ) @=
      ( wcel wa c1st cfv c2nd co wceq cv eleq1 fveq2 oveq1d oveq2d cxp anbi1d
      wbr eqeq12d anbi12d anbi2d brabg ibar bitr4d ) CFFUAZIZDUJIZJZCDEUCUMCKLZ
      DMLZGNZDKLZCMLZGNZOZJZUTAPZUJIZBPZUJIZJZVBKLZVDMLZGNZVDKLZVBMLZGNZOZJUKVE
      JZUNVHGNZVJURGNZOZJVAABCDUJUJEVBCOZVFVNVMVQVRVCUKVEVBCUJQUBVRVIVOVLVPVRVG
      UNVHGVBCKRSVRVKURVJGVBCMRTUDUEVDDOZVNUMVQUTVSVEULUKVDDUJQUFVSVOUPVPUSVSVH
      UOUNGVDDMRTVSVJUQURGVDDKRSUDUEHUGUMUTUHUI @.
      @( [15-Sep-2013] @)

    @( This theorem expresses the relation ` R ` (specified by the hypothesis)
       in terms of its operation ` F ` . @)
    ecopopreqNEW @p |- ( ( ( A e. S /\ B e. S ) /\
                   ( C e. S /\ D e. S ) ) ->
        ( <. A , B >. R <. C , D >. <-> ( A F D ) = ( C F B ) ) ) @=
      ( wcel wa cop c1st cfv c2nd co wceq opelxpi syl2an wbr ecopopreq2 oveq12
      cxp wb op1stg adantr op2ndg ancoms eqeq12d bitrd ) CHKZDHKZLZEHKZFHKZLZLZ
      CDMZEFMZGUAZUSNOZUTPOZIQZUTNOZUSPOZIQZRZCFIQZEDIQZRUNUSHHUDZKUTVKKVAVHUEU
      QCDHHSEFHHSABUSUTGHIJUBTURVDVIVGVJUNVBCRZVCFRVDVIRUQULVLUMCDHUFUGEFHHUHVB
      CVCFIUCTUNVFDRZVEERZVGVJRZUQCDHHUHUOVNUPEFHUFUGVNVMVOVEEVFDIUCUITUJUK @.
      @( [15-Sep-2013] @) @( [16-Aug-1995] @)

    @( Assuming the operation ` F ` is commutative, compute the domain the
       relation ` R ` specified by the first hypothesis. @)
    ecopoprdmNEW @p |- dom R = ( S X. S ) @=
      ( vz cdm cxp wss cv wcel wa c1st cfv c2nd co wceq copab opabssxp dmss wbr
      eqsstri ax-mp dmxpid sseqtri eqid ecopopreq2 mpbiri anidms vex breldm syl
      ssriv eqssi ) CHZDDIZUPUQUQIZHZUQCURJUPUSJCAKZUQLBKZUQLMUTNOVAPOEQVANOUTP
      OEQRZMABSURFVBABUQUQTUCCURUAUDUQUEUFGUQUPGKZUQLZVCVCCUBZVCUPLVDVEVDVDMVEV
      CNOVCPOEQZVFRVFUGABVCVCCDEFUHUIUJVCVCCGUKULUMUNUO @.
      @( [16-Sep-2013] @) @( [27-Aug-1995] @)

    @{
      ecopoprNEW.2 @e |- B e. _V @.
      @( Assuming the operation ` F ` is commutative, show that the relation
         ` R ` , specified by the first hypothesis, is symmetric. @)
      ecopoprsymNEW @p |- ( A R B -> B R A ) @=
        ( wbr cxp wcel wa wb cv c1st cfv c2nd co wceq copab opabssxp ecopopreq2
        eqsstri brel ancoms eqcom syl6bb bitr4d syl ibi ) CDEJZDCEJZULCFFKZLZDU
        NLZMZULUMNCDUNUNEIEAOZUNLBOZUNLMURPQUSRQGSUSPQURRQGSTZMABUAUNUNKHUTABUN
        UNUBUDUEUQULCPQDRQGSZDPQCRQGSZTZUMABCDEFGHUCUQUMVBVATZVCUPUOUMVDNABDCEF
        GHUCUFVBVAUGUHUIUJUK @.
        @( [16-Sep-2013] @) @( [27-Aug-1995] @)
    @}

    @{
      @( Assume the operation is closed. @)
      ecopoprNEW.cl @e |- ( ( x e. S /\ y e. S ) -> ( x F y ) e. S ) @.
      @( Assume the operation is commutative. @)
      ecopoprNEW.com @e |- ( x F y ) = ( y F x ) @.
      @( Assume the operation is associative. @)
      ecopoprNEW.ass @e |- ( ( x F y ) F z ) = ( x F ( y F z ) ) @.
      @( Assume the operation has the cancellation property. @)
      ecopoprNEW.can @e |- ( ( x e. S /\ y e. S ) ->
                 ( ( x F y ) = ( x F z ) -> y = z ) ) @.
      @{
        ecopoprNEW.3 @e |- B e. _V @.
        ecopoprNEW.4 @e |- C e. _V @.
        @( Assuming that operation ` F ` is closed (second hypothesis),
           commutative (third hypothesis), associative (fourth hypothesis), and
           has the cancellation property (fifth hypothesis), show that the
           relation ` R ` , specified by the first hypothesis, is
           transitive. @)
        ecopoprtrnNEW @p |- ( ( A R B /\ B R C ) -> A R C ) @=
          ( wcel c1st cfv co cxp wa wbr c2nd wceq copab opabssxp eqsstri simpld
          cv brel anim12i w3a ecopopreq2 3adant3 3adant1 anbi12d oveq12 syl6bi
          wi wb fvex caov411 ovex caovcom eqtri eqeq12i syl6ib xp1st caovcl
          xp2nd syl2anc 3ad2ant2 syl2an 3adant2 caovcan sylibrd 3expb mpcom
          syld ) DHHUAZQZEWAQZFWAQZUBZUBDEGUCZEFGUCZUBZDFGUCZWFWBWGWEWFWBWCDEWA
          WAGOGAUJZWAQBUJZWAQUBWJRSWKUDSITWKRSWJUDSITUEZUBABUFWAWAUAJWLABWAWAUG
          UHZUKUIEFWAWAGPWMUKULWBWCWDWHWIUTWBWCWDUMZWHDRSZFUDSZITZFRSZDUDSZITZU
          EZWIWNWHERSZEUDSZITZWQITZXDWTITZUEZXAWNWHWOXCITZXBWPITZITZXBWSITZWRXC
          ITZITZUEZXGWNWHXHXKUEZXIXLUEZUBXNWNWFXOWGXPWBWCWFXOVAWDABDEGHIJUNUOWC
          WDWGXPVAWBABEFGHIJUNUPUQXHXKXIXLIURUSXJXEXMXFABCWOXCXBWPIDRVBEUDVBZER
          VBZLMFUDVBVCXMWTXDITXFABCXBWSWRXCIXRDUDVBFRVBLMXQVCABWTXDIWRWSIVDZXBX
          CIVDLVEVFVGVHWNXDHQZWQHQZXGXAUTWCWBXTWDWCXBHQXCHQXTEHHVIEHHVKABXBXCHI
          KVJVLVMWBWDYAWCWBWOHQWPHQYAWDDHHVIFHHVKABWOWPHIKVJVNVOABCXDWQWTHIXSNV
          PVLVTWBWDWIXAVAWCABDFGHIJUNVOVQVRVS @.
          @( [16-Sep-2013] @) @( [11-Feb-1996] @)
      @}

      @( Assuming that operation ` F ` is closed (second hypothesis),
         commutative (third hypothesis), associative (fourth hypothesis), and
         has the cancellation property (fifth hypothesis), show that the
         relation ` R ` , specified by the first hypothesis, is an equivalence
         relation. @)
      ecopoprerNEW @p |- Er R @=
        ( vu vv vw cv vex ecopoprsymNEW ecopoprtrnNEW ster ) LMNDABLOZMOZDEFGMP
        ZQABCTUANODEFGHIJKUBNPRS @.
        @( [16-Sep-2013] @) @( [16-Feb-1996] @)
    @}
  @}

  @{
    @d a b c d x y z A @.  @d a b c d x y z B @.  @d a b d y z C @.
    @d x y M @.  @d a b d y z D @.  @d a b c d x y z G @.
    @d a b c d x y z R @.  @d x y Q @.  @d a b c d x y z S @.  @d x y F @.
    @d x K @.  @d y H @.
    oprecNEW.1 @e |- H e. _V @.
    oprecNEW.4 @e |- R e. _V @.
    oprecNEW.5 @e |- Er R @.
    @( Equivalence relation. @)
    oprecNEW.7 @e |- R = { <. x , y >. |
      ( ( x e. ( S X. S ) /\ y e. ( S X. S ) ) /\
        ( ( 1st ` x ) M ( 2nd ` y ) ) = ( ( 1st ` y ) M ( 2nd ` x ) ) ) } @.
    @( Pre-operation. @)
    oprecNEW.10 @e |- G = ( x e. ( S X. S ) , y e. ( S X. S ) |-> J ) @.
    @( Substitutions for pre-operation. @)
    oprecNEW.12 @e |- ( x = <. A , B >. -> J = K ) @.
    oprecNEW.13 @e |- ( y = <. C , D >. -> K = H ) @.
    @( Main operation. @)
    oprecNEW.14 @e |- F = ( x e. Q , y e. Q |->
      ( iota z E. a E. b ( x = [ a ] R /\ y = [ b ] R /\
               z = [ ( a G b ) ] R ) ) ) @.
    @( Quotient class for main operation. @)
    oprecNEW.15 @e |- Q = ( ( S X. S ) /. R ) @.
    @( Lemma to establish compatibility of pre-operation. @)
    oprecNEW.16 @e |- ( ( ( c e. ( S X. S ) /\ a e. ( S X. S ) ) /\
                       ( d e. ( S X. S ) /\ b e. ( S X. S ) ) ) ->
                ( ( c R a /\ d R b ) -> ( c G d ) R ( a G b ) ) ) @.
    @( Express an operation on equivalence classes of ordered pairs in terms of
       equivalence class of operations on ordered pairs.  See set.mm for
       additional comments describing the hypotheses.  (Unnecessary distinct
       variable restrictions were removed by David Abernethy, 4-Jun-2013.) @)
    oprecNEW @p |- ( ( ( A e. S /\ B e. S ) /\ ( C e. S /\ D e. S ) ) ->
                ( [ <. A , B >. ] R F [ <. C , D >. ] R ) =
                   [ H ] R ) @=
      ( wcel wa cop cec co cv wceq w3a wex cio ecopqsi 3anbi1d 2exbidv iotabidv
      eqeq1 3anbi2d iotaex ovmpt2 syl2an cvv ecexg ax-mp df-3an wbr cxp opelxpi
      wb anim12i adantr opex vex ecopoprdmNEW ereldm syl5ibcom im2anan9 imp cdm
      syl6eleqr erthdm syl bi2anan9 biimpa wi breq1 anbi1d oveq1 breq1d imbi2d
      imbi12d anbi2d oveq2 an4s ex vtocl2ga syl3anc ovex erthi eqeq2d biimpar
      3imp expl syl5bi exlimdvv eqid eceq2 adantl oveq12 cla42ev mp3an 3anbi3d
      3anbi123d mpbiri a1i impbid iota5 mpan2 eqtrd ) DJUKEJUKULZFJUKGJUKULZULZ
      DEUMZIUNZFGUMZIUNZKUOZYLQUPZIUNZUQZYNRUPZIUNZUQZCUPZYPYSLUOZIUNZUQZURZRUS
      QUSZCUTZMIUNZYHYLHUKYNHUKYOUUHUQYIJDEIHUBUIVAJFGIHUBUIVAABYLYNHHAUPZYQUQZ
      BUPZYTUQZUUEURZRUSQUSZCUTUUHKYRUUMUUEURZRUSQUSZCUTUUJYLUQZUUOUUQCUURUUNUU
      PQRUURUUKYRUUMUUEUUJYLYQVEVBVCVDUULYNUQZUUQUUGCUUSUUPUUFQRUUSUUMUUAYRUUEU
      ULYNYTVEVFVCVDUHUUGCVGVHVIYJUUHYKYMLUOZIUNZUUIYJUVAVJUKZUUHUVAUQIVJUKUVBU
      BUUTVJIVKVLYJUUGCUVAVJYJUUGUUBUVAUQZVQUVBYJUUGUVCYJUUFUVCQRUUFYRUUAULZUUE
      ULYJUVCYRUUAUUEVMYJUVDUUEUVCYJUVDULZUVCUUEUVEUVAUUDUUBUVEUUTUUCIVNZUVAUUD
      UQZUVEYKJJVOZUKZYMUVHUKZULZYPUVHUKZYSUVHUKZULZYKYPIVNZYMYSIVNZULZUVFYJUVK
      UVDYHUVIYIUVJDEJJVPZFGJJVPZVRVSYJUVDUVNYHYRUVLYIUUAUVMYHUVIYRUVLUVRYKYPUV
      HIDEVTZQWAZUCABIJPUDWBZWCWDYIUVJUUAUVMUVSYMYSUVHIFGVTZRWAZUCUWBWCWDWEWFYJ
      UVDUVQYHYRUVOYIUUAUVPYHYKIWGZUKYRUVOVQYHYKUVHUWEUVRUWBWHYKYPIUWAUCWIWJYIY
      MUWEUKUUAUVPVQYIYMUVHUWEUVSUWBWHYMYSIUWDUCWIWJWKWLUVKUVNUVQUVFUVNSUPZYPIV
      NZTUPZYSIVNZULZUWFUWHLUOZUUCIVNZWMZWMUVNUVOUWIULZYKUWHLUOZUUCIVNZWMZWMUVN
      UVQUVFWMZWMSTYKYMUVHUVHUWFYKUQZUWMUWQUVNUWSUWJUWNUWLUWPUWSUWGUVOUWIUWFYKY
      PIWNWOUWSUWKUWOUUCIUWFYKUWHLWPWQWSWRUWHYMUQZUWQUWRUVNUWTUWNUVQUWPUVFUWTUW
      IUVPUVOUWHYMYSIWNWTUWTUWOUUTUUCIUWHYMYKLXAWQWSWRUWFUVHUKZUWHUVHUKZULUVNUW
      MUXAUVLUXBUVMUWMUJXBXCXDXJXEUUTUUCIYKYMLXFYPYSLXFUCXGWJXHXIXKXLXMUVCUUGWM
      YJUVCUUGYRUUAUVGURZRUSQUSZYLYLUQZYNYNUQZUVAUVAUQZUXDYLXNYNXNUVAXNUXCUXEUX
      FUXGURQRYKYMUVTUWCYPYKUQZYSYMUQZULZYRUXEUUAUXFUVGUXGUXJYQYLYLUXHYQYLUQUXI
      YPYKIXOVSXHUXJYTYNYNUXIYTYNUQUXHYSYMIXOXPXHUXJUUDUVAUVAUXJUUCUUTUQUUDUVAU
      QYPYKYSYMLXQUUCUUTIXOWJXHYAXRXSUVCUUFUXCQRUVCUUEUVGYRUUAUUBUVAUUDVEXTVCYB
      YCYDVSYEYFYJUUTMUQZUVAUUIUQYHUVIUVJUXKYIUVRUVSABYKYMUVHUVHNMLOUFUGUEUAVHV
      IUUTMIXOWJYGYG @.
      @( [17-Sep-2013] @) @( [6-Aug-1995] @)
  @}

  @{
    @d x y @.
    @( Define pre-addition on positive fractions.  This is a "temporary" set
       used in the construction of complex numbers ~ df-c , and is intended to
       be used only by the construction.  This "pre-addition" operation works
       works directly with ordered pairs of integers.  The actual positive
       fraction addition ` +Q ` ( ~ df-plq ) works with the equivalence classes
       of these ordered pairs determined by the equivalence relation ` ~Q `
       ( ~ df-enq ).  (Analogous remarks apply to the other "pre-" operations
       in the complex number construction that follows.)  From Proposition
       9-2.3 of [Gleason] p. 117. @)
    df-plpqNEW @a |- +pQ = ( x e. ( N. X. N. ) , y e. ( N. X. N. ) |->
      <. ( ( ( 1st ` x ) .N ( 2nd ` y ) ) +N ( ( 1st ` y ) .N ( 2nd ` x ) ) ) ,
           ( ( 2nd ` x ) .N ( 2nd ` y ) ) >. ) @.

    @( Define pre-multiplication on positive fractions.  This is a "temporary"
       set used in the construction of complex numbers ~ df-c , and is intended
       to be used only by the construction.  From Proposition 9-2.4 of
       [Gleason] p. 119. @)
    df-mpqNEW @a |- .pQ = ( x e. ( N. X. N. ) , y e. ( N. X. N. ) |->
         <. ( ( 1st ` x ) .N ( 1st ` y ) ) ,
            ( ( 2nd ` x ) .N ( 2nd ` y ) ) >. ) @.

    @( Define equivalence relation for positive fractions.  This is a
       "temporary" set used in the construction of complex numbers ~ df-c , and
       is intended to be used only by the construction.  From Proposition 9-2.1
       of [Gleason] p. 117. @)
    df-enqNEW @a |- ~Q = ( ( ( N. X. N. ) X. ( N. X. N. ) )
                     \ ( <pQ u. `' <pQ ) ) @.
  @}

  @{
    @d A x y @.  @d B x y @.  @d C x y @.  @d D x y @.
    @( Equivalence relation for positive fractions in terms of positive
       integers.  (Contributed by Mario Carneiro, 8-May-2013.) @)
    ordpipq2 @p |- ( ( A e. ( N. X. N. ) /\ B e. ( N. X. N. ) ) ->
          ( A <pQ B <-> ( ( 1st ` A ) .N ( 2nd ` B ) ) <N
                        ( ( 1st ` B ) .N ( 2nd ` A ) ) ) ) @=
      ( vx vy cnpi wcel wa cltpq wbr c1st cfv c2nd cmi co clti wceq eleq1 fveq2
      cv oveq1d cxp anbi1d oveq2d breq12d anbi12d anbi2d df-ltpq brabg bitr4d
      ibar ) AEEUAZFZBUKFZGZABHIUNAJKZBLKZMNZBJKZALKZMNZOIZGZVACSZUKFZDSZUKFZGZ
      VCJKZVELKZMNZVEJKZVCLKZMNZOIZGULVFGZUOVIMNZVKUSMNZOIZGVBCDABUKUKHVCAPZVGV
      OVNVRVSVDULVFVCAUKQUBVSVJVPVMVQOVSVHUOVIMVCAJRTVSVLUSVKMVCALRUCUDUEVEBPZV
      OUNVRVAVTVFUMULVEBUKQUFVTVPUQVQUTOVTVIUPUOMVEBLRUCVTVKURUSMVEBJRTUDUECDUG
      UHUNVAUJUI @.
      @( [15-Sep-2013] @) @( [27-Aug-1995] @)

    ordpipqNEW.1 @e |- A e. _V @.
    ordpipqNEW.2 @e |- B e. _V @.
    ordpipqNEW.3 @e |- C e. _V @.
    ordpipqNEW.4 @e |- D e. _V @.
    @( Ordering of positive fractions in terms of positive integers.
       (Contributed by Mario Carneiro, 8-May-2013.) @)
    ordpipqNEW @p |- ( <. A , B >. <pQ <. C , D >. <->
                          ( A .N D ) <N ( C .N B ) ) @=
      ( vx vy wbr cnpi wcel wa cmi co clti c1st cfv c2nd cop cltpq cxp cv copab
      opex df-ltpq opabssxp eqsstri brel ovex ltrelpi dmmulpi ndmovrcl simpld
      0npi simprd opelxpi syl2an ancoms jca syl ordpipq2 op1st oveq12i breq12i
      op2nd syl6bb pm5.21nii ) ABUAZCDUAZUBKZVJLLUCZMZVKVMMZNZADOPZCBOPZQKZVJVK
      VMVMUBCDUFUBIUDZVMMJUDZVMMNVTRSWATSOPWARSVTTSOPQKZNIJUEVMVMUCIJUGWBIJVMVM
      UHUIUJVSVQLMZVRLMZNZVPVQVRLLQCBOUKULUJWEVNVOWCALMZBLMZVNWDWCWFDLMZADLOHUM
      UPUNZUOWDCLMZWGCBLOFUMUPUNZUQABLLURUSWCWHWJVOWDWCWFWHWIUQWDWJWGWKUOWJWHVO
      CDLLURUTUSVAVBVPVLVJRSZVKTSZOPZVKRSZVJTSZOPZQKVSVJVKVCWNVQWQVRQWLAWMDOABE
      VDCDGHVGVEWOCWPBOCDGVDABEFVGVEVFVHVI @.
      @( [15-Sep-2013] @) @( [8-May-2013] @)
  @}

  @{
    @d x y z @.
    @( Equivalence relation for positive fractions in terms of positive
       integers.  This was the original definition, before the shorter ~ df-enq
       was discovered.  (Contributed by Mario Carneiro, 8-May-2013.) @)
    dfenq2 @p |- ~Q = { <. x , y >. |
      ( ( x e. ( N. X. N. ) /\ y e. ( N. X. N. ) ) /\
        ( ( 1st ` x ) .N ( 2nd ` y ) ) = ( ( 1st ` y ) .N ( 2nd ` x ) ) ) } @=
      ( vz cnpi cxp cltpq cv wceq wcel wa c1st cfv c2nd cmi co wex wn clti wbr
      wo ccnv cun cdif cop cab copab eldif elxp anbi1i 19.41vv eleq1 df-br brun
      ceq bitr3i syl6bb ordpipq2 wb brcnv syl5bb ancoms orbi12d sylan9bb notbid
      vex wor ltsopi xp1st mulclpi syl2an syl2anr sotrieq sylancr adantl bitr4d
      xp2nd pm5.32i anass bitri 2exbii 3bitri abbi2i df-enqNEW df-opab 3eqtr4i
      jca ) DDEZWGEZFFUAZUBZUCZCGZAGZBGZUDZHZWMWGIZWNWGIZJZWMKLZWNMLZNOZWNKLZWM
      MLZNOZHZJZJZBPAPZCUEUNXGABUFXICWKWLWKIWLWHIZWLWJIZQZJWPWSJZBPAPZXLJZXIWLW
      HWJUGXJXNXLABWLWGWGUHUIXOXMXLJZBPAPXIXMXLABUJXPXHABXPXMXFJXHXMXLXFXMXLXBX
      ERSZXEXBRSZTZQZXFXMXKXSWPXKWMWNFSZWMWNWISZTZWSXSWPXKWOWJIZYCWLWOWJUKYDWMW
      NWJSYCWMWNWJULWMWNFWIUMUOUPWSYAXQYBXRWMWNUQWRWQYBXRURYBWNWMFSWRWQJXRWMWNF
      AVEBVEUSWNWMUQUTVAVBVCVDWSXFXTURZWPWSDRVFXBDIZXEDIZJYEVGWSYFYGWQWTDIXADIY
      FWRWMDDVHWNDDVPWTXAVIVJWRXCDIXDDIYGWQWNDDVHWMDDVPXCXDVIVKWFDXBXERVLVMVNVO
      VQWPWSXFVRVSVTUOWAWBWCXGABCWDWE @.
      @( [17-Sep-2013] @) @( [27-Aug-1995] @)
  @}

  @{
    @d x y z w v u @.
    @( The equivalence relation for positive fractions exists. @)
    enqexNEW @p |- ~Q e. _V @=
      ( ceq cnpi cxp cltpq ccnv cun cdif cvv df-enqNEW wcel niex difexg eqeltri
      xpex ax-mp ) ABBCZPCZDDEFZGZHIQHJSHJPPBBKKNZTNQRHLOM @.
      @( [17-Sep-2013] @) @( [3-Sep-1995] @)
  @}

  @{
    @d a x y A @.  @d a b c x y z @.
    @( There is a unique element of ` Q. ` equivalent to each element of
       ` N. X. N. ` .  (Contributed by Mario Carneiro, 28-Apr-2013.) @)
    nqereuNEW @p |- ( A e. ( N. X. N. ) -> E! x e. Q. x ~Q A ) @=
      ( vy va vz vb vc cnpi wcel ceq wbr cnq wa wceq wi wral c2nd cfv clti wn
      cxp wrex wreu con0 csuc xp2nd pion suceloni 3syl fvex sucid eleq2 rcla4ev
      cv sylancl imbi1d ralbidv rexnal pm4.63 wb ltpiord anbi2d syl5bb rexbidva
      syl2anr syl5bbr w3a rcla4cva fveq2 breq2 rexbidv imbi12d rcla4cv syl 3imp
      eleq1d vex enqer ersym ertr expcom reximdv syl5com 3expia com23 rexlimdva
      imp3a ex com3r syl6bi com13 cmi dfenq2 ecopoprdmNEW df-nq rabeq2i biimpri
      erref2 breq1 sylsyld com12 a1dd pm2.61d2 ralrimiv cbvralv sylib a1i tfis2
      rcla4v syl5 rexlimdv mpd anbi12d 2ralbidv sylan2 c1st cop mulcompi breq2d
      co elpqn notbid elrab2 simprbi breq1d rcla4va syl2an ancoms imp wo ltsopi
      wor sotric mpan notnot syl6bbr adantr mpbid 1st2nd sylancr oveq2d syl5eq
      ord mt3d ecopopreq2 biimpa eqtrd syl6eq ad2antrr mulcanpi syl2anc opeq12d
      xp1st wrel relxp ad2antlr 3eqtr4d rgen2a vtoclg reu4 sylanbrc ) BHHUAZIZA
      UNZBJKZALUBZUVECUNZBJKZMZUVDUVGNZOZCLPALPZUVEALUCUVCBQRZUVGIZCUDUBZUVFUVC
      UVMUEZUDIZUVMUVPIZUVOUVCUVMHIUVMUDIUVQBHHUFUVMUGUVMUHUIUVMBQUJUKUVNUVRCUV
      PUDUVGUVPUVMULUMUOUVCUVNUVFCUDUVGUDIZDUNZQRZUVGIZUVDUVTJKZALUBZOZDUVBPZUV
      CUVNUVFOZUWFUWAEUNZIZUWDOZDUVBPZCEUVGUWHNZUWEUWJDUVBUWLUWBUWIUWDUVGUWHUWA
      ULUPUQUWKEUVGPZUWFOUVSUWMFUNZQRZUVGIZUVDUWNJKZALUBZOZFUVBPUWFUWMUWSFUVBUW
      MUWNGUNZJKZUWTQRZUWOSKZTOZGUVBPZUWNUVBIZUWSOUXFUXETZUWMUWSUXFUXGUXAUXBUWO
      IZMZGUVBUBZUWMUWSOUXGUXDTZGUVBUBUXFUXJUXDGUVBURUXFUXKUXIGUVBUXKUXAUXCMUXF
      UWTUVBIZMZUXIUXAUXCUSUXMUXCUXHUXAUXLUXBHIUWOHIUXCUXHUTUXFUWTHHUFUWNHHUFUX
      BUWOVAVEVBVCVDVFUWMUWPUXJUWRUWMUWPUXJUWROUWMUWPMZUXIUWRGUVBUXNUXLMZUXAUXH
      UWRUXOUXHUXAUWRUXNUXLUXHUXAUWROUXNUXLUXHVGUVDUWTJKZALUBZUXAUWRUXNUXLUXHUX
      QUXNUWAUWOIZUWDOZDUVBPZUXLUXHUXQOZOUWKUXTEUWOUVGUWHUWONZUWJUXSDUVBUYBUWIU
      XRUWDUWHUWOUWAULUPUQVHUXSUYADUWTUVBUVTUWTNZUXRUXHUWDUXQUYCUWAUXBUWOUVTUWT
      QVIVPUYCUWCUXPALUVTUWTUVDJVJVKVLVMVNVOUXAUXPUWQALUXAUWTUWNJKZUXPUWQOUWNUW
      TJFVQZGVQZVRVSUXPUYDUWQUVDUWTUWNJAVQZUYFUYEVRVTWAVNWBWCWDWEWGWFWHWIWJWKUX
      EUXFUWRUWPUXFUXEUWRUXFUWNUWNJKZUXEUWNLIZUWRUWNUVBJVRACJHWLACWMWNWRUXFUXEU
      YIUYIUXFUXEMUXEFLUVBFGWOWPWQWHUYIUYHUWRUWQUYHAUWNLUVDUWNUWNJWSUMWAWTXAXBX
      CXDUWSUWEFDUVBUWNUVTNZUWPUWBUWRUWDUYJUWOUWAUVGUWNUVTQVIVPUYJUWQUWCALUWNUV
      TUVDJVJVKVLXEXFXGXHUWEUWGDBUVBUVTBNZUWBUVNUWDUVFUYKUWAUVMUVGUVTBQVIVPUYKU
      WCUVEALUVTBUVDJVJZVKVLXIXJXKXLUWCUVGUVTJKZMZUVJOZCLPALPUVLDBUVBUYKUYOUVKA
      CLLUYKUYNUVIUVJUYKUWCUVEUYMUVHUYLUVTBUVGJVJXMUPXNUYOACLUYNUVDUVGJKZUVDLIZ
      UVGLIZMZUVJUYMUWCUVTUVGJKUYPUVGUVTJCVQZDVQZVRVSUVDUVTUVGJUYGVUAUYTVRVTXOU
      YSUYPUVJUYSUYPMZUVDXPRZUVDQRZXQZUVGXPRZUVGQRZXQZUVDUVGVUBVUCVUFVUDVUGVUBV
      UDVUCWLXTZVUDVUFWLXTZNZVUCVUFNZVUBVUIVUFVUDWLXTZVUJVUBVUIVUCVUGWLXTZVUMVU
      BVUIVUCVUDWLXTVUNVUDVUCUVDQUJZUVDXPUJXRVUBVUDVUGVUCWLVUBVUDVUGNZVUGVUDSKZ
      UYSUYPVUQTZUYRUYQUYPVUROZUYRUVGUVBIZUVDUWHJKZUWHQRZVUDSKZTZOZEUVBPZVUSUYQ
      UVGYAZUYQUVDUVBIZVVFUVGUWHJKZVVBVUGSKZTZOZEUVBPZVVFCUVDUVBLUVGUVDNZVVLVVE
      EUVBVVNVVIVVAVVKVVDUVGUVDUWHJWSVVNVVJVVCVVNVUGVUDVVBSUVGUVDQVIXSYBVLUQCEW
      OZYCYDVVEVUSEUVGUVBUWHUVGNZVVAUYPVVDVURUWHUVGUVDJVJVVPVVCVUQVVPVVBVUGVUDS
      UWHUVGQVIYEYBVLYFYGYHYIVUBVUPVUQVUBVUDVUGSKZTZVUPVUQYJZUYSUYPVVRUYPUVGUVD
      JKZUYSVVRUVDUVGJUYGUYTVRVSUYQVVHVVMVVTVVROZUYRUVDYAZUYRVUTVVMVVMCLUVBVVOW
      PYDVVLVWAEUVDUVBUWHUVDNZVVIVVTVVKVVRUWHUVDUVGJVJVWCVVJVVQVWCVVBVUDVUGSUWH
      UVDQVIYEYBVLYFYGXJYIUYSVVRVVSUTZUYPUYQVUDHIZVUGHIZVWDUYRUYQVVHVWEVWBUVDHH
      UFZVNUYRVUTVWFVVGUVGHHUFVNVWEVWFMZVVRVVSTZTVVSVWHVVQVWIHSYLVWHVVQVWIUTYKH
      VUDVUGSYMYNYBVVSYOYPYGYQYRUUCUUDZUUAUUBUYSUYPVUNVUMNZUYQVVHVUTUYPVWKUTUYR
      VWBVVGDFUVDUVGJHWLDFWMUUEYGUUFUUGVUFVUDUVGXPUJZVUOXRUUHVUBVVHVUKVULUTZUYQ
      VVHUYRUYPVWBUUIZVVHVWEVUCHIVWMVWGUVDHHUUMVUDVUCVUFVWLUUJUUKVNYRVWJUULVUBU
      VBUUNZVVHUVDVUENHHUUOZVWNUVDUVBYSYTVUBVWOVUTUVGVUHNVWPUYRVUTUYQUYPVVGUUPU
      VGUVBYSYTUUQWHXJUURUUSUVEUVHACLUVDUVGBJWSUUTUVA @.
      @( [17-Sep-2013] @) @( [28-Apr-2013] @)
  @}

  @{
    @d A x y @.
    @( Corollary of ~ nqereu : the function ` /Q ` acts as the identity on
       members of ` Q. ` .  (Contributed by Mario Carneiro, 6-May-2013.) @)
    nqeridNEW @p |- ( A e. Q. -> ( /Q ` A ) = A ) @=
      ( vx vy cv cerq cfv wceq cnq fveq2 id eqeq12d wfun wcel wbr cnpi wf nqerf
      cxp ffun ceq ax-mp cin elpqn cmi dfenq2 ecopoprdmNEW erref2 syl wb brinxp
      enqer mpancom mpbid df-erq breqi sylibr vex funbrfv mpsyl vtoclga ) BDZEF
      ZVAGZAEFZAGBAHVAAGZVBVDVAAVAAEIVEJKELZVAHMZVAVAENZVCOORZHEPVFQVIHESUAVGVA
      VATVIHRUBZNZVHVGVAVATNZVKVGVAVIMZVLVAUCZVAVITUKBCTOUDBCUEUFUGUHVMVGVLVKUI
      VNVAVAVIHTUJULUMVAVAEVJUNUOUPVAVAEBUQURUSUT @.
      @( [17-Sep-2013] @) @( [6-May-2013] @)
  @}

  @{
    @d A x y @.  @d B x @.
    @( Corollary of ~ nqereu : if two fractions are both reduced and
       equivalent, then they are equal.  (Contributed by Mario Carneiro,
       6-May-2013.) @)
    enqeqNEW @p |- ( ( A e. Q. /\ B e. Q. /\ A ~Q B ) -> A = B ) @=
      ( vx vy cnq wcel ceq wbr w3a wa wmo wceq 3simpa cnpi 3ad2ant2 eleq1 breq1
      cv cxp anbi12d wreu elpqn nqereu wrex reu5 simprbi 3simpb simp2 enqer cmi
      3syl dfenq2 ecopoprdmNEW erref2 syl jca moi syl112anc ) AEFZBEFZABGHZIZUS
      UTJCRZEFZVCBGHZJZCKZUSVAJZUTBBGHZJZABLUSUTVAMVBBNNSZFZVECEUAZVGUTUSVLVABU
      BZOCBUCVMVECEUDVGVECEUEUFUKUSUTVAUGVBUTVIUSUTVAUHUTUSVIVAUTVLVIVNBVKGUICD
      GNUJCDULUMUNUOOUPVFVHVJCABEEVCALVDUSVEVAVCAEPVCABGQTVCBLVDUTVEVIVCBEPVCBB
      GQTUQUR @.
      @( [17-Sep-2013] @) @( [28-Apr-2013] @)
  @}

  @( The function ` /Q ` acts as a substitute for equivalence classes, and it
     satisfies the fundamental requirement for equivalence representatives: the
     representatives are equal iff the members are equivalent.  (Contributed by
     Mario Carneiro, 6-May-2013.) @)
  nqereqNEW @p |- ( ( A e. ( N. X. N. ) /\ B e. ( N. X. N. ) ) ->
      ( A ~Q B <-> ( /Q ` A ) = ( /Q ` B ) ) ) @=
    ( cnpi cxp wcel ceq wbr cerq cfv cnq nqercl 3ad2ant1 3ad2ant2 nqerrel enqer
    wa fvex wrel cltpq errtr wceq w3a wss ccnv cun cdif df-enqNEW difss eqsstri
    relxp relss mp2 errsym syl simp3 syl2anc enqeq syl3anc breq1 biimparc sylan
    3expia syl2an expr impbid ) ACCDZEZBVFEZPABFGZAHIZBHIZUAZVGVHVIVLVGVHVIUBZV
    JJEZVKJEZVJVKFGZVLVGVHVNVIAKLVHVGVOVIBKMVMVJAFGZAVKFGZVPVGVHVQVIVGAVJFGZVQA
    NZAVJFAHQOFVFVFDZUCWARFRFWASSUDUEZUFWAUGWAWBUHUIVFVFUJFWAUKULZUMUNLVMVIBVKF
    GZVRVGVHVIUOVHVGWDVIBNZMABVKFOWCTUPVJAVKFOWCTUPVJVKUQURVBVGVHVLVIVGVSVJBFGZ
    VIVHVLPVTVHVKBFGZVLWFVHWDWGWEBVKFBHQOWCUMUNVLWFWGVJVKBFUSUTVAAVJBFOWCTVCVDV
    E @.
    @( [17-Sep-2013] @) @( [6-May-2013] @)

  @{
    @d A x y z @.  @d B x y z @.  @d C y z @.  @d D y z @.
    @( Addition of positive fractions in terms of positive integers.
       (Contributed by Mario Carneiro, 6-May-2013.) @)
    addpipq2NEW @p |- ( ( A e. ( N. X. N. ) /\ B e. ( N. X. N. ) ) ->
      ( A +pQ B ) = <. ( ( ( 1st ` A ) .N ( 2nd ` B ) ) +N
                         ( ( 1st ` B ) .N ( 2nd ` A ) ) ) ,
                         ( ( 2nd ` A ) .N ( 2nd ` B ) ) >. ) @=
      ( vx vy cnpi cxp cv c1st cfv c2nd cmi cpli cop wceq fveq2 oveq1d oveq2d
      co oveq12d opeq12d cplpq df-plpqNEW opex ovmpt2 ) CDABEEFZUECGZHIZDGZJIZ
      KRZUHHIZUFJIZKRZLRZULUIKRZMAHIZBJIZKRZBHIZAJIZKRZLRZUTUQKRZMUAUPUIKRZUKUT
      KRZLRZUTUIKRZMUFANZUNVFUOVGVHUJVDUMVELVHUGUPUIKUFAHOPVHULUTUKKUFAJOZQSVHU
      LUTUIKVIPTUHBNZVFVBVGVCVJVDURVEVALVJUIUQUPKUHBJOZQVJUKUSUTKUHBHOPSVJUIUQU
      TKVKQTCDUBVBVCUCUD @.
      @( [17-Sep-2013] @) @( [8-May-2013] @)

    @( Addition of positive fractions in terms of positive integers.
       (Contributed by Mario Carneiro, 8-May-2013.) @)
    addpqnqNEW @p |- ( ( A e. Q. /\ B e. Q. ) ->
        ( A +Q B ) = ( /Q ` ( A +pQ B ) ) ) @=
      ( vx vy cnq wcel cop cplq cfv cplpq cerq co cxp wceq opelxpi cnpi cv c1st
      c2nd cmi wa ccom cres df-plq fveq1i a1i fvres syl cpli df-plpqNEW fnmpt2i
      wfn opex elpqn syl2an wfun wf nqerf ffun ax-mp fvco2 mp3an1 3eqtrd df-ov
      sylancr fveq2i 3eqtr4g ) AEFZBEFZUAZABGZHIZVKJIZKIZABHLABJLZKIVJVLVKKJUBZ
      EEMZUCZIZVKVPIZVNVLVSNVJVKHVRUDUEUFVJVKVQFVSVTNABEEOVKVQVPUGUHVJJPPMZWAMZ
      ULZVKWBFZVTVNNZCDWAWACQZRIDQZSIZTLWGRIWFSIZTLUILZWIWHTLZGJCDUJWJWKUMUKVHA
      WAFBWAFWDVIAUNBUNABWAWAOUOKUPZWCWDWEWAEKUQWLURWAEKUSUTWBVKKJVAVBVEVCABHVD
      VOVMKABJVDVFVG @.
      @( [17-Sep-2013] @) @( [28-Aug-1995] @)

    @( Multiplication of positive fractions in terms of positive integers.
       (Contributed by Mario Carneiro, 8-May-2013.) @)
    mulpipq2NEW @p |- ( ( A e. ( N. X. N. ) /\ B e. ( N. X. N. ) ) ->
      ( A .pQ B ) = <. ( ( 1st ` A ) .N ( 1st ` B ) ) ,
                       ( ( 2nd ` A ) .N ( 2nd ` B ) ) >. ) @=
      ( vx vy cnpi cxp cv c1st cfv cmi c2nd cop cmpq wceq fveq2 oveq1d opeq12d
      co oveq2d df-mpqNEW opex ovmpt2 ) CDABEEFZUCCGZHIZDGZHIZJRZUDKIZUFKIZJRZ
      LAHIZBHIZJRZAKIZBKIZJRZLMULUGJRZUOUJJRZLUDANZUHURUKUSUTUEULUGJUDAHOPUTUIU
      OUJJUDAKOPQUFBNZURUNUSUQVAUGUMULJUFBHOSVAUJUPUOJUFBKOSQCDTUNUQUAUB @.
      @( [17-Sep-2013] @) @( [8-May-2013] @)

    @( Multiplication of positive fractions in terms of positive integers.
       (Contributed by Mario Carneiro, 8-May-2013.) @)
    mulpqnqNEW @p |- ( ( A e. Q. /\ B e. Q. ) ->
        ( A .Q B ) = ( /Q ` ( A .pQ B ) ) ) @=
      ( vx vy cnq wcel cop cmq cfv cmpq cerq co cxp wceq opelxpi cnpi c1st c2nd
      cv cmi wa ccom cres df-mq fveq1i a1i fvres syl wfn df-mpqNEW opex fnmpt2i
      elpqn syl2an wfun wf nqerf ffun ax-mp mp3an1 sylancr 3eqtrd df-ov fveq2i
      fvco2 3eqtr4g ) AEFZBEFZUAZABGZHIZVJJIZKIZABHLABJLZKIVIVKVJKJUBZEEMZUCZIZ
      VJVOIZVMVKVRNVIVJHVQUDUEUFVIVJVPFVRVSNABEEOVJVPVOUGUHVIJPPMZVTMZUIZVJWAFZ
      VSVMNZCDVTVTCSZQIDSZQITLZWERIWFRITLZGJCDUJWGWHUKULVGAVTFBVTFWCVHAUMBUMABV
      TVTOUNKUOZWBWCWDVTEKUPWIUQVTEKURUSWAVJKJVEUTVAVBABHVCVNVLKABJVCVDVF @.
      @( [17-Sep-2013] @) @( [28-Aug-1995] @)
  @}

  @{
    @d x y @.
    @( Closure of addition on positive fractions.  (Contributed by Mario
       Carneiro, 8-May-2013.) @)
    addpqfNEW @p |- +pQ : ( ( N. X. N. ) X. ( N. X. N. ) ) --> ( N. X. N. ) @=
      ( vx vy cv c1st cfv c2nd cmi co cpli cop cnpi wcel wral cplpq xp1st xp2nd
      cxp mulclpi syl2an syl2anc wf wa adantl adantr addclpi opelxpi df-plpqNEW
      rgen2a fmpt2 mpbi ) ACZDEZBCZFEZGHZUMDEZUKFEZGHZIHZUQUNGHZJZKKQZLZBVBMAVB
      MVBVBQVBNUAVCABVBUKVBLZUMVBLZUBZUSKLZUTKLZVCVFUOKLZURKLZVGVDULKLUNKLZVIVE
      UKKKOUMKKPZULUNRSVFUPKLZUQKLZVJVEVMVDUMKKOUCVDVNVEUKKKPZUDUPUQRTUOURUETVD
      VNVKVHVEVOVLUQUNRSUSUTKKUFTUHABVBVBVAVBNABUGUIUJ @.
      @( [17-Sep-2013] @) @( [29-Aug-1995] @)

    @( Closure of multiplication on positive fractions.  (Contributed by Mario
       Carneiro, 8-May-2013.) @)
    mulpqfNEW @p |- .pQ : ( ( N. X. N. ) X. ( N. X. N. ) ) --> ( N. X. N. ) @=
      ( vx vy cv c1st cfv cmi co c2nd cop cnpi cxp wcel wral cmpq wf wa mulclpi
      xp1st syl2an xp2nd opelxpi syl2anc rgen2a df-mpqNEW fmpt2 mpbi ) ACZDEZBC
      ZDEZFGZUGHEZUIHEZFGZIZJJKZLZBUPMAUPMUPUPKUPNOUQABUPUGUPLZUIUPLZPUKJLZUNJL
      ZUQURUHJLUJJLUTUSUGJJRUIJJRUHUJQSURULJLUMJLVAUSUGJJTUIJJTULUMQSUKUNJJUAUB
      UCABUPUPUOUPNABUDUEUF @.
      @( [17-Sep-2013] @) @( [29-Aug-1995] @)
  @}

  @{
    @d A x y z @.  @d B x y z @.  @d C x y z @.
    @( Lemma for ~ adderpq . @)
    adderpqlemNEW @p |- ( ( A e. ( N. X. N. ) /\ B e. ( N. X. N. ) /\
        C e. ( N. X. N. ) ) ->
      ( A ~Q B <-> ( A +pQ C ) ~Q ( B +pQ C ) ) ) @=
      ( vx vy cnpi wcel c1st cfv c2nd cmi co cpli wceq mulclpi syl2anc mulcompi
      ceq ovex fvex vz cxp w3a cop cplpq xp1st 3ad2ant1 xp2nd 3ad2ant3 addclpi
      wb 3ad2ant2 dfenq2 ecopopreqNEW syl22anc addpipq2 3adant2 3adant1 breq12d
      wbr ecopopreq2 3adant3 mulcanpi cv mulasspi caov4 eqtri oveq12i distrpi
      vex addcompi caovdistrr 3eqtr4i 3eqtrri oveq1i 3eqtri 3eqtr4ri addcanpi
      eqeq12i syl5rbbr 3bitr2d 3bitr4rd ) AFFUBZGZBWCGZCWCGZUCZAHIZCJIZKLZCHIZA
      JIZKLZMLZWLWIKLZUDZBHIZWIKLZWKBJIZKLZMLZWSWIKLZUDZRUTZWNXBKLZXAWOKLZNZACU
      ELZBCUELZRUTABRUTZWGWNFGZWOFGZXAFGZXBFGZXDXGUKWGWJFGZWMFGZXKWGWHFGZWIFGZX
      OWDWEXQWFAFFUFUGZWFWDXRWECFFUHUIZWHWIOPWGWKFGZWLFGZXPWFWDYAWECFFUFUIZWDWE
      YBWFAFFUHUGZWKWLOPWJWMUJPWGYBXRXLYDXTWLWIOPZWGWRFGZWTFGZXMWGWQFGZXRYFWEWD
      YHWFBFFUFULXTWQWIOPWGYAWSFGZYGYCWEWDYIWFBFFUHULZWKWSOPZWRWTUJPWGYIXRXNYJX
      TWSWIOPDEWNWOXAXBRFKDEUMZUNUOWGXHWPXIXCRWDWFXHWPNWEACUPUQWEWFXIXCNWDBCUPU
      RUSWGXJWHWSKLZWQWLKLZNZWIWIKLZYMKLZYPYNKLZNZXGWDWEXJYOUKWFDEABRFKYLVAVBWG
      YPFGZYMFGZYSYOUKWGXRXRYTXTXTWIWIOPZWGXQYIUUAXSYJWHWSOPZYPYMYNWQWLKSZVCPXG
      WOWTKLZYQMLZUUEYRMLZNZWGYSUUFXEUUGXFYQUUEMLWJXBKLZWMXBKLZMLUUFXEYQUUIUUEU
      UJMYQYMYPKLUUIYPYMWIWIKSWHWSKSQDEUAWHWSWIWIKAHTBJTZCJTZDVDZEVDZDVJEVJZQZU
      UMUUNUAVDZUUOUAVJZVEZUULVFVGUUEWLWKKLZWIWSKLZKLUUJDEUAWLWIWKWSKAJTZUULCHT
      ZUUPUUSUUKVFUUTWMUVAXBKWLWKUVBUVCQWIWSUULUUKQVHVGVHUUEYQWOWTKSZYPYMKSVKDE
      UAWJWMXBMKWHWIKSWKWLKSWSWIKSUUPUUMUUNUUQUUOUURVIVLVMWOXAKLWOWRKLZUUEMLZXF
      UUGWOWRWTWQWIKSWKWSKSVIXAWOWRWTMSWLWIKSQUUGYRUUEMLUVFUUEYRUVDYPYNKSZVKYRU
      VEUUEMYRWIWIYNKLZKLZWOWQKLZWIKLZUVEWIWIYNUULUUDVEUVIUVHWIKLUVKWIUVHUULWIY
      NKSQUVHUVJWIKUVJWLWIWQKLZKLUVLWLKLUVHWLWIWQUULBHTZVEWLUVLUVBWIWQKSQWIWQWL
      UVMUVBVEVNVOVGWOWQWIUVMUULVEVPVOVGVQVSWGUUEFGZYQFGZUUHYSUKWGXLYGUVNYEYKWO
      WTOPWGYTUUAUVOUUBUUCYPYMOPUUEYQYRUVGVRPVTWAWB @.
      @( [17-Sep-2013] @) @( [8-May-2013] @)

    @( Lemma for ~ mulerpq . @)
    mulerpqlemNEW @p |- ( ( A e. ( N. X. N. ) /\ B e. ( N. X. N. ) /\
        C e. ( N. X. N. ) ) ->
      ( A ~Q B <-> ( A .pQ C ) ~Q ( B .pQ C ) ) ) @=
      ( vx vy vz cnpi wcel c1st cfv cmi co c2nd ceq wbr wceq wb mulclpi syl2anc
      fvex cxp w3a cop cmpq xp1st 3ad2ant1 3ad2ant3 xp2nd 3ad2ant2 ecopopreqNEW
      dfenq2 syl22anc mulpipq2 3adant2 3adant1 breq12d ecopopreq2 3adant3 ovex
      mulcanpi mulcompi vex mulasspi caov4 eqtri eqeq12i a1i 3bitr2d 3bitr4rd
      cv ) AGGUAZHZBVKHZCVKHZUBZAIJZCIJZKLZAMJZCMJZKLZUCZBIJZVQKLZBMJZVTKLZUCZN
      OZVRWFKLZWDWAKLZPZACUDLZBCUDLZNOABNOZVOVRGHZWAGHZWDGHZWFGHZWHWKQVOVPGHZVQ
      GHZWOVLVMWSVNAGGUEUFZVNVLWTVMCGGUEUGZVPVQRSVOVSGHZVTGHZWPVLVMXCVNAGGUHUFV
      NVLXDVMCGGUHUGZVSVTRSVOWCGHZWTWQVMVLXFVNBGGUEUIXBWCVQRSVOWEGHZXDWRVMVLXGV
      NBGGUHUIZXEWEVTRSDEVRWAWDWFNGKDEUKZUJULVOWLWBWMWGNVLVNWLWBPVMACUMUNVMVNWM
      WGPVLBCUMUOUPVOWNVPWEKLZWCVSKLZPZVQVTKLZXJKLZXMXKKLZPZWKVLVMWNXLQVNDEABNG
      KXIUQURVOXMGHZXJGHZXPXLQVOWTXDXQXBXEVQVTRSVOWSXGXRXAXHVPWERSXMXJXKWCVSKUS
      ZUTSXPWKQVOXNWIXOWJXNXJXMKLWIXMXJVQVTKUSZVPWEKUSVADEFVPWEVQVTKAITBMTCITZD
      VJZEVJZDVBEVBZVAZYBYCFVJYDFVBVCZCMTZVDVEXOXKXMKLWJXMXKXTXSVADEFWCVSVQVTKB
      ITAMTYAYEYFYGVDVEVFVGVHVI @.
      @( [17-Sep-2013] @) @( [8-May-2013] @)
  @}

  @{
    @d a b c x y @.  @d a b c A @.  @d b c B @.  @d c C @.
    @( Lemma for distributive law: cancellation of common factor.  (Contributed
       by Mario Carneiro, 8-May-2013.) @)
    mulcanenqNEW @p |- ( ( A e. N. /\ B e. N. /\ C e. N. ) ->
      <. ( A .N B ) , ( A .N C ) >. ~Q <. B , C >. ) @=
      ( va vb vc vx vy cv cmi co cop ceq wbr cnpi wceq oveq1 oveq2 wcel vex
      opeq12d breq1d opeq1d opeq1 breq12d opeq2 mulcompi oveq1i mulasspi eqtri
      opeq2d w3a wa mulclpi 3adant3 3adant2 3simpc dfenq2 ecopopreqNEW syl21anc
      wb mpbiri vtocl3ga ) DIZEIZJKZVDFIZJKZLZVEVGLZMNZAVEJKZAVGJKZLZVJMNABJKZV
      MLZBVGLZMNVOACJKZLZBCLZMNDEFABCOOOVDAPZVIVNVJMWAVFVLVHVMVDAVEJQVDAVGJQUAU
      BVEBPZVNVPVJVQMWBVLVOVMVEBAJRUCVEBVGUDUEVGCPZVPVSVQVTMWCVMVRVOVGCAJRUKVGC
      BUFUEVDOSZVEOSZVGOSZULZVKVFVGJKZVEVHJKZPZWHVEVDJKZVGJKWIVFWKVGJVDVEDTZETU
      GUHVEVDVGWLFTUIUJWGVFOSZVHOSZWEWFUMVKWJVAWDWEWMWFVDVEUNUOWDWFWNWEVDVGUNUP
      WDWEWFUQGHVFVHVEVGMOJGHURUSUTVBVC @.
      @( [17-Sep-2013] @) @( [2-Sep-1995] @)
  @}

  @{
    @d r s t x y z @.
    @( 'Less than' is a strict ordering on positive fractions.  (Contributed by
       Mario Carneiro, 4-May-2013.) @)
    ltsonqNEW @p |- <Q Or Q. @=
      ( vr vs vt cnq cltq cv wcel wbr wb wa c1st cfv c2nd cmi co clti syl ovex
      cnpi fvex vx vy vz w3a wceq wo wn wi cxp elpqn adantr xp1st xp2nd mulclpi
      adantl syl2anc wor ltsopi sotric ordpinq fveq2 eqcomd oveq12d ceq dfenq2
      mpan ecopopreq2 syl2an enqeq 3expia sylbird impbid2 ancoms orbi12d notbid
      3bitr4d 3adant3 3ad2ant3 ltmpi 3syl 3adant1 3ad2ant1 anbi12d vex mulcompi
      bitrd mulasspi caov13 breq12i ltrelpi syl5eqbrr sylan2b 3adant2 3ad2ant2
      sotri syl6bi sylibrd jca so ) UAUBUCDEUAFZDGZUBFZDGZUCFZDGZUDZWTXBEHZWTXB
      UEZXBWTEHZUFZUGZIZXGXBXDEHZJZWTXDEHZUHXAXCXLXEXAXCJZWTKLZXBMLZNOZXBKLZWTM
      LZNOZPHZXSYBUEZYBXSPHZUFZUGZXGXKXPXSSGZYBSGZYCYGIZXPXQSGZXRSGZYHXPWTSSUIZ
      GZYKXAYNXCWTUJZUKZWTSSULQXPXBYMGZYLXCYQXAXBUJZUOZXBSSUMZQXQXRUNUPXPXTSGZY
      ASGZYIXPYQUUAYSXBSSULQXPYNUUBYPWTSSUMZQXTYAUNUPSPUQYHYIJYJURSXSYBPUSVFUPW
      TXBUTZXPXJYFXPXHYDXIYEXPXHYDXHXQXTXRYANWTXBKVAXHYAXRWTXBMVAVBVCXPYDWTXBVD
      HZXHXAYNYQUUEYDIXCYOYRABWTXBVDSNABVEVGVHXAXCUUEXHWTXBVIVJVKVLXCXAXIYEIXBW
      TUTVMVNVOVPVQXFXNXRXQXDMLZNOZNOZXRXDKLZYANOZNOZPHZXOXFXNUUFXSNOZUUFYBNOZP
      HZYAXTUUFNOZNOZYAUUIXRNOZNOZPHZJUULXFXGUUOXMUUTXFXGYCUUOXAXCXGYCIXEUUDVQX
      FXDYMGZUUFSGYCUUOIXEXAUVAXCXDUJVRXDSSUMXSYBUUFXQXRNRXTYANRVSVTWFXFXMUUPUU
      RPHZUUTXCXEXMUVBIXAXBXDUTWAXFYNUUBUVBUUTIXAXCYNXEYOWBUUCUUPUURYAXTUUFNRUU
      IXRNRVSVTWFWCUUTUUOUUNUUKPHZUULUUQUUNUUSUUKPABCYAXTUUFNWTMTZXBKTXDMTZAFZB
      FZAWDBWDZWEZUVFUVGCFUVHCWDWGZWHABCYAUUIXRNUVDXDKTXBMTZUVIUVJWHWIUUOUVCJUU
      HUUMUUKPABCUUFXQXRNUVEWTKTUVKUVIUVJWHUUMUUNUUKPSURWJWOWKWLWPXFXOUUGUUJPHZ
      UULXAXEXOUVLIXCWTXDUTWMXFYQYLUVLUULIXCXAYQXEYRWNYTUUGUUJXRXQUUFNRUUIYANRV
      SVTWFWQWRWS @.
      @( [18-Sep-2013] @) @( [19-Feb-1996] @)
  @}

  @{
    @d x y z w v u f @.
    @( Define pre-addition on signed reals.  This is a "temporary" set used in
       the construction of complex numbers ~ df-c , and is intended to be used
       only by the construction.  From Proposition 9-4.1 of [Gleason]
       p. 126. @)
    df-plprNEW @a |- +pR = ( x e. ( P. X. P. ) , y e. ( P. X. P. ) |->
         <. ( ( 1st ` x ) +P. ( 1st ` y ) ) ,
            ( ( 2nd ` x ) +P. ( 2nd ` y ) ) >. ) @.

    @( Define pre-multiplication on signed reals.  This is a "temporary" set
       used in the construction of complex numbers ~ df-c , and is intended to
       be used only by the construction.  From Proposition 9-4.1 of [Gleason]
       p. 126. @)
    df-mprNEW @a |- .pR = ( x e. ( P. X. P. ) , y e. ( P. X. P. ) |->
       <. ( ( ( 1st ` x ) .P. ( 1st ` y ) ) +P.
            ( ( 2nd ` x ) .P. ( 2nd ` y ) ) ) ,
          ( ( ( 1st ` x ) .P. ( 2nd ` y ) ) +P.
            ( ( 2nd ` x ) .P. ( 1st ` y ) ) ) >. ) @.

    @( Define equivalence relation for signed reals.  This is a "temporary" set
       used in the construction of complex numbers ~ df-c , and is intended to
       be used only by the construction.  From Proposition 9-4.1 of [Gleason]
       p. 126. @)
    df-enrNEW @a |- ~R = { <. x , y >. |
     ( ( x e. ( P. X. P. ) /\ y e. ( P. X. P. ) ) /\
       ( ( 1st ` x ) +P. ( 2nd ` y ) ) = ( ( 1st ` y ) +P. ( 2nd ` x ) ) ) } @.

    @( Define addition on signed reals.  This is a "temporary" set used in the
       construction of complex numbers ~ df-c , and is intended to be used only
       by the construction.  From Proposition 9-4.3 of [Gleason] p. 126. @)
    df-plrNEW @a |- +R = ( x e. R. , y e. R. |->
      ( iota z E. w E. v ( x = [ w ] ~R /\ y = [ v ] ~R /\
               z = [ ( w +pR v ) ] ~R ) ) ) @.

    @( Define multiplication on signed reals.  This is a "temporary" set used
       in the construction of complex numbers ~ df-c , and is intended to be
       used only by the construction.  From Proposition 9-4.3 of [Gleason]
       p. 126. @)
    df-mrNEW @a |- .R = ( x e. R. , y e. R. |->
      ( iota z E. w E. v ( x = [ w ] ~R /\ y = [ v ] ~R /\
               z = [ ( w .pR v ) ] ~R ) ) ) @.

    @( Define ordering relation on signed reals.  This is a "temporary" set
       used in the construction of complex numbers ~ df-c , and is intended to
       be used only by the construction.  From Proposition 9-4.4 of [Gleason]
       p. 127. @)
    df-ltrNEW @a |- <R = { <. x , y >. | ( ( x e. R. /\ y e. R. ) /\
       E. z E. w ( x = [ z ] ~R /\ y = [ w ] ~R /\
    ( ( 1st ` z ) +P. ( 2nd ` w ) ) <P ( ( 1st ` w ) +P. ( 2nd ` z ) ) ) ) } @.
  @}

  @{
    @d x y z @.
    @( The equivalence relation for signed reals is an equivalence relation.
       Proposition 9-4.1 of [Gleason] p. 126. @)
    enrerNEW @p |- Er ~R @=
      ( vx vy cer cnp df-enrNEW addclpr addcompr addasspr addcanpr ecopoprerNEW
      vz cpp cv vex ) ABKCDLABEAMZBMZFOPANBNZGOPKMZQKNZHOPRQSIJ @.
      @( [17-Sep-2013] @) @( [3-Sep-1995] @)
  @}

  @{
    @d x y @.
    @( The equivalence relation for signed reals exists. @)
    enrexNEW @p |- ~R e. _V @=
      ( vx vy cer cnp cxp npex xpex cv wcel wa c1st cfv c2nd cpp wceq df-enrNEW
      co copab opabssxp eqsstri ssexi ) CDDEZUBEZUBUBDDFFGZUDGCAHZUBIBHZUBIJUEK
      LUFMLNQUFKLUEMLNQOZJABRUCABPUGABUBUBSTUA @.
      @( [17-Sep-2013] @) @( [25-Jul-1995] @)
  @}

  @{
    @d x y z A @.  @d x y z B @.  @d x y z C @.  @d x y z D @.
    @( Lemma showing compatibility of addition. @)
    addcmpblnrNEW @p |- ( ( ( A e. ( P. X. P. ) /\ B e. ( P. X. P. ) ) /\
                         ( C e. ( P. X. P. ) /\ D e. ( P. X. P. ) ) ) ->
                ( ( A ~R B /\ C ~R D ) -> ( A +pR C ) ~R ( B +pR D ) ) ) @=
      ( vx vy cnp wcel wa cer co c1st cfv c2nd cpp wceq fvex cop fveq2 syl2an
      cxp wbr cplpr df-enrNEW ecopopreq2 bi2anan9 oveq12 vex addcompr addasspr
      vz cv caov4 3eqtr4g oveq1d opeq12d oveq2d df-plprNEW opex ovmpt2 ovex
      wb fveq2d op1st syl6eq op2nd syl2anr eqeq12d syl5ibr sylbid xp1st addclpr
      an4s xp2nd opelxpi syl2anc eqeltrd sylibrd ) AGGUAZHZBVSHZIZCVSHZDVSHZIZI
      ZABJUBZCDJUBZIZACUCKZLMZBDUCKZNMZOKZWLLMZWJNMZOKZPZWJWLJUBZWFWIALMZBNMZOK
      ZBLMZANMZOKZPZCLMZDNMZOKZDLMZCNMZOKZPZIZWRWBWGXFWEWHXMEFABJGOEFUDZUEEFCDJ
      GOXOUEUFXNWRWFWTXGOKZXAXHOKZOKZXCXJOKZXDXKOKZOKZPZXNXBXIOKXEXLOKXRYAXBXEX
      IXLOUGEFUKWTXGXAXHOALQCLQBNQEULZFULZEUHFUHZUIZYCYDUKULYEUKUHUJZDNQUMEFUKX
      CXJXDXKOBLQDLQANQYFYGCNQUMUNVTWCWAWDWRYBVBVTWCIZWAWDIZIWNXRWQYAYHWKXPPWMX
      QPWNXRPYIYHWKXPXTRZLMXPYHWJYJLEFACVSVSYCLMZYDLMZOKZYCNMZYDNMZOKZRZYJUCWTY
      LOKZXDYOOKZRYCAPZYMYRYPYSYTYKWTYLOYCALSUOYTYNXDYOOYCANSUOUPYDCPZYRXPYSXTU
      UAYLXGWTOYDCLSUQUUAYOXKXDOYDCNSUQUPEFURZXPXTUSUTZVCXPXTWTXGOVAZVDVEYIWMXS
      XQRZNMXQYIWLUUENEFBDVSVSYQUUEUCXCYLOKZXAYOOKZRYCBPZYMUUFYPUUGUUHYKXCYLOYC
      BLSUOUUHYNXAYOOYCBNSUOUPYDDPZUUFXSUUGXQUUIYLXJXCOYDDLSUQUUIYOXHXAOYDDNSUQ
      UPUUBXSXQUSUTZVCXSXQXCXJOVAZXAXHOVAVFVEWKXPWMXQOUGTYIWOXSPWPXTPWQYAPYHYIW
      OUUELMXSYIWLUUELUUJVCXSXQUUKVDVEYHWPYJNMXTYHWJYJNUUCVCXPXTUUDXDXKOVAVFVEW
      OXSWPXTOUGVGVHVMVIVJVTWCWAWDWSWRVBZYHWJVSHWLVSHUULYIYHWJYJVSUUCYHXPGHZXTG
      HZYJVSHVTWTGHXGGHUUMWCAGGVKCGGVKWTXGVLTVTXDGHXKGHUUNWCAGGVNCGGVNXDXKVLTXP
      XTGGVOVPVQYIWLUUEVSUUJYIXSGHZXQGHZUUEVSHWAXCGHXJGHUUOWDBGGVKDGGVKXCXJVLTW
      AXAGHXHGHUUPWDBGGVNDGGVNXAXHVLTXSXQGGVOVPVQEFWJWLJGOXOUETVMVR @.
      @( [18-Sep-2013] @) @( [3-Sep-1995] @)

    @{
      @d x y z E @.  @d x y z F @.  @d x y z G @.  @d x y z H @.
      cmpblnrNEW.1 @e |- A e. _V @.
      cmpblnrNEW.2 @e |- B e. _V @.
      cmpblnrNEW.3 @e |- C e. _V @.
      cmpblnrNEW.4 @e |- D e. _V @.
      cmpblnrNEW.5 @e |- E e. _V @.
      cmpblnrNEW.6 @e |- F e. _V @.
      cmpblnrNEW.7 @e |- G e. _V @.
      cmpblnrNEW.8 @e |- H e. _V @.
      @( Lemma used in lemma showing compatibility of multiplication. @)
      mulcmpblnrlemNEW @p |- ( ( ( A +P. D ) = ( C +P. B ) /\
                              ( E +P. H ) = ( G +P. F ) ) ->
          ( ( D .P. E ) +P. ( ( ( A .P. E ) +P. ( B .P. F ) ) +P.
                              ( ( C .P. H ) +P. ( D .P. G ) ) ) ) =
          ( ( D .P. E ) +P. ( ( ( C .P. G ) +P. ( D .P. H ) ) +P.
                              ( ( A .P. F ) +P. ( B .P. E ) ) ) ) ) @=
        ( cpp co cmp ovex vx vy vz wceq wa addasspr oveq2i eqtr4i cv mulcompr
        oveq1 vex distrpr caovdistrr 3eqtr3g oveq1d addcompr oveq1i caov32
        eqtr3i 3eqtr4g oveq2 syl6eq sylan9eq oveq2d sylan9eqr caov4 caov411
        3eqtr4a eqtri 3eqtri ) ADQRZCBQRZUDZEHQRZGFQRZUDZUEZDESRZAESRZCHSRZQRZQ
        RZBFSRZDGSRZQRZQRZCGSRZBESRZQRZAFSRZDHSRZQRZVSQRZQRZVSVTWDQRWAWEQRQRZQR
        ZVSWHWLQRZWKWIQRZQRZQRZVRWJCFSRZQRZWFQRZWJXBWDQRZWEQRZQRZWGWOXDWJXBWFQR
        ZQRXGWJXBWFCFSTZWDWEQTZUFXFXHWJQXBWDWEBFSTZDGSTZUFUGUHVRWCXCWFQVNVQWCCE
        SRZWAQRZWIQRZXCVNVTVSQRZWAQRZXMWIQRZWAQRWCXOVNXPXRWAQVNVLESRVMESRXPXRVL
        VMESUKUAUBUCADEQSILMUAUIZUBUIZUAULZUBULZUJZXSXTUCUIZYBUCULZUMZUNUAUBUCC
        BEQSKJMYCYFUNUOUPVSVTQRZWAQRWCXQVSVTWAAESTZCHSTZUFYGXPWAQVSVTDESTZYHUQU
        RUTUAUBUCXMWAWIQCESTYIBESTZXSXTYAYBUQZXSXTYDYBYEUFZUSVAVQXOWHXBQRZWIQRX
        CVQXNYNWIQVQCVOSRCVPSRXNYNVOVPCSVBCEHMPUMCGFONUMUOUPUAUBUCWHXBWIQCGSTZX
        IYKYLYMUSVCVDUPVRWNXFWJQVQVNWNWKDFSRZQRZWEQRZXFVQWKWLVSQRZQRWKYPWEQRZQR
        WNYRVQYSYTWKQVQDVOSRZDVPSRZYSYTVOVPDSVBYSVSWLQRUUAWLVSDHSTZYJUQDEHMPUMU
        HYTWEYPQRUUBYPWEDFSTZXLUQDGFONUMUHVAVEWKWLVSUUCYJUFWKYPWEUUDXLUFVAVNYQX
        EWEQVNVLFSRVMFSRYQXEVLVMFSUKUAUBUCADFQSILNYCYFUNUAUBUCCBFQSKJNYCYFUNUOU
        PVFVEVIWQVSWBWFQRZQRWGWPUUEVSQUAUBUCVTWDWAWEQYHXKYIYLYMXLVGUGVSWBWFVTWA
        QTXJUFUHXAVSWJWMQRZQRUUFVSQRWOWTUUFVSQWTWSWRQRUUFWRWSWHWLQTWKWIQTUQUAUB
        UCWKWIWHWLQAFSTYKYOYLYMUUCVHVJUGVSUUFYJWJWMQTUQWJWMVSWKWLQTYJUFVKVA @.
        @( [18-Sep-2013] @) @( [4-Sep-1995] @)
    @}

    @( Lemma showing compatibility of multiplication. @)
    mulcmpblnrNEW @p |- ( ( ( A e. ( P. X. P. ) /\ B e. ( P. X. P. ) ) /\
                         ( C e. ( P. X. P. ) /\ D e. ( P. X. P. ) ) ) ->
                ( ( A ~R B /\ C ~R D ) -> ( A .pR C ) ~R ( B .pR D ) ) ) @=
      ( vx vy cnp wcel wa c1st cfv c2nd cpp wceq cmp fvex mulclpr syl2an fveq2
      co cxp cer wbr cmpr df-enrNEW ecopopreq2 bi2anan9 mulcmpblnrlemNEW adantl
      wi xp2nd xp1st adantr addclpr syl2anc an4s ovex addcanpr syl5 wb oveq1d
      cop cv oveq12d opeq12d oveq2d df-mprNEW opex ovmpt2 fveq2d op1st syl6eq
      op2nd oveq12 syl2anr eqeq12d sylibrd sylbid opelxpi eqeltrd ) AGGUAZHZBW
      AHZIZCWAHZDWAHZIZIZABUBUCZCDUBUCZIZACUDTZJKZBDUDTZLKZMTZWNJKZWLLKZMTZNZWL
      WNUBUCZWHWKAJKZBLKZMTBJKZALKZMTNZCJKZDLKZMTDJKZCLKZMTNZIZWTWDWIXFWGWJXKEF
      ABUBGMEFUEZUFEFCDUBGMXMUFUGWHXLXBXGOTZXEXJOTZMTZXDXHOTZXCXIOTZMTZMTZXDXIO
      TZXCXHOTZMTZXBXJOTZXEXGOTZMTZMTZNZWTXLXCXGOTZXTMTYIYGMTNZWHYHXBXEXDXCXGXJ
      XIXHAJPALPBJPBLPCJPCLPDJPDLPUHWHYIGHZXTGHZYJYHUJWDXCGHZXGGHZYKWGWCYMWBBGG
      UKZUIWEYNWFCGGULZUMXCXGQRWBWEWCWFYLWBWEIZXPGHZXSGHZYLWCWFIZYQXNGHZXOGHZYR
      WBXBGHZYNUUAWEAGGULZYPXBXGQRWBXEGHZXJGHZUUBWEAGGUKZCGGUKZXEXJQRXNXOUNUOZY
      TXQGHZXRGHZYSWCXDGHZXHGHZUUJWFBGGULZDGGUKZXDXHQRWCYMXIGHZUUKWFYODGGULZXCX
      IQRXQXRUNUOZXPXSUNRUPYIXTYGXPXSMUQYCYFMUQURUOUSWBWEWCWFWTYHUTYQYTIWPXTWSY
      GYQWMXPNWOXSNWPXTNYTYQWMXPYFVBZJKXPYQWLUUSJEFACWAWAEVCZJKZFVCZJKZOTZUUTLK
      ZUVBLKZOTZMTZUVAUVFOTZUVEUVCOTZMTZVBZUUSUDXBUVCOTZXEUVFOTZMTZXBUVFOTZXEUV
      COTZMTZVBUUTANZUVHUVOUVKUVRUVSUVDUVMUVGUVNMUVSUVAXBUVCOUUTAJSZVAUVSUVEXEU
      VFOUUTALSZVAVDUVSUVIUVPUVJUVQMUVSUVAXBUVFOUVTVAUVSUVEXEUVCOUWAVAVDVEUVBCN
      ZUVOXPUVRYFUWBUVMXNUVNXOMUWBUVCXGXBOUVBCJSZVFUWBUVFXJXEOUVBCLSZVFVDUWBUVP
      YDUVQYEMUWBUVFXJXBOUWDVFUWBUVCXGXEOUWCVFVDVEEFVGZXPYFVHVIZVJXPYFXNXOMUQZV
      KVLYTWOYCXSVBZLKXSYTWNUWHLEFBDWAWAUVLUWHUDXDUVCOTZXCUVFOTZMTZXDUVFOTZXCUV
      COTZMTZVBUUTBNZUVHUWKUVKUWNUWOUVDUWIUVGUWJMUWOUVAXDUVCOUUTBJSZVAUWOUVEXCU
      VFOUUTBLSZVAVDUWOUVIUWLUVJUWMMUWOUVAXDUVFOUWPVAUWOUVEXCUVCOUWQVAVDVEUVBDN
      ZUWKYCUWNXSUWRUWIYAUWJYBMUWRUVCXIXDOUVBDJSZVFUWRUVFXHXCOUVBDLSZVFVDUWRUWL
      XQUWMXRMUWRUVFXHXDOUWTVFUWRUVCXIXCOUWSVFVDVEUWEYCXSVHVIZVJYCXSYAYBMUQZXQX
      RMUQVMVLWMXPWOXSMVNRYTWQYCNWRYFNWSYGNYQYTWQUWHJKYCYTWNUWHJUXAVJYCXSUXBVKV
      LYQWRUUSLKYFYQWLUUSLUWFVJXPYFUWGYDYEMUQVMVLWQYCWRYFMVNVOVPUPVQVRWBWEWCWFX
      AWTUTZYQWLWAHWNWAHUXCYTYQWLUUSWAUWFYQYRYFGHZUUSWAHUUIYQYDGHZYEGHZUXDWBUUC
      UUFUXEWEUUDUUHXBXJQRWBUUEYNUXFWEUUGYPXEXGQRYDYEUNUOXPYFGGVSUOVTYTWNUWHWAU
      XAYTYCGHZYSUWHWAHYTYAGHZYBGHZUXGWCUULUUPUXHWFUUNUUQXDXIQRWCYMUUMUXIWFYOUU
      OXCXHQRYAYBUNUOUURYCXSGGVSUOVTEFWLWNUBGMXMUFRUPVQ @.
      @( [18-Sep-2013] @) @( [5-Sep-1995] @)
  @}

  @{
    @d a b c d x y z A @.  @d a b c d x y z B @.  @d b c d y z C @.
    @d b c d y z D @.
    @( Addition of signed reals in terms of positive reals. @)
    addsrprNEW @p |- ( ( ( A e. P. /\ B e. P. ) /\ ( C e. P. /\ D e. P. ) ) ->
                ( [ <. A , B >. ] ~R +R [ <. C , D >. ] ~R ) =
                   [ <. ( A +P. C ) , ( B +P. D ) >. ] ~R ) @=
      ( vx vy vb cnp wcel cop cer cec co c1st cfv cpp c2nd cv wceq fveq2 vz cnr
      vd va vc cplr cplpr opex enrex enrer df-enrNEW df-plprNEW oveq1d opeq12d
      wa oveq2d df-plrNEW df-nr addcmpblnrNEW oprecNEW op1stg oveq12 ad2ant2r
      syl2an op2ndg eceq2 syl eqtrd ) AHIZBHIZUOZCHIZDHIZUOZUOZABJZKLCDJZKLUFMV
      PNOZVQNOZPMZVPQOZVQQOZPMZJZKLZACPMZBDPMZJZKLZEFUAABCDUBKHUFUGWDERZNOZFRZN
      OZPMZWJQOZWLQOZPMZJVRWMPMZWAWPPMZJPGUCUDUEVTWCUHUIUJEFUKEFULWJVPSZWNWRWQW
      SWTWKVRWMPWJVPNTUMWTWOWAWPPWJVPQTUMUNWLVQSZWRVTWSWCXAWMVSVRPWLVQNTUPXAWPW
      BWAPWLVQQTUPUNEFUAGUCUQURUDRGRUERUCRUSUTVOWDWHSWEWISVOVTWFWCWGVIVLVTWFSZV
      JVMVIVRASVSCSXBVLABHVACDHVAVRAVSCPVBVDVCVKWABSWBDSWCWGSVNABHHVECDHHVEWABW
      BDPVBVDUNWDWHKVFVGVH @.
      @( [17-Sep-2013] @) @( [3-Sep-1995] @)

    @( Multiplication of signed reals in terms of positive reals. @)
    mulsrprNEW @p |- ( ( ( A e. P. /\ B e. P. ) /\ ( C e. P. /\ D e. P. ) ) ->
                ( [ <. A , B >. ] ~R .R [ <. C , D >. ] ~R ) =
                  [ <. ( ( A .P. C ) +P. ( B .P. D ) ) ,
                       ( ( A .P. D ) +P. ( B .P. C ) ) >. ] ~R ) @=
      ( vx vy cnp wcel cop cer cec co c1st cfv cmp c2nd cpp cv wceq oveq12d vz
      vb vd va vc wa cmr cnr cmpr enrex enrer df-enrNEW df-mprNEW fveq2 oveq1d
      opex opeq12d oveq2d df-mrNEW df-nr mulcmpblnrNEW oprecNEW op1stg oveq12
      syl2an ad2ant2r op2ndg adantr eceq2 syl eqtrd ) AGHZBGHZUFZCGHZDGHZUFZUFZ
      ABIZJKCDIZJKUGLVSMNZVTMNZOLZVSPNZVTPNZOLZQLZWAWEOLZWDWBOLZQLZIZJKZACOLZBD
      OLZQLZADOLZBCOLZQLZIZJKZEFUAABCDUHJGUGUIWKERZMNZFRZMNZOLZXAPNZXCPNZOLZQLZ
      XBXGOLZXFXDOLZQLZIWAXDOLZWDXGOLZQLZWAXGOLZWDXDOLZQLZIQUBUCUDUEWGWJUPUJUKE
      FULEFUMXAVSSZXIXOXLXRXSXEXMXHXNQXSXBWAXDOXAVSMUNZUOXSXFWDXGOXAVSPUNZUOTXS
      XJXPXKXQQXSXBWAXGOXTUOXSXFWDXDOYAUOTUQXCVTSZXOWGXRWJYBXMWCXNWFQYBXDWBWAOX
      CVTMUNZURYBXGWEWDOXCVTPUNZURTYBXPWHXQWIQYBXGWEWAOYDURYBXDWBWDOYCURTUQEFUA
      UBUCUSUTUDRUBRUERUCRVAVBVRWKWSSWLWTSVRWGWOWJWRVRWCWMWFWNQVLVOWCWMSZVMVPVL
      WAASZWBCSZYEVOABGVCZCDGVCZWAAWBCOVDVEVFVNWDBSZWEDSZWFWNSVQABGGVGZCDGGVGZW
      DBWEDOVDVETVRWHWPWIWQQVNYFYKWHWPSVQVLYFVMYHVHYMWAAWEDOVDVEVNYJYGWIWQSVQYL
      VOYGVPYIVHWDBWBCOVDVETUQWKWSJVIVJVK @.
      @( [17-Sep-2013] @) @( [3-Sep-1995] @)
  @}

  @{
    @( Ordering of signed reals in terms of positive reals. @)
    ltsrpr2 @p |- ( ( A e. ( P. X. P. ) /\ B e. ( P. X. P. ) ) ->
     ( [ A ] ~R <R [ B ] ~R <->
      ( ( 1st ` A ) +P. ( 2nd ` B ) ) <P ( ( 1st ` B ) +P. ( 2nd ` A ) ) ) ) @=
      ? @.
      @( [20-Feb-1996] @)
  @}

  @{
    @d A x y z w v u f @.  @d B x y z w v u f @.  @d C x y z w v u f @.
    @d D x y z w v u f @.
    ltsrprNEW.1 @e |- A e. _V @.
    ltsrprNEW.2 @e |- B e. _V @.
    ltsrprNEW.3 @e |- C e. _V @.
    ltsrprNEW.4 @e |- D e. _V @.
    @( Ordering of signed reals in terms of positive reals. @)
    ltsrprNEW @p |- ( [ <. A , B >. ] ~R <R [ <. C , D >. ] ~R <->
                          ( A +P. D ) <P ( C +P. B ) ) @=
      ( vz vu vw vv vx vy vf cltp cltr cer cpp cnp cnr enrex dmenr df-nr
      ltrelsr ltrelpr 0npr dmplp cv co wbr enrer df-ltr wcel wa cop cec wceq
      wb addclpr ad2ant2lr anim12i ancoms an4s enreceq eqcom syl6bb bi2anan9
      oveq12 vex addcompr addasspr caov4 3eqtr4g syl6bi ovex ltapr
      caovord3 ex sylsyld brecop brecop2 ) ABCDPQRSTUAUBFGHUCUDUEUFUGUHIUIZJUI
      ZSUJZKUIZLUIZSUJZPUKZADSUJZBCSUJZPUKZMNIKLJABCDQRTUAUBULUCUDMNIKLJUMWCTUN
      ZWFTUNZUOZATUNZBTUNZUOZUOZWGTUNZWDTUNZUOZCTUNZDTUNZUOZUOZUOZWKTUNZWHTUNZU
      OZWCWFUPRUQABUPRUQURZWGWDUPRUQCDUPRUQURZUOZWEWKSUJZWHWJSUJZURZWIWLUSZWOXB
      WRXEXJWRXEUOZWOXBUOZXJXRXHXSXIWQXCXHWPXDBCUTVAWNWTXIWMXAWFWGUTVAVBVCVDXGX
      MWCBSUJZWFASUJZURZWDCSUJZWGDSUJZURZUOZXPWSXKYBXFXLYEWCWFABVEXFXLYDYCURYEW
      GWDCDVEYDYCVFVGVHYFXTYCSUJYAYDSUJXNXOXTYAYCYDSVIMNOWCWDBCSIVJJVJFMUIZNUIZ
      MVJZNVJZVKZYGYHOUIZYJOVJVLZGVMMNOWFWGADSKVJLVJEYKYMHVMVNVOXJXPXQMNOWEWKWH
      WJPTSWCWDSVPBCSVPYGYHYLYIYJVQWFWGSVPYKADSVPVRVSVTWAWB @.
      @( [20-Feb-1996] @)
  @}

  @{
    @d x y z w v @.
    @( Domain of addition on signed reals. @)
    dmaddsrNEW @p |- dom +R = ( R. X. R. ) @=
      ( vx vy vw vv vz cplr cnr cxp wfn cdm wceq cv cer cec cplpr w3a df-plrNEW
      co wex cio iotaex fnmpt2i fndm ax-mp ) FGGHZIFJUEKABGGALCLZMNKBLDLZMNKELU
      FUGORMNKPDSCSZETFABECDQUHEUAUBUEFUCUD @.
      @( [17-Sep-2013] @) @( [25-Aug-1995] @)

    @( Domain of multiplication on signed reals. @)
    dmmulsrNEW @p |- dom .R = ( R. X. R. ) @=
      ( vx vy vw vv vz cmr cnr cxp wfn cdm wceq cv cer cec cmpr co w3a df-mrNEW
      wex cio iotaex fnmpt2i fndm ax-mp ) FGGHZIFJUEKABGGALCLZMNKBLDLZMNKELUFUG
      OPMNKQDSCSZETFABECDRUHEUAUBUEFUCUD @.
      @( [17-Sep-2013] @) @( [25-Aug-1995] @)
  @}

  @{
    @d x y @.
    @( The empty set is not a signed real. @)
    0nsrNEW @p |- -. (/) e. R. @=
      ( vx vy cnr wcel cnp cxp cer cqs cpp df-enrNEW ecopoprdmNEW 0nelqs eleq2i
      c0 df-nr mtbir ) NCDNEEFZGHZDQGABGEIABJKLCRNOMP @.
      @( [18-Sep-2013] @) @( [25-Aug-1995] @)
  @}

  @{
    @d x y A @.  @d x y z w v @.
    @( 1 is an identity element for multiplication. @)
    1idsrNEW @p |- ( A e. R. -> ( A .R 1R ) = A ) @=
      ( vy cop cer cec c1r cmr co wceq cnp c1p cpp cmp 1pr addclpr syl2an ovex
      wcel mulclpr mpan2 vx vz vw cv cnr df-nr oveq1 id eqeq12d wa df-1r mp2an
      oveq2i mulsrpr mpanr12 wbr elexi distrpr oveq1d syl5req oveq2d oveq12
      1idpr syl5eq addasspr vex eqcomi 3eqtr3g jca df-enrNEW ecopopreqNEW mpdan
      wb mpbird opex enrer erthi syl eqtr4d ecoptocl ) UAUDZBUDZCZDEZFGHZWDIAFG
      HZAIUABAJJDUEUFWDAIZWEWFWDAWDAFGUGWGUHUIWAJRZWBJRZUJZWEWDKKLHZKCDEZGHZWDF
      WLWDGUKUMWJWMWAWKMHZWBKMHZLHZWAKMHZWBWKMHZLHZCZDEZWDWJWKJRZKJRZWMXAIXCXCX
      BNNKKOULZNWAWBWKKUNUOWJWCWTDUPZWDXAIWJXEWAWSLHZWPWBLHZIZWJWAWQLHZWRLHZWNW
      OWBLHZLHZXFXGWHXIWNIWRXKIXJXLIWIWHWNWQWQLHXIWAKKKJNUQZXMURWHWQWAWQLWAVCUS
      UTWIWRWOWOLHXKWBKKXMXMURWIWOWBWOLWBVCVAVDXIWNWRXKLVBPWAWQWRWAKMQWBWKMQVEX
      GXLWNWOWBWBKMQBVFVEVGVHWJWPJRZWSJRZUJXEXHVMWJXNXOWHWNJRZWOJRZXNWIWHXBXPXD
      WAWKSTWIXCXQNWBKSTWNWOOPWHWQJRZWRJRZXOWIWHXCXRNWAKSTWIXBXSXDWBWKSTWQWROPV
      IUBUCWAWBWPWSDJLUBUCVJVKVLVNWCWTDWAWBVOWPWSVOVPVQVRVSVDVT @.
      @( [18-Sep-2013] @) @( [2-May-1996] @)
  @}

  @{
    @d x y z A @.  @d x y z w v a b @.
    recexsrlemNEW.1 @e |- A e. _V @.
    @( The reciprocal of a positive signed real exists.  Part of Proposition
       9-4.3 of [Gleason] p. 126. @)
    recexsrlemNEW @p |- ( 0R <R A -> E. x e. R. ( A .R x ) = 1R ) @=
      ( vw vv cnr wcel cv co c1r wceq cer cnp cpp wa vex cmp c1p 1pr ovex cltr
      vy vz va vb c0r wbr cmr wrex ltrelsr simprd cop cec wi df-nr breq2 oveq1
      brel eqeq1d rexbidv imbi12d gt0srpr ltexpri sylbi recexpr addclpr ecopqsi
      cltp mpan2 enrex sylancl ad2antlr jctir anim2i adantr syl eqcomd mulcompr
      mulsrpr distrpr caovdistrr oveq2 syl5eq oveq1d elexi addcompr addasspr
      sylan9eqr caov32 syl6eq oveq1i eqtri oveq2i caov12 3eqtr4g wb mulclpr
      sylan2 syl2an an32s anassrs jca pm3.2i df-enrNEW ecopopreqNEW syl5ibr imp
      mp2an opex enrer erthi eqtrd df-1r syl6eqr rcla4ev syl2anc exp43 rexlimdv
      syl5 ecoptocl mpcom ) BFGZUFBUAUGZBAHZUHIZJKZAFUIZYCUFFGYBUFBFFUACUJURUKU
      FUBHZUCHZULLUMZUAUGZYJYDUHIZJKZAFUIZUNYCYGUNUBUCBMMLFUOYJBKZYKYCYNYGYJBUF
      UAUPYOYMYFAFYOYLYEJYJBYDUHUQUSUTVAYKYIDHZNIZYHKZDMUIZYHMGZYIMGZOZYNYKYIYH
      VHUGYSYHYIUBPZUCPZVBDYIYHUUCVCVDUUBYRYNDMYPMGYPEHZQIZRKZEMUIUUBYRYNUNZEYP
      VEUUBUUGUUHEMUUBUUEMGZUUGYRYNUUBUUIOZUUGYROZOZUUERNIZRULLUMZFGZYJUUNUHIZJ
      KZYNUUIUUOUUBUUKUUIUUMMGZRMGZUUOUUIUUSUURSUUERVFVIZSMUUMRLFVJUOVGVKVLUULU
      UPRRNIZRULZLUMZJUULUUPYHUUMQIZYIRQIZNIZYHRQIZYIUUMQIZNIZULZLUMZUVCUULUUBU
      URUUSOZOZUUPUVKKUUJUVMUUKUUIUVLUUBUUIUURUUSUUTSVMVNVOYHYIUUMRVSVPUULUVJUV
      BLUGZUVKUVCKUUJUUKUVNUUKUVNUUJUVFRNIZUVAUVINIZKZUUKYHUUEQIZUVGUVENIZNIZRN
      IZYIUUEQIZUVSNIZUVANIZUVOUVPUUKUWAUWCRNIZRNIUWDUUKUVTUWERNUUKUVTUWBRNIZUV
      SNIUWEUUKUVRUWFUVSNYRUUGUVRYQUUEQIZUWFYRUWGUVRYQYHUUEQUQVQUUGUWGUWBUUFNIU
      WFUDUEAYIYPUUENQUUDDPEPZUDHZUEHZUDPZUEPZVRUWIUWJYDUWLAPZVTWAUUFRUWBNWBWCW
      HWDUDUEAUWBRUVSNYIUUEQTZRMSWEZUVGUVENTUWIUWJUWKUWLWFZUWIUWJYDUWLUWMWGZWIW
      JWDUWCRRUWOUWOWGWJUVFUVTRNUVFUVRUVGNIZUVENIUVTUVDUWRUVENYHUUERUWHUWOVTWKU
      VRUVGUVEYHRQTZYIRQTZWGWLWKUVPUVIUVANIUWDUVAUVIRRNTUVGUVHNTWFUVIUWCUVANUVI
      UVGUWBUVENIZNIUWCUVHUXAUVGNYIUUERUWHUWOVTWMUDUEAUVGUWBUVENUWSUWNUWTUWPUWQ
      WNWLWKWLWOUUJUVFMGZUVIMGZOUVAMGZUUSOUVNUVQWPUUJUXBUXCYTUUIUUAUXBYTUUIOUVD
      MGZUVEMGZUXBUUAUUIYTUURUXEUUTYHUUMWQWRUUAUUSUXFSYIRWQVIUVDUVEVFWSWTYTUUAU
      UIUXCYTUVGMGZUVHMGZUXCUUAUUIOYTUUSUXGSYHRWQVIUUIUUAUURUXHUUTYIUUMWQWRUVGU
      VHVFWSXAXBUXDUUSUUSUUSUXDSSRRVFXHSXCADUVFUVIUVARLMNADXDXEVKXFXGUVJUVBLUVF
      UVIXIUVARXIXJXKVPXLXMXNYMUUQAUUNFYDUUNKYLUUPJYDUUNYJUHWBUSXOXPXQXRXSXRXSX
      TYA @.
      @( [17-Sep-2013] @) @( [15-May-1996] @)
  @}

  @{
    @d x y z w v A @.  @d x y z C @.
    map2psrprNEW.1 @e |- A e. _V @.
    map2psrprNEW.2 @e |- C e. R. @.
    @( Equivalence for positive signed real.  (Contributed by Mario Carneiro,
       15-Jun-2013.) @)
    map2psrprNEW @p |- ( ( C +R -1R ) <R A <->
            E. x e. P. ( C +R [ <. x , 1P >. ] ~R ) = A ) @=
      ( vy vz vw vv cltr cplr cm1r wcel wceq c1p cnp cpp cnr wbr co rexlimiva
      ecopoveq sylan9eqr elexi addcompr addasssr mappsrpr addasspr ecoptocl
      reximdva addcomsr syl6bir ltrelsr sylbird mulclsr reximdv ltexpri biimpac
      3bitr4i 3eqtr3i syl5bbr rexbidv imbi12d oveq2i addclsr oveq1i vex cv
      df-m1r impbii syl5bb simprd df-enr breq2d ltsrpr breq1i syl5bi breq2i cer
      eqeq1i mpanl2 ancoms syl5eq oveq2 ovex ax-mp breq2 0idsr bitri df-nr wi
      eqeq2 sylbi mp2an pn0sr eqtri erthi mpcom ltasr enrer ltapr wrex cltp c0r
      opex mpan brel syld syl5 1pr cec cop cmr m1r syl wb wa ex 0r ) CLKTZBJSZC
      AVHZOXLZVSXKZKTZBNZAPXBZBRMZYAYGYAXTRMYHXTBRRJDUMXGVLYHYALCLXMTZBKTZJSZYG
      YKXTCYJKTZJSZYHYACRMZYKYMXPELYJCLRXNUDYIBKWEWSWFYHYLBXTJYHYLBXDKTZBCYIKTZ
      BKTXDBKTYLYOYPXDBKYNYPXDNECWOWFVFCYIBCLXMWEDUFXDBXDRXSUDDUKUTBWHWCZVNVKYH
      YKYDYJNZAPXBZYGYHYJRMZYKYSWKZYIRMZYHYTYNLRMUUBEXNCLUOWNYIBVEXFLFVHZGVHZXL
      ZVSXKZJSZYDUUFNZAPXBZWKUUAFGYJPPVSRWJUUFYJNZUUGYKUUIYSUUFYJLJWGUUJUUHYRAP
      UUFYJYDWLVBVCUUGUUDYBQTZUUCOQTZNZAPXBZUUCPMUUDPMXQZUUIUUGUUDUULXCSZUUNUUG
      OOOQTZXLVSXKZUUFJSZUUPLUURUUFJVIVPOUUDQTZUUQUUCQTZXCSUUTOUULQTZXCSZUUSUUP
      UVAUVBUUTXCUVAOOUUCQTZQTUVBOOUUCOPXJUDZFVGZUHUVDUULOQOUUCUVEUVFUEVDWPVROU
      UQUUCUUDUVEOOQWEUVFGVGZVOOPMZUUPUVCXPXJUUDUULOUVGUUCOQWEZXAWFUSWIAUUDUULU
      VIUQWMUUOUUMUUHAPUUMYBUUDQTZUULNZUUOYBPMZXQUUHUUKUVJUULUUDYBUVGAVGZUEVTUV
      LUUOUVKUUHWKUVLUUOXQUVKYCUUEVSSZUUHUVLUVHUUOUVNUVKXPXJHIYBOUUCUUDVSPQHIVM
      UBWAYCUUEVSYBOXEUUCUUDXEWTWQULWBVQUJXIUIXOYHYRYFAPYHYRYFYRYHYEYLBYDYJCKWD
      YQUCXRUPXHUNWRYFYAAPYFUVLYAUVLXTYEJSYFYAYBCUVMEUGYEBXTJWGVAURUAVJ @.
      @( [18-Sep-2013] @) @( [17-May-1996] @)
  @}

  @{
    @d x y @.
    @( Define addition over complex numbers. @)
    df-plusNEW @a |- + = ( x e. CC , y e. CC |->
                  <. ( ( 1st ` x ) +R ( 1st ` y ) ) ,
                     ( ( 2nd ` x ) +R ( 2nd ` y ) ) >. ) @.

    @( Define multiplication over complex numbers. @)
    df-mulNEW @a |- x. = ( x e. CC , y e. CC |->
               <. ( ( ( 1st ` x ) .R ( 1st ` y ) ) +R
           ( -1R .R ( ( 2nd ` x ) .R ( 2nd ` y ) ) ) ) ,
                  ( ( ( 2nd ` x ) .R ( 1st ` y ) ) +R
                    ( ( 1st ` x ) .R ( 2nd ` y ) ) ) >. ) @.
  @}
  $)

